!function(t){function e(e){for(var o,a,i=e[0],l=e[1],c=e[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);for(u&&u(e);d.length;)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={0:0},s=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push(["88xZ",1]),n()}({"1F4C":function(t,e,n){var o=n("FbAF");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("34185a9c",o,!0,{})},"3Z06":function(t,e,n){var o=n("H2ud");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("a3d9af50",o,!0,{})},"3fMe":function(t,e,n){"use strict";var o=n("s1UG");n.n(o).a},"6T9c":function(t,e,n){var o=n("LaNS");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("fad6da24",o,!0,{})},"88xZ":function(t,e,n){"use strict";n.r(e);var o=n("oCYn"),r=n("lSNA"),s=n.n(r),a=n("o0o1"),i=n.n(a),l=n("yXPU"),c=n.n(l),u=n("L2JU"),p=n("VphZ"),d=n("9/5/"),h=n.n(d),f=n("wd/R"),g=n.n(f);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={name:"LinkEditor",props:{link:{type:Object,required:!0}},data:function(){return{graphId:this.link.graph,source:this.link.source,target:this.link.target,type:this.link.type}},computed:b({},Object(u.e)("postsModule",["graphs","posts","selectedGraphNames"]),{},Object(u.c)("postsModule",["postIds","graphNames","titleOrBody"]),{possibleTargets:function(){var t=this;return this.postIds.filter((function(e){return e!==t.source}))}}),watch:{graphId:"updateLinkLocal",source:"updateLinkLocal",target:"updateLinkLocal",type:"updateLinkLocal"},methods:b({},Object(u.d)("postsModule",["updateLink","removeLink"]),{updateLinkLocal:function(){this.updateLink({id:this.link.id,graph:this.graphId,source:this.source,target:this.target,type:this.type,updated_at:g()().format()}),this.$emit("updatedLink",this.link.id)},removeLinkLocal:function(){this.removeLink({id:this.link.id}),this.$emit("removedLink",this.link.id)}})},y=n("KHd+");function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={name:"Clicker",components:{LinkEditor:Object(y.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[t._v("\n        The link is a\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"select select--secondary mb-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                reply\n            ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                sidenote\n            ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                link\n            ")])]),t._v("\n        in the graph\n        "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"select select--secondary mb-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0),t._v("\n\n        from\n        "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.source,expression:"source",modifiers:{number:!0}}],staticClass:"select select--secondary mb-2 text-red",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.source=e.target.multiple?n:n[0]}}},t._l(t.postIds,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                "+t._s(t.titleOrBody(e))+"\n            ")])})),0),t._v("\n        →\n        "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.target,expression:"target",modifiers:{number:!0}}],staticClass:"select select--secondary mb-2 text-red",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.target=e.target.multiple?n:n[0]}}},t._l(t.possibleTargets,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                "+t._s(t.titleOrBody(e))+"\n            ")])})),0),t._v(" "),n("button",{staticClass:"btn btn--secondary py-1 px-2 block",on:{click:t.removeLinkLocal}},[t._v(" 🗑 remove link\n        ")])])])}),[],!1,null,null,null).exports},computed:O({},Object(u.e)("postsModule",["graphs","selectedGraphIds","links"]),{},Object(u.c)("postsModule",["titleOrBody"]),{},Object(u.e)("clickerModule",["newLinkSource","linkToEdit"]),{showClickButtonMenu:{get:function(){return this.$store.state.clickerModule.showClickButtonMenu},set:function(t){this.setShowClickButtonMenu(t)}},clickMode:{get:function(){return this.$store.state.clickerModule.clickMode},set:function(t){this.setClickMode(t)}},newLinkGraphId:{get:function(){return this.$store.state.clickerModule.newLinkGraphId},set:function(t){this.setNewLinkGraphId(t)}},newLinkType:{get:function(){return this.$store.state.clickerModule.newLinkType},set:function(t){this.setNewLinkType(t)}},shouldShowContextMenu:function(){return"openPosts"!==this.clickMode}}),created:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.newLinkGraphId=t},watch:{clickMode:function(t,e){"changeLink"===t?document.querySelector(":root").style.setProperty("--link-stroke-width","40px"):"changeLink"===e&&document.querySelector(":root").style.setProperty("--link-stroke-width","20px")}},methods:O({},Object(u.d)("clickerModule",["setShowClickButtonMenu","setClickMode","setNewLinkSource","setNewLinkTarget","setNewLinkGraphId","setNewLinkType"]),{toggleClickButtonMenu:function(){var t=this.showClickButtonMenu;this.showClickButtonMenu=!this.showClickButtonMenu,t||(this.clickMode="openPosts")},toggleClickMode:function(t){var e=this.clickMode;this.clickMode=e===t?"openPosts":t}})},x=(n("W1TW"),Object(y.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clicker"},[n("button",{staticClass:"clicker__button",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickButtonMenu(e)}}},[t._v("\n        +\n    ")]),t._v(" "),n("div",{staticClass:"clicker__container text-xs md:text-base"},[t.showClickButtonMenu?n("div",{staticClass:"clicker__actionButtons"},[n("button",{staticClass:"clicker__actionButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickMode("addLink")}}},[n("span",{staticClass:"linkIcon"}),t._v(" Add link between "),n("span",{staticClass:"mx-2 text-red"},[t._v("↔")]),t._v(" posts\n            ")]),t._v(" "),n("button",{staticClass:"clicker__actionButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickMode("changeLink")}}},[n("span",{staticClass:"linkIcon"}),t._v(" ✎ 🗑 Change/remove link\n            ")])]):t._e(),t._v(" "),t.shouldShowContextMenu?n("div",{staticClass:"clicker__contextMenu"},["addLink"===t.clickMode?[n("label",{staticClass:"mb-4"},[t._v("\n                    The new link will be a\n                    "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.newLinkType,expression:"newLinkType"}],staticClass:"select select--secondary mb-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newLinkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                            reply\n                        ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                            sidenote\n                        ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                            link\n                        ")])]),t._v("\n                    in the graph\n                    "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.newLinkGraphId,expression:"newLinkGraphId",modifiers:{number:!0}}],staticClass:"select select--secondary max-w-full",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.newLinkGraphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,staticClass:"truncate",domProps:{value:o}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])})),0)]),t._v(" "),t.newLinkSource?n("label",{staticClass:"mt-4 pt-4 block",staticStyle:{"border-top":"1px solid var(--red)"}},[t._v("\n                    It'll be from\n                    "),n("span",{staticClass:"inline-block"},[n("span",{staticClass:"text-red"},[t._v(t._s(t.titleOrBody(t.newLinkSource)))]),t._v("\n                        →\n                        "),n("span",{staticClass:"text-red"},[t._v("[the next post you click on]")])])]):t._e(),t._v(" "),n("sub",{staticClass:"my-2 text-xs text-gray-500"},[t._v("\n                    "+t._s(null===t.newLinkSource?"click on a post to choose a source for the link":"the link will be created when you click on another post")+"\n\n                ")]),t._v(" "),null!==t.newLinkSource?n("button",{staticClass:"btn btn--secondary",attrs:{type:"button",disabled:null==t.newLinkSource,title:"remove this source"},on:{click:function(e){return t.setNewLinkSource(null)}}},[t._v("\n                    x\n                ")]):t._e()]:"changeLink"===t.clickMode?[null===t.linkToEdit?n("sub",{staticClass:"text-xs text-gray-500"},[t._v("\n                    click on a link to change it\n                ")]):n("LinkEditor",{attrs:{link:t.links[t.linkToEdit]},on:{removedLink:function(e){t.linkToEdit=null}}})]:t._e()],2):t._e()])])}),[],!1,null,"3eb45b8e",null).exports);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j={name:"OfflineGraph",components:{Clicker:x},data:function(){return{svg:null,rootG:null,zoom:null,shouldResetZooming:!1,linksG:null,nodesG:null,nodesWithCoordinates:{}}},computed:_({},Object(u.e)("settingsModule",["canOpenMultiplePosts"]),{},Object(u.e)("postsModule",["selectedGraphIds"]),{},Object(u.c)("postsModule",["postsInSelectedGraphs","linksInSelectedGraphs","graphColour","titleOrBody","isNeighbour"]),{},Object(u.e)("clickerModule",["showClickButtonMenu","clickMode"]),{selectedPostIds:function(){return this.$store.state.postsModule.selectedPostIds}}),watch:{selectedGraphIds:function(){this.shouldResetZooming=!0,this.debouncedMakeGraphSvg()},postsInSelectedGraphs:function(){this.debouncedMakeGraphSvg()},linksInSelectedGraphs:function(){this.debouncedMakeGraphSvg()}},mounted:function(){var t=this;this.svg=p.f("#graphSvg"),this.rootG=p.f("#graphSvg g"),this.linksG=p.f(".graph__links").attr("stroke","#999").attr("stroke-opacity",.6),this.nodesG=p.f(".graph__nodes").attr("stroke","#fff").attr("stroke-width",1.5),this.setupZooming(),this.$nextTick((function(){t.debouncedMakeGraphSvg()})),this.$root.$on("focusOnPost",this.focusOnPost)},methods:_({},Object(u.d)("postsModule",["selectPostId"]),{},Object(u.d)("clickerModule",["setShowClickButtonMenu","setClickMode"]),{},Object(u.b)("clickerModule",["handlePostClick","handleLinkClick"]),{onSvgClick:function(t){"graphSvg"===t.target.id&&(this.showClickButtonMenu&&this.setShowClickButtonMenu(!1),"openPosts"!==this.clickMode&&this.setClickMode("openPosts"))},debouncedMakeGraphSvg:h()((function(){this.makeGraphSvg()}),250,{leading:!1,trailing:!0}),makeGraphSvg:function(){var t=this,e=JSON.parse(JSON.stringify(this.postsInSelectedGraphs)),n=JSON.parse(JSON.stringify(this.linksInSelectedGraphs)),o=this,r=p.e(e).force("link",p.c(n).id((function(t){return t.id})).distance(200)).force("charge",p.d().strength(-7500)).force("center",p.b(200,100));r.tick(300);var s=this.linksG.selectAll("line").data(n,(function(t){return t.id})).join("line").classed("graph__link",!0).attr("stroke",(function(e){return t.graphColour(e.graph)})).attr("marker-end","url(#arrowhead)").on("click",this.handleLinkClick),a=this.nodesG.selectAll("g").data(e,(function(t){return t.id}));a.exit().remove();var i=a.enter(),l=i.append("g").classed("node",!0);l.append("circle"),l.append("text"),(a=a.merge(i)).selectAll("g").attr("dataset-id",(function(t){return t.id}));var c=p.g(".node").select("circle").classed("node__circle",!0).attr("r",15).attr("title",(function(t){return t.title})),u=p.g(".node").select("text").classed("node__text",!0).attr("text-anchor","end").text((function(e){return t.titleOrBody(e.id)})).on("mouseover",(function(t){p.f(this).style("filter","url(#postHoverFilter)"),p.f(p.f(this).node().parentNode).raise(),c.filter((function(e){return t.id!==e.id&&!o.isNeighbour(t,e)})).style("opacity",.2),u.filter((function(e){return t.id!==e.id&&!o.isNeighbour(t,e)})).style("opacity",.2),s.filter((function(e){return t.id!==e.source.id&&t.id!==e.target.id})).style("opacity",.2)})).on("mouseout",(function(t){p.f(this).style("filter",""),c.style("opacity",1),u.style("opacity",1),s.style("opacity",1)}));p.g(".node *").on("click",this.handlePostClick),r.on("tick",(function(){s.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),c.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),u.attr("x",(function(t){return t.x-6})).attr("y",(function(t){return t.y-4}))})),this.shouldResetZooming&&(this.shouldResetZooming=!1,this.$nextTick((function(){t.resetZoomToCenter()})));var d={},h=!0,f=!1,g=void 0;try{for(var m,b=e[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){var v=m.value;d[v.id]=v}}catch(t){f=!0,g=t}finally{try{h||null==b.return||b.return()}finally{if(f)throw g}}this.nodesWithCoordinates=d},setupZooming:function(){var t=this;this.zoom=p.h().scaleExtent([.05,2]).on("zoom",(function(){var e=p.a.transform.x,n=p.a.transform.y,o=p.a.transform.k;t.rootG.attr("transform","translate(".concat(e," ").concat(n,") scale(").concat(o,")"));var r=.5/o,s=r<1?r:1+.35*(r-1),a=Math.min(220,Math.ceil(48*s));document.querySelector(":root").style.setProperty("--node-text-size",a+"px")})),this.resetZoomToCenter()},resetZoomToCenter:function(){this.svg.call(this.zoom).call(this.zoom.transform,p.i.translate(200,100).scale(.5)).on("wheel",(function(){p.a.preventDefault()}))},focusOnPost:function(t){var e=this.nodesWithCoordinates[t];this.svg.transition().duration(1500).call(this.zoom.transform,p.i.translate(200,100).scale(.5).translate(400-e.x+100,200-e.y+100))}})},I=(n("hZnF"),Object(y.a)(j,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"h-full w-full relative pb-4 pr-8 md:pr-16 flex"},[e("svg",{staticClass:"w-full cursor-move border bg-white",attrs:{id:"graphSvg"},on:{click:this.onSvgClick}},[e("defs",[e("marker",{attrs:{id:"arrowhead",viewBox:"-0 -5 10 10",refX:"15",refY:"0",orient:"auto",markerWidth:"2",markerHeight:"2"}},[e("path",{staticStyle:{stroke:"none"},attrs:{d:"M 0,-5 L 10 ,0 L 0,5",fill:"#353535"}})]),this._v(" "),e("filter",{attrs:{id:"postHoverFilter"}},[e("feFlood",{attrs:{"flood-color":"#000"}}),this._v(" "),e("feComponentTransfer",[e("feFuncA",{attrs:{type:"linear",slope:"0.75"}})],1),this._v(" "),e("feComposite",{attrs:{in:"SourceGraphic"}})],1)]),this._v(" "),e("g",{attrs:{transform:"translate(5, 15) scale(0.5)"}},[e("g",{staticClass:"graph__links"}),this._v(" "),e("g",{staticClass:"graph__nodes"})])]),this._v(" "),e("Clicker")],1)}),[],!1,null,null,null).exports);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"LinkedPosts",props:{post:{type:Object,required:!0}},computed:C({},Object(u.e)("settingsModule",["canOpenMultiplePosts"]),{},Object(u.c)("postsModule",["titleOrBody","postIdsThatLinkToPost"]),{linkedPosts:function(){return this.postIdsThatLinkToPost(this.post.id)}}),methods:C({},Object(u.d)("postsModule",["togglePostId","removeLink"]),{togglePostIdLocal:function(t){this.togglePostId({id:t,canOpenMultiplePosts:this.canOpenMultiplePosts})}})},S=Object(y.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"flex justify-between items-center"},[Object.keys(t.linkedPosts.to).length>0?n("div",t._l(t.linkedPosts.to,(function(e,o){return n("div",{key:o,staticClass:"mb-2"},[n("a",{staticClass:"link text-xs md:text-sm",attrs:{title:"view this post"},on:{click:function(n){return t.togglePostIdLocal(e)}}},[t._v("\n                    "+t._s(t.titleOrBody(e))+"\n                ")]),t._v(" "),n("button",{staticClass:"ml-2 py-1 px-2 btn btn--secondary",attrs:{title:"remove link"},on:{click:function(e){return t.removeLink({id:o})}}},[t._v("\n                    x\n                ")])])})),0):t._e(),t._v(" "),Object.keys(t.linkedPosts.to).length>0?n("h4",{staticClass:"h h--4 mx-1 flex flex-col"},[n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")])]):t._e(),t._v(" "),n("span",[t._v("\n            "+t._s(t.titleOrBody(t.post.id))+"\n        ")]),t._v(" "),Object.keys(t.linkedPosts.from).length>0?n("h4",{staticClass:"h h--4 mx-1 flex flex-col"},[n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")])]):t._e(),t._v(" "),Object.keys(t.linkedPosts.from).length>0?n("div",t._l(t.linkedPosts.from,(function(e,o){return n("div",{key:o,staticClass:"mb-2"},[n("a",{staticClass:"link text-xs md:text-sm",on:{click:function(n){return t.togglePostIdLocal(e)}}},[t._v("\n                    "+t._s(t.titleOrBody(e))+"\n                ")]),t._v(" "),n("button",{staticClass:"ml-2 py-1 px-2 btn btn--secondary",attrs:{title:"remove link"},on:{click:function(e){return t.removeLink({id:o})}}},[t._v("\n                    x\n                ")])])})),0):t._e()])])}),[],!1,null,null,null).exports;function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={name:"LinkedGraphs",props:{post:{type:Object,required:!0}},computed:N({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["graphIdsThatIncludeThisPost"]),{linkedGraphs:function(){return this.graphIdsThatIncludeThisPost(this.post.id)}}),methods:N({},Object(u.d)("postsModule",["toggleGraphId","removePostFromGraph"]))},A=Object(y.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.linkedGraphs.length>0?n("div",[n("h4",{staticClass:"h h--4"},[t._v("\n            Graphs that include this post\n        ")]),t._v(" "),t._l(t.linkedGraphs,(function(e){return n("a",{key:e,staticClass:"link block mb-2 text-xs md:text-base",attrs:{title:"show/hide this graph"},on:{click:function(n){return t.toggleGraphId(e)}}},[t._v("\n            "+t._s(t.graphs[e].name)+"\n\n            "),n("button",{staticClass:"ml-8 py-1 px-2 text-xs btn btn--secondary",on:{click:function(n){return n.stopPropagation(),t.removePostFromGraph({graphId:e,postId:t.post.id})}}},[t._v("\n                remove from graph\n            ")])])}))],2):t._e()])}),[],!1,null,null,null).exports;function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z={name:"PostEditor",props:{post:{type:Object,required:!0},inPostBar:{type:Boolean,default:!1}},data:function(){return{showEditor:!1,showTitleInput:this.post.title.length>0}},computed:G({},Object(u.c)("postsModule",["titleOrBody"]),{title:{get:function(){return this.post.title},set:function(t){this.updatePost(G({},this.post,{title:t,updated_at:g()().format()}))}},body:{get:function(){return this.post.body},set:function(t){this.updatePost(G({},this.post,{body:t,updated_at:g()().format}))}}}),methods:G({},Object(u.d)("postsModule",["updatePost","removePost"]),{toggleTitleInput:function(){this.showTitleInput&&this.title.trim().length>0?this.$refs.inputTitle.focus():this.showTitleInput=!this.showTitleInput},removePostLocal:function(){confirm("Are you sure you want to remove this post? ")&&this.removePost({id:this.post.id})}})},B=Object(y.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flex flex-col"},[n("div",{staticClass:"w-full flex",class:{"justify-center":!t.inPostBar,"justify-start":t.inPostBar}},[n("div",{staticClass:"w-full flex items-center",class:{"md:w-2/3":!t.inPostBar,"justify-between":!t.inPostBar,"justify-start":t.inPostBar}},[t.inPostBar?t._e():n("span",[t._v("\n                "+t._s(t.titleOrBody(t.post.id))+"\n            ")]),t._v(" "),n("span",[n("button",{staticClass:"mt-4 mr-8 px-4 btn btn--primary",on:{click:function(e){t.showEditor=!t.showEditor}}},[t._v("\n                    "+t._s(t.showEditor?"close":"edit")+"\n                ")]),t._v(" "),n("button",{staticClass:"btn btn--secondary",on:{click:t.removePostLocal}},[t._v("\n                    delete\n                ")])])])]),t._v(" "),t.showEditor?n("div",{staticClass:"my-2"},[n("label",{staticClass:"mb-5 flex flex-col"},[n("button",{staticClass:"text-left underline",class:t.title.trim().length>0?"cursor-default":"cursor-pointer",on:{click:function(e){return e.preventDefault(),t.toggleTitleInput(e)}}},[t._v("\n                Title\n            ")]),t._v(" "),t.showTitleInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"inputTitle",staticClass:"p-2 rounded text-gray-800 placeholder-gray-600",attrs:{type:"text",placeholder:"On the Origin of Species",minlength:"0",maxlength:"1000"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}):t._e()]),t._v(" "),n("label",{staticClass:"mb-5 flex flex-col"},[t._v("\n            Body\n            "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body,expression:"body"}],staticClass:"p-2 h-48 rounded text-gray-800 placeholder-gray-600",attrs:{required:"required",minlength:"1",maxlength:"10000"},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})])]):t._e(),t._v(" "),t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex justify-center"},[e("hr",{staticClass:"my-4 w-2/3"})])}],!1,null,"4a4db3e0",null).exports;function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var U,Q={name:"PostMaker",data:function(){return{showTitleInput:!1,title:"",body:""}},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.b)("postsModule",["makeNewPost"]),{toggleTitleInput:function(){this.showTitleInput&&this.title.trim().length>0?this.$refs.inputTitle.focus():this.showTitleInput=!this.showTitleInput},makePost:(U=c()(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={title:this.title,body:this.body,created_at:g()().format(),updated_at:g()().format()},t.next=3,this.makeNewPost(e);case 3:n=t.sent,this.resetNewPost(),this.$emit("madePost",n);case 6:case"end":return t.stop()}}),t,this)}))),function(){return U.apply(this,arguments)}),resetNewPost:function(){this.title="",this.body=""}})};n("TycU");function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y={name:"AddLinkedPost",components:{PostMaker:Object(y.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"mb-5 flex flex-col"},[n("button",{staticClass:"text-left underline",on:{click:function(e){return e.preventDefault(),t.toggleTitleInput(e)}}},[t._v("\n            Title\n        ")]),t._v(" "),t.showTitleInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"inputTitle",staticClass:"p-2 rounded text-gray-800 placeholder-gray-600",attrs:{type:"text",placeholder:"On the Origin of Species",minlength:"0",maxlength:"1000"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}):t._e()]),t._v(" "),n("label",{staticClass:"mb-5 flex flex-col"},[t._v("\n        Body\n        "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body,expression:"body"}],staticClass:"p-2 h-48 rounded text-gray-800 placeholder-gray-600 textareaBody",attrs:{placeholder:"But with regard to the material world, we can at least go so far as this—we can perceive that events are brought about not by insulated interpositions of Divine power, exerted in each particular case, but by the establishment of general laws",required:"required",minlength:"1",maxlength:"10000"},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"mb-5 btn btn--primary",attrs:{type:"submit",disabled:0===t.title.trim().length&&0===t.body.trim().length},on:{click:t.makePost}},[t._v("\n        Create\n    ")])])}),[],!1,null,"4a313601",null).exports},props:{post:{type:Object,required:!0}},data:function(){return{show:!1,graphId:1,fromOrToNewPost:"to",linkType:"reply"}},computed:H({},Object(u.e)("postsModule",["graphs","selectedGraphIds"]),{},Object(u.c)("postsModule",["titleOrBody"])),created:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.graphId=t},methods:H({},Object(u.d)("postsModule",["addLink"]),{toggleFromOrToTheNewPost:function(){var t="from"===this.fromOrToNewPost?"to":"from";this.fromOrToNewPost=t},addLinkToPost:function(t){var e="from"===this.fromOrToNewPost?t.id:this.post.id,n="to"===this.fromOrToNewPost?t.id:this.post.id;this.addLink({source:e,target:n,graph:this.graphId,type:this.linkType})}})},R={name:"Actions",components:{PostEditor:B,AddLinkedPost:Object(y.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("button",{staticClass:"h h--3 mb-5 underline",attrs:{type:"button"},on:{click:function(e){t.show=!t.show}}},[t._v("\n        Add linked post\n    ")]),t._v(" "),t.show?[n("label",{staticClass:"mb-3 block"},[t._v("\n            Link in graph:\n            "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),0)]),t._v(" "),n("label",{staticClass:"mb-3 block"},[t._v("\n            "+t._s(t.titleOrBody(t.post.id))+"\n            "),n("button",{staticClass:"mx-4 link",attrs:{type:"button"},on:{click:t.toggleFromOrToTheNewPost}},[t._v("\n                "+t._s("to"===t.fromOrToNewPost?"→":"←")+"\n            ")]),t._v("\n            [the new post]\n        ")]),t._v(" "),n("label",{staticClass:"mb-3 block"},[t._v("\n            link type:\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.linkType,expression:"linkType"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.linkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                    reply\n                ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                    sidenote\n                ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                    link\n                ")])])]),t._v(" "),n("h4",{staticClass:"mt-5 h h--4"},[t._v("\n            Add post\n        ")]),t._v(" "),n("hr",{staticClass:"mb-1"}),t._v(" "),n("post-maker",{on:{madePost:t.addLinkToPost}})]:t._e()],2)}),[],!1,null,null,null).exports},props:{post:{type:Object,required:!0}}};n("SViF");function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var J={name:"Post",components:{LinkedPosts:S,LinkedGraphs:A,Actions:Object(y.a)(R,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"actionsContainer"},[e("PostEditor",{attrs:{post:this.post,inPostBar:!0}}),this._v(" "),e("AddLinkedPost",{attrs:{post:this.post}})],1)}),[],!1,null,"63d36f1e",null).exports},props:{post:{type:Object,required:!0}},data:function(){return{bottomTab:""}},computed:W({},Object(u.e)("settingsModule",["postWidth"]),{},Object(u.e)("postsModule",["selectedPostIds"]),{},Object(u.c)("postsModule",["postIdsInSelectedGraphs","postIdsThatLinkToPost"]),{hasLinkedPosts:function(){var t=this.postIdsThatLinkToPost(this.post.id);return Object.keys(t.to).length>0||Object.keys(t.from).length>0},isVisibleInGraph:function(){return this.postIdsInSelectedGraphs.includes(this.post.id)}}),methods:W({},Object(u.d)("postsModule",["unselectPostId"]),{toggleBottomTab:function(t){this.bottomTab=this.bottomTab===t?"":t}})},V=(n("XhxE"),Object(y.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"relative post",style:{"min-width":t.postWidth+"vw"}},[n("div",[n("button",{staticClass:"absolute right-0 mr-2 btn btn--primary opacity-25 hover:opacity-100",on:{click:function(e){return t.unselectPostId(t.post.id)}}},[t._v("\n            x\n        ")]),t._v(" "),t.post.title.length>0?n("h3",{staticClass:"h h--3 whitespace-pre-wrap"},[t._v(t._s(t.post.title))]):t._e(),t._v(" "),n("p",{staticClass:"whitespace-pre-wrap font-sans"},[t._v(t._s(t.post.body))])]),t._v(" "),n("div",[n("div",[t.selectedPostIds.length>1?n("button",{staticClass:"post__dragHandle bottomLink bottomLink--unselected",attrs:{type:"button"}},[n("span",{staticClass:"text-xl"},[t._v("⇄")])]):t._e(),t._v(" "),t.isVisibleInGraph?n("button",{staticClass:"focusButton bottomLink bottomLink--unselected",attrs:{type:"button",title:"focus on this post in the viewer above"},on:{click:function(e){return t.$root.$emit("focusOnPost",t.post.id)}}},[n("span",{staticClass:"text-base"},[t._v("🔍")])]):t._e(),t._v(" "),n("button",{staticClass:"bottomLink",class:["linked-posts"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",t.hasLinkedPosts?"":"line-through"],attrs:{type:"button",title:"posts that link to or from this one",disabled:!t.hasLinkedPosts},on:{click:function(e){return t.toggleBottomTab("linked-posts")}}},[t._v("\n                linked posts\n            ")]),t._v(" "),n("button",{staticClass:"bottomLink",class:"linked-graphs"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",attrs:{title:"graphs that include this post",type:"button"},on:{click:function(e){return t.toggleBottomTab("linked-graphs")}}},[t._v("\n                linked graphs\n            ")]),t._v(" "),n("button",{staticClass:"bottomLink",class:"actions"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",attrs:{title:"things you can do with this post",type:"button"},on:{click:function(e){return t.toggleBottomTab("actions")}}},[t._v("\n                actions\n            ")])]),t._v(" "),""!==t.bottomTab?n(t.bottomTab,{tag:"component",attrs:{post:t.post},on:{close:function(e){t.bottomTab=""}}}):t._e()],1)])}),[],!1,null,"1fe818fb",null).exports),q=n("MQ60");function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tt={name:"PostBar",components:{Post:V,VueDraggable:n.n(q).a},computed:X({},Object(u.e)("postsModule",["posts"]),{selectedPostIds:{get:function(){return this.$store.state.postsModule.selectedPostIds},set:function(t){this.setSelectedPostIds(t)}}}),methods:X({},Object(u.d)("postsModule",["setSelectedPostIds"]))};n("3fMe");function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var nt={name:"Viewer",components:{OfflineGraph:I,PostBar:Object(y.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VueDraggable",{staticClass:"w-full flex items-start overflow-x-auto postBar",attrs:{handle:".post__dragHandle"},model:{value:t.selectedPostIds,callback:function(e){t.selectedPostIds=e},expression:"selectedPostIds"}},t._l(t.selectedPostIds,(function(e){return n("post",{key:e,staticClass:"m-2 p-2",attrs:{post:t.posts[e]}})})),1)}),[],!1,null,null,null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)("settingsModule",["graphAndPostsDirection","graphHeight","postBarHeight"]),{},Object(u.e)("postsModule",["graphs"]),{selectedGraphIds:{get:function(){return this.$store.state.postsModule.selectedGraphIds},set:function(t){this.$store.commit("postsModule/setSelectedGraphIds",t)}}})},ot=Object(y.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"mb-4 flex flex-col"},[n("span",{staticClass:"block h h--4"},[t._v("\n            Graphs\n        ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.selectedGraphIds,expression:"selectedGraphIds",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700",attrs:{multiple:"",size:"7"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.selectedGraphIds=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)]),t._v(" "),n("div",{staticClass:"flex",style:{"flex-direction":"horizontal"===t.graphAndPostsDirection?"row":"column"}},[n("offline-graph",{style:{"min-height":t.graphHeight+"vh"}}),t._v(" "),n("PostBar",{style:{"min-height":t.postBarHeight+"vh"}})],1)])}),[],!1,null,null,null).exports;function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at={name:"GraphEditor",props:{graphId:{type:String,required:!0}},data:function(){return{postIdToAddToGraph:null,newGraphName:""}},computed:st({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["postIds","titleOrBody"]),{graph:function(){return this.graphs[this.graphId]},possiblePostIdsToAddToGraph:function(){var t=this;return this.postIds.filter((function(e){return!t.graph.nodes.includes(e)}))}}),methods:st({},Object(u.d)("postsModule",["addPostToGraph","changeGraphName","removeGraph"]),{addPostToGraphLocal:function(){this.addPostToGraph({graphId:this.graphId,postId:this.postIdToAddToGraph}),this.postIdToAddToGraph=null},changeGraphNameLocal:function(){0!==this.newGraphName.trim().length&&(this.changeGraphName({graphId:this.graphId,newGraphName:this.newGraphName}),this.newGraphName="")}})};function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={name:"Graphs",components:{GraphEditor:Object(y.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex justify-between"},[n("h3",{staticClass:"h h--3"},[t._v("\n            "+t._s(t.graph.name)+"\n        ")]),t._v(" "),1!==t.graphId?n("button",{staticClass:"py-1 px-2 btn btn--secondary",on:{click:function(e){return t.removeGraph(t.graphId)}}},[t._v("\n            Remove\n        ")]):t._e()]),t._v(" "),n("div",[t.possiblePostIdsToAddToGraph.length>0?n("div",{staticClass:"mb-4"},[n("label",[n("span",{staticClass:"block h h--4"},[t._v("\n                    Add post to graph\n                ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.postIdToAddToGraph,expression:"postIdToAddToGraph",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.postIdToAddToGraph=e.target.multiple?n:n[0]}}},t._l(t.possiblePostIdsToAddToGraph,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                        "+t._s(t.titleOrBody(e))+"\n                    ")])})),0)]),t._v(" "),n("button",{staticClass:"py-1 px-2 btn btn--secondary",attrs:{disabled:null===t.postIdToAddToGraph},on:{click:t.addPostToGraphLocal}},[t._v("\n                Add\n            ")])]):t._e(),t._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newGraphName,expression:"newGraphName"}],staticClass:"mb-2 p-2 rounded text-gray-800 text-base placeholder-gray-600",attrs:{type:"text",placeholder:"foo graph"},domProps:{value:t.newGraphName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeGraphNameLocal(e)},input:function(e){e.target.composing||(t.newGraphName=e.target.value)}}}),t._v(" "),n("button",{staticClass:"py-1 px-2 btn btn--secondary",attrs:{disabled:0===t.newGraphName.trim().length},on:{click:t.changeGraphNameLocal}},[t._v("\n                Change graph name\n            ")])])])])}),[],!1,null,null,null).exports},data:function(){return{newGraphName:""}},computed:lt({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["postIds","titleOrBody"])),methods:lt({},Object(u.d)("postsModule",["makeNewGraph"]),{makeNewGraphLocal:function(){this.makeNewGraph(this.newGraphName),this.newGraphName=""}})},ut=Object(y.a)(ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[Object.keys(t.graphs).length>0?n("section",[n("h1",{staticClass:"h h--1"},[t._v("\n            Graphs\n        ")]),t._v(" "),n("hr",{staticClass:"my-5"}),t._v(" "),n("h2",{staticClass:"h h--2"},[n("label",{staticClass:"flex flex-col items-start"},[t._v("\n                Make new graph\n                "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newGraphName,expression:"newGraphName"}],staticClass:"mb-2 p-2 rounded text-gray-800 text-base placeholder-gray-600",attrs:{type:"text",placeholder:"foo graph"},domProps:{value:t.newGraphName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.makeNewGraphLocal(e)},input:function(e){e.target.composing||(t.newGraphName=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{type:"submit",disabled:0===t.newGraphName.trim().length},on:{click:t.makeNewGraphLocal}},[t._v("\n                    Create\n                ")])])]),t._v(" "),n("hr",{staticClass:"my-5"}),t._v(" "),n("section",[n("h2",{staticClass:"h h--2"},[t._v("\n                Edit graphs\n            ")]),t._v(" "),t._l(t.graphs,(function(t,e){return n("GraphEditor",{key:e,staticClass:"m-4 p-4 border",attrs:{graphId:e}})}))],2)]):t._e()])}),[],!1,null,null,null).exports;function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht,ft={name:"LoadSave",data:function(){return{fileToImport:null,shouldImportData:!1,shouldImportSettings:!1,shouldTakeDataFrom:"local",shouldSaveNewlyImportedDataToFirebase:!0}},computed:dt({},Object(u.e)("settingsModule",["shouldAutosave"]),{},Object(u.c)(["storageObject"]),{fileToImportIsValid:function(){return null!==this.fileToImport&&"application/json"===this.fileToImport.type}}),methods:dt({},Object(u.b)(["saveStateToLocalStorage","saveStateToStorage","loadStateFromStorage","importData","importSettings"]),{onFileUpload:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length&&!(e.length>1)){var n=e[0];this.fileToImport=e[0],"application/json"===n.type||alert("You must upload a JSON file exported by the 'export' button")}},importState:(ht=c()(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fileToImport.text();case 2:if(e=t.sent,"postsModule"in(n=JSON.parse(e))&&"settingsModule"in n&&"firebaseModule"in n){t.next=7;break}return alert("Imported file isn't valid"),t.abrupt("return");case 7:if(!this.shouldImportData){t.next=10;break}return t.next=10,this.importData(n);case 10:if(!this.shouldImportSettings){t.next=18;break}if(this.shouldImportData){t.next=16;break}return t.next=14,this.importSettings({storageObject:n,shouldTakeDataFrom:this.shouldTakeDataFrom});case 14:t.next=18;break;case 16:return t.next=18,this.importSettings({storageObject:n,shouldTakeDataFrom:null});case 18:if(this.fileToImport=null,!this.shouldSaveNewlyImportedDataToFirebase){t.next=24;break}return t.next=22,this.saveStateToStorage();case 22:t.next=26;break;case 24:return t.next=26,this.saveStateToLocalStorage();case 26:case"end":return t.stop()}}),t,this)}))),function(){return ht.apply(this,arguments)}),exportState:function(){var t=new Blob([JSON.stringify(this.storageObject)],{type:"application/json"}),e=g()().format("Y-MM-DD_HH:mm:ss");this.downloadData(t,"spiderwebExport-".concat(e,".json"))},downloadData:function(t,e){var n=document.createElement("a");document.body.appendChild(n),n.style="display: none";var o=window.URL.createObjectURL(t);n.href=o,n.download=e,n.click(),window.URL.revokeObjectURL(o)}})},gt=Object(y.a)(ft,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.shouldAutosave?t._e():n("div",{staticClass:"mb-8 flex justify-around"},[n("button",{staticClass:"btn btn--primary",on:{click:t.saveStateToStorage}},[t._v("\n                Save\n            ")])]),t._v(" "),n("div",{staticClass:"flex justify-around items-start"},[n("div",{staticClass:"w-1/2 flex flex-col items-start"},[n("label",{staticClass:"mb-4"},[n("button",{staticClass:"btn btn--secondary",on:{click:function(e){return t.$refs.fileInput.click()}}},[t._v("\n                        Upload a data/settings file that's been previously exported\n                    ")]),t._v(" "),n("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",accept:"application/json"},on:{change:t.onFileUpload}})]),t._v(" "),t.fileToImportIsValid?n("div",{staticClass:"mb-4 flex flex-col items-start"},[n("label",[t._v("\n                        Import data\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shouldImportData,expression:"shouldImportData"}],staticClass:"ml-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.shouldImportData)?t._i(t.shouldImportData,null)>-1:t.shouldImportData},on:{change:function(e){var n=t.shouldImportData,o=e.target,r=!!o.checked;if(Array.isArray(n)){var s=t._i(n,null);o.checked?s<0&&(t.shouldImportData=n.concat([null])):s>-1&&(t.shouldImportData=n.slice(0,s).concat(n.slice(s+1)))}else t.shouldImportData=r}}})]),t._v(" "),n("label",[t._v("\n                        Import settings\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shouldImportSettings,expression:"shouldImportSettings"}],staticClass:"ml-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.shouldImportSettings)?t._i(t.shouldImportSettings,null)>-1:t.shouldImportSettings},on:{change:function(e){var n=t.shouldImportSettings,o=e.target,r=!!o.checked;if(Array.isArray(n)){var s=t._i(n,null);o.checked?s<0&&(t.shouldImportSettings=n.concat([null])):s>-1&&(t.shouldImportSettings=n.slice(0,s).concat(n.slice(s+1)))}else t.shouldImportSettings=r}}})]),t._v(" "),n("p",[t.shouldImportData||t.shouldImportSettings?t._e():n("sub",{staticClass:"text-gray-500"},[t._v("\n                            (you need to import data and/or settings)\n                        ")])]),t._v(" "),t.shouldImportSettings?n("label",[t._v("\n                        If the settings I'm importing will start backing up data to Firebase (and I wasn't already),\n                        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldTakeDataFrom,expression:"shouldTakeDataFrom"}],staticClass:"select text-red",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldTakeDataFrom=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"local"}},[t._v("\n                                keep using the data that's been stored locally\n                            ")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("\n                                use any data that's been stored in Firebase, and overwrite what I've stored locally\n                            ")])])]):t._e(),t._v(" "),t.shouldImportData&&"local"===t.shouldTakeDataFrom?n("label",[t._v("\n                        If my settings will back up data to Firebase (and I'm not overwriting the locally-stored data with what's in Firebase),\n                        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldSaveNewlyImportedDataToFirebase,expression:"shouldSaveNewlyImportedDataToFirebase"}],staticClass:"select text-red",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldSaveNewlyImportedDataToFirebase=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:!0}},[t._v("\n                                I want to\n                            ")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("\n                                I don't want\n                            ")])]),t._v("\n                        to immediately save any newly-imported data to Firebase\n                    ")]):t._e(),t._v(" "),t._m(0),t._v(" "),t._m(1)]):t._e(),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{disabled:!t.fileToImportIsValid||!t.shouldImportData&&!t.shouldImportSettings},on:{click:t.importState}},[t._v("\n                    Import the uploaded file\n                ")]),t._v(" "),null===t.fileToImport||t.fileToImportIsValid&&(t.shouldImportData||t.shouldImportSettings)?t._e():n("sub",{staticClass:"my-2 text-xs text-gray-500"},[t._v("\n                    "+t._s(t.fileToImportIsValid?t.shouldImportData||t.shouldImportSettings?"":"you must click one of the 'import' buttons above":"the file you've uploaded isn't valid")+"\n                ")])]),t._v(" "),n("div",{staticClass:"w-1/2"},[n("button",{staticClass:"btn btn--primary",on:{click:t.exportState}},[t._v("\n                    Export data and settings\n                ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("sub",{staticClass:"text-gray-500"},[this._v("\n                            The file you're importing must look like this:\n                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"33vh"}},[e("code",[this._v('{\n    "postsModule": {\n        "posts": {},\n        "links": {},\n        "graphs": {\n            "1": {\n                "id": 1,\n                "name": "default",\n                "nodes": [],\n                "colour": "black"\n            }\n        },\n        "selectedPostIds": [],\n        "selectedGraphIds": []\n    },\n    "settingsModule": {\n        "shouldAutosave": true,\n        "remoteStorageMethod": "firebase",\n        "canOpenMultiplePosts": true,\n        "graphHeight": 66,\n        "postBarHeight": 66\n    },\n    "firebaseModule": {\n        "firebaseConfig": {\n            "apiKey": "x",\n            "authDomain": "y",\n            "databaseURL": "z",\n            "projectId": "xy",\n            "storageBucket": "yz",\n            "messagingSenderId": "xyz",\n            "appId": "xx"\n        }\n    }\n}')])])}],!1,null,null,null).exports,mt=n("cDf5"),bt=n.n(mt);function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var yt,kt={name:"Settings",data:function(){return{remoteStorageMethodInComponent:"none",shouldTakeDataFrom:null,firebaseConfigInComponent:""}},computed:{shouldAutosave:{get:function(){return this.$store.state.settingsModule.shouldAutosave},set:function(t){this.setShouldAutosave(t)}},remoteStorageMethod:function(){return this.$store.state.settingsModule.remoteStorageMethod},firebaseConfig:{get:function(){return JSON.stringify(this.$store.state.firebaseModule.firebaseConfig)},set:function(t){try{this.setFirebaseConfig(JSON.parse(t))}catch(t){alert('Firebase config isn\'t formatted correctly, it should be like this: {"apiKey":"xx","authDomain":"x.firebaseapp.com","databaseURL":"https://x.firebaseio.com","projectId":"spiderweb-e49bd","storageBucket":"x.appspot.com","messagingSenderId":"123","appId":"xyz"}')}}},canOpenMultiplePosts:{get:function(){return this.$store.state.settingsModule.canOpenMultiplePosts},set:function(t){this.setCanOpenMultiplePosts(t)}},graphAndPostsDirection:{get:function(){return this.$store.state.settingsModule.graphAndPostsDirection},set:function(t){this.setGraphAndPostsDirection(t)}},graphHeight:{get:function(){return this.$store.state.settingsModule.graphHeight},set:function(t){this.setGraphHeight(t)}},postBarHeight:{get:function(){return this.$store.state.settingsModule.postBarHeight},set:function(t){this.setPostBarHeight(t)}},postWidth:{get:function(){return this.$store.state.settingsModule.postWidth},set:function(t){this.setPostWidth(t)}},firebaseConfigIsValid:function(){try{var t=JSON.parse(this.firebaseConfigInComponent);return"object"===bt()(t)&&"string"==typeof t.apiKey&&""!==t.apiKey.trim()}catch(t){return!1}},canChangeStorageMethod:function(){return"firebase"!==this.remoteStorageMethodInComponent||null!==this.shouldTakeDataFrom&&this.firebaseConfigIsValid}},created:function(){this.remoteStorageMethodInComponent=this.remoteStorageMethod,this.firebaseConfigInComponent=this.firebaseConfig},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.d)("settingsModule",["setShouldAutosave","setCanOpenMultiplePosts","setGraphAndPostsDirection","setGraphHeight","setPostBarHeight","setPostWidth"]),{},Object(u.b)("settingsModule",["setRemoteStorageMethod"]),{},Object(u.b)("firebaseModule",["setFirebaseConfig"]),{changeStorageMethod:(yt=c()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.firebaseConfig!==this.firebaseConfigInComponent&&(this.firebaseConfig=this.firebaseConfigInComponent),t.next=3,this.setRemoteStorageMethod({remoteStorageMethod:this.remoteStorageMethodInComponent,shouldTakeDataFrom:this.shouldTakeDataFrom});case 3:case"end":return t.stop()}}),t,this)}))),function(){return yt.apply(this,arguments)})})};n("GbnV");function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt,Mt={name:"OfflineApp",components:{Viewer:ot,Graphs:ut,LoadSave:gt,Settings:Object(y.a)(kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flex flex-col items-start"},[n("div",{staticClass:"setting"},[n("label",[t._v("\n            Data\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldAutosave,expression:"shouldAutosave"}],staticClass:"text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldAutosave=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:!0}},[t._v("\n                    should\n                ")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("\n                    shouldn't\n                ")])]),t._v("\n            be saved automatically when something changes\n        ")]),t._v(" "),t.shouldAutosave?t._e():n("sub",{staticClass:"text-gray-500"},[t._v('\n            (you\'ll need to press "save" in the "load/save" tab)\n        ')])]),t._v(" "),n("div",{staticClass:"setting flex flex-col",class:{"w-full md:w-1/2":"firebase"===t.remoteStorageMethod}},[n("div",{staticClass:"flex flex-col items-start"},[n("label",[t._v("\n                Data\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.remoteStorageMethodInComponent,expression:"remoteStorageMethodInComponent"}],staticClass:"ml-4 text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.remoteStorageMethodInComponent=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"none"}},[t._v("shouldn't")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("should")])]),t._v("\n                be backed up to "),n("a",{staticClass:"link",attrs:{href:"https://firebase.google.com/docs/database"}},[t._v("\n                    Firebase's Realtime Database\n                ")]),t._v(" "),"firebase"===t.remoteStorageMethodInComponent?n("sub",{staticClass:"ml-1 text-xs text-gray-500"},[t._v("\n                    copy your Firebase config from "),n("a",{staticClass:"link",attrs:{href:"https://firebase.google.com/docs/web/setup?authuser=0#config-object",target:"_blank"}},[t._v("here")]),t._v(", it must be like\n                    "),t._m(0)]):t._e()]),t._v(" "),"none"!==t.remoteStorageMethodInComponent?n("div",{staticClass:"w-full flex flex-col items-start"},[t.remoteStorageMethodInComponent!==t.remoteStorageMethod?n("label",[t._v("\n                    When I start backing up data to Firebase, I want to\n                    "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldTakeDataFrom,expression:"shouldTakeDataFrom"}],staticClass:"text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldTakeDataFrom=e.target.multiple?n:n[0]}}},[null===t.shouldTakeDataFrom?n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("\n                            [please choose an option]\n                        ")]):t._e(),t._v(" "),n("option",{attrs:{value:"local"}},[t._v("\n                            keep using the data that's been stored locally\n                        ")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("\n                            use any data that's been stored in Firebase, and overwrite what I've stored locally\n                        ")])])]):t._e(),t._v(" "),"firebase"===t.remoteStorageMethodInComponent?n("pre",{staticClass:"w-full"},[n("label",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.firebaseConfigInComponent,expression:"firebaseConfigInComponent"}],staticClass:"p-2 w-full h-48 rounded border text-gray-800 placeholder-gray-600",attrs:{required:"required"},domProps:{value:t.firebaseConfigInComponent},on:{input:function(e){e.target.composing||(t.firebaseConfigInComponent=e.target.value)}}})])]):t._e(),t._v(" "),t.firebaseConfigIsValid?t._e():n("p",[t._v("\n                    Firebase config invalid, it should look like\n                    "),t._m(1)])]):t._e(),t._v(" "),t.remoteStorageMethodInComponent!==t.remoteStorageMethod?n("button",{staticClass:"btn btn--primary",attrs:{type:"button",disabled:!t.canChangeStorageMethod},on:{click:t.changeStorageMethod}},[t._v("\n                Change storage method\n            ")]):t._e()])]),t._v(" "),n("div",{staticClass:"setting"},[n("label",[t._v("\n            When I already have a post open in the viewer, and I click on a second one, the second one should\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.canOpenMultiplePosts,expression:"canOpenMultiplePosts"}],staticClass:"text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.canOpenMultiplePosts=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:!0}},[t._v("\n                    be opened as well\n                ")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("\n                    replace the already-open one\n                ")])])])]),t._v(" "),n("div",{staticClass:"setting"},[n("label",{staticClass:"block"},[t._v("\n            The viewer should be oriented like this\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.graphAndPostsDirection,expression:"graphAndPostsDirection"}],staticClass:"mb-2 text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.graphAndPostsDirection=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"horizontal"}},[t._v("→")]),t._v(" "),n("option",{attrs:{value:"vertical"}},[t._v("↓")])])]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            The graph should take up\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.graphHeight,expression:"graphHeight",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16  rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.graphHeight},on:{input:function(e){e.target.composing||(t.graphHeight=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's height\n        ")]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            The post-bar should take up\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.postBarHeight,expression:"postBarHeight",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16  rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.postBarHeight},on:{input:function(e){e.target.composing||(t.postBarHeight=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's height\n        ")]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            Each post should take up at least\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.postWidth,expression:"postWidth",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16 rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.postWidth},on:{input:function(e){e.target.composing||(t.postWidth=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's width\n        ")]),t._v(" "),n("div",{staticClass:"p-1 h-64 w-64 flex overflow-auto border border-solid border-gray-600",class:"horizontal"===t.graphAndPostsDirection?"flex-row":"flex-col"},[n("div",{staticClass:"p-1 w-full border border-solid border-gray-600",style:{"min-height":t.graphHeight+"%"}},[t._v("\n                Graph\n            ")]),t._v(" "),n("div",{staticClass:"p-1 w-full border border-solid border-gray-600 flex items-start overflow-x-auto",class:{"mt-1":"vertical"===t.graphAndPostsDirection,"ml-1":"horizontal"===t.graphAndPostsDirection},style:{"min-height":t.postBarHeight+"%"}},[n("div",{staticClass:"mt-1 mr-1 mb-1 p-1 border border-solid border-gray-600 text-xs",style:{"min-width":t.postWidth+"%"}},[t._v("\n                    Post\n                ")]),t._v(" "),n("div",{staticClass:"m-1 p-1 border border-solid border-gray-600 text-xs",style:{"min-width":t.postWidth+"%"}},[t._v("\n                    Post\n                ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{staticClass:"inline bg-red-700 text-white p-1"},[e("code",[this._v('{"apiKey":"xyz",..}')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",{staticClass:"whitespace-pre-wrap bg-red-700 text-white p-1"},[this._v('{"apiKey":"xx","authDomain":"x.firebaseapp.com","databaseURL":"https://x.firebaseio.com","projectId":"spiderweb-e49bd","storageBucket":"x.appspot.com","messagingSenderId":"123","appId":"xyz"}')])])}],!1,null,"0c1c566e",null).exports},data:function(){return{currentTab:"viewer",tabs:[{key:"viewer",name:"Viewer"},{key:"graphs",name:"Graphs"},{key:"load-save",name:"Load/save"},{key:"settings",name:"Settings"}]}},computed:wt({},Object(u.e)(["loadingApp","failedToLoadData"])),methods:wt({},Object(u.b)(["loadStateFromStorage"]),{},Object(u.b)("settingsModule",["setRemoteStorageMethod"]),{refreshPage:function(){window.location.reload()},switchToLoadingDataFromLocalStorage:(xt=c()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setRemoteStorageMethod({remoteStorageMethod:"none",shouldTakeDataFrom:"local"});case 2:return t.next=4,this.loadStateFromStorage();case 4:case"end":return t.stop()}}),t,this)}))),function(){return xt.apply(this,arguments)})})};n("cQci");function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var jt,It={name:"OfflineRoot",components:{OfflineApp:Object(y.a)(Mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.loadingApp?n("div",{staticClass:"px-4 md:px-8"},[t._v("\n        loading..\n\n        "),t.failedToLoadData?n("div",{staticClass:"mt-4"},[n("p",{staticClass:"text-red font-bold"},[t._v("\n                Couldn't load data from Firebase\n            ")]),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.refreshPage}},[t._v("\n                Refresh\n            ")]),t._v(" "),n("button",{staticClass:"btn btn--secondary",attrs:{type:"button"},on:{click:t.switchToLoadingDataFromLocalStorage}},[t._v("\n                Load data from Local Storage instead\n            ")]),t._v(" "),n("sub",{staticClass:"my-2 text-xs text-gray-500"},[t._v("\n                (any data stored in Firebase will still be there)\n            ")])]):t._e()]):[n("nav",{staticClass:"flex flex-wrap",staticStyle:{"border-bottom":"5px solid var(--red)"}},t._l(t.tabs,(function(e){return n("button",{key:e.key,staticClass:"optionBtn flex-grow",class:{"optionBtn--selected":t.currentTab===e.key},on:{click:function(n){t.currentTab=e.key}}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0),t._v(" "),n("div",{staticClass:"min-h-full py-4 px-4 md:px-8 componentContainer"},[n(t.currentTab,{tag:"component"})],1)]],2)}),[],!1,null,"9d83bff2",null).exports},mounted:(jt=c()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadStateFromStorage();case 2:case"end":return t.stop()}}),t,this)}))),function(){return jt.apply(this,arguments)}),methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.b)(["loadStateFromStorage"]))},Pt=Object(y.a)(It,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-full"},[e("OfflineApp",{staticClass:"w-full h-full"})],1)}),[],!1,null,null,null).exports;function Ct(t){return Number.isInteger(t)||function(t){if(RegExp(/^0+$/).test(t))return!0;var e=t.replace(/^0+/,""),n=Math.floor(Number(e));return n!==1/0&&String(n)===e&&n>=0}(t)}function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function St(t,e,n){var r=e.shift();t[r]||o.a.set(t,r,{}),e.length?St(t[r],e,n):n&&"object"===bt()(n)&&!Array.isArray(n)?t[r]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t[r],{},n):t[r]=n}var Dt,Nt={state:{shouldAutosave:!0,remoteStorageMethod:"none",canOpenMultiplePosts:!0,graphAndPostsDirection:"vertical",graphHeight:66,postBarHeight:66,postWidth:50},getters:{},mutations:{setState:function(t,e){0!==Object.keys(e).length&&(t.shouldAutosave=e.shouldAutosave||!0,t.canOpenMultiplePosts=e.canOpenMultiplePosts||!0,t.remoteStorageMethod=e.remoteStorageMethod||"none",t.graphAndPostsDirection=e.graphAndPostsDirection||"vertical",t.graphHeight=e.graphHeight||66,t.postBarHeight=e.postBarHeight||66,t.postWidth=e.postWidth||50)},setShouldAutosave:function(t,e){t.shouldAutosave=e},setRemoteStorageMethod:function(t,e){console.log("setting remoteStorageMethod to",e),St(t,["remoteStorageMethod"],e)},setCanOpenMultiplePosts:function(t,e){t.canOpenMultiplePosts=e},setGraphAndPostsDirection:function(t,e){t.graphAndPostsDirection=e},setGraphHeight:function(t,e){!Ct(e)||e>100||(t.graphHeight=e)},setPostBarHeight:function(t,e){!Ct(e)||e>100||(t.postBarHeight=e)},setPostWidth:function(t,e){!Ct(e)||e>100||(t.postWidth=e)}},actions:{setRemoteStorageMethod:function(t,e){var n=e.remoteStorageMethod,o=e.shouldTakeDataFrom,r="none"!==n;t.commit("setRemoteStorageMethod",n),r&&t.dispatch("loadDataFrom",o,{root:!0})}},namespaced:!0},Lt={state:{firebaseConfig:{apiKey:"",authDomain:"xxx.firebaseapp.com",databaseURL:"https://xxx.firebaseio.com",projectId:"xxx",storageBucket:"xxx.appspot.com",messagingSenderId:"123",appId:"456"}},getters:{},mutations:{setState:function(t,e){0!==Object.keys(e).length&&(t.firebaseConfig=e.firebaseConfig||{apiKey:"",authDomain:"xxx.firebaseapp.com",databaseURL:"https://xxx.firebaseio.com",projectId:"xxx",storageBucket:"xxx.appspot.com",messagingSenderId:"123",appId:"456"})},setFirebaseConfig:function(t,e){t.firebaseConfig=e}},actions:{setFirebaseConfig:(Dt=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n.apiKey){t.next=2;break}throw new Error("firebase config is wrong, please check it");case 2:return e.commit("setFirebaseConfig",n),t.next=5,e.dispatch("loadStateFromStorage",null,{root:!0});case 5:case"end":return t.stop()}}),t)}))),function(t,e){return Dt.apply(this,arguments)})},namespaced:!0},At=n("J4zp"),Et=n.n(At),Gt=n("RIqP"),zt=n.n(Gt);function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ut,Qt,$t,Ht,Yt={posts:{},links:{},graphs:{1:{id:1,name:"default",nodes:[],colour:"black"}},selectedPostIds:[],selectedGraphIds:[1]},Rt={graphNames:function(t){return Object.values(t.graphs).map((function(t){return t.name}))},postIdsInSelectedGraphs:function(t){var e=[],n=!0,o=!1,r=void 0;try{for(var s,a=t.selectedGraphIds[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var i=s.value;e=e.concat(t.graphs[i].nodes)}}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return zt()(new Set(e))},postsInSelectedGraphs:function(t,e){return e.postIdsInSelectedGraphs.map((function(e){return t.posts[e]}))},linksInSelectedGraphs:function(t){return Object.values(t.links).filter((function(e){return t.selectedGraphIds.includes(e.graph)}))},graphColour:function(t){return function(e){return t.graphs[e].colour||function(t){for(var e=0,n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);for(var o="#",r=0;r<3;r++){o+=("00"+(e>>8*r&255).toString(16)).substr(-2)}return o}("".concat(String(e),"salt and pepper are good for hashes"))}},postIds:function(t){return Object.keys(t.posts).map((function(t){return parseInt(t,10)}))},unlinkedPosts:function(t){for(var e=[],n=0,o=Object.values(t.graphs);n<o.length;n++){var r=o[n];e=e.concat(r.nodes)}var s=zt()(new Set(e));return Object.keys(t.posts).map((function(t){return parseInt(t,10)})).filter((function(t){return!s.includes(t)})).map((function(e){return t.posts[e]}))},titleOrBody:function(t){return function(e){var n=t.posts[e],o=n.title.length>0?n.title:n.body.split("\n")[0];return o.length>30?o.substr(0,30)+"..":o}},neighbourIndex:function(t,e){var n={};return e.linksInSelectedGraphs.forEach((function(t){var e=Math.min(t.source,t.target),o=Math.max(t.source,t.target);n[e+","+o]=1})),n},isNeighbour:function(t,e){return function(t,n){var o=Math.min(t.id,n.id),r=Math.max(t.id,n.id);return void 0!==e.neighbourIndex[o+","+r]}},postIdsThatLinkToPost:function(t){return function(e){var n={},o={};return Object.values(t.links).forEach((function(t){t.source===e?n[t.id]=t.target:t.target===e&&(o[t.id]=t.source)})),{from:n,to:o}}},graphIdsThatIncludeThisPost:function(t){return function(e){for(var n=[],o=0,r=Object.values(t.graphs);o<r.length;o++){var s=r[o];s.nodes.includes(e)&&n.push(s.id)}return n}}},Zt={setState:function(t,e){0!==Object.keys(e).length&&0!==Object.keys(e.posts).length&&0!==Object.keys(e.links).length&&(t.posts=e.posts,t.links=e.links,t.graphs=e.graphs,t.selectedPostIds=e.selectedPostIds,t.selectedGraphIds=e.selectedGraphIds)},setSelectedPostIds:function(t,e){t.selectedPostIds=e},selectPostId:function(t,e){var n=e.id,o=e.canOpenMultiplePosts;t.selectedPostIds.includes(n)&&t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1),o?t.selectedPostIds.unshift(n):t.selectedPostIds=[n]},unselectPostId:function(t,e){t.selectedPostIds.splice(t.selectedPostIds.indexOf(e),1)},togglePostId:function(t,e){var n=e.id,o=e.canOpenMultiplePosts;t.selectedPostIds.includes(n)?t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1):o?t.selectedPostIds.unshift(n):t.selectedPostIds=[n]},setSelectedGraphIds:function(t,e){t.selectedGraphIds=e},selectGraphId:function(t,e){t.selectedGraphIds.includes(e)||t.selectedGraphIds.push(e)},toggleGraphId:function(t,e){t.selectedGraphIds.includes(e)?t.selectedGraphIds.splice(t.selectedGraphIds.indexOf(e),1):t.selectedGraphIds.push(e)},makeNewGraph:function(t,e){if(0!==e.trim().length)if(Object.values(t.graphs).map((function(t){return t.name})).includes(e))alert("You're trying to add a graph that already exists, choose a different name");else{var n=Object.keys(t.graphs),r=(0===n.length?0:Math.max.apply(Math,zt()(n.map((function(t){return parseInt(t,10)})))))+1;o.a.set(t.graphs,r,{id:r,name:e,nodes:[]})}},changeGraphName:function(t,e){var n=e.graphId,o=e.newGraphName;t.graphs[n].name=o},removeGraph:function(t,e){var n=t.selectedGraphIds.filter((function(t){return t!==parseInt(e,10)}));t.selectedGraphIds=0===n.length?[1]:n,o.a.delete(t.graphs,e)},addPostToGraph:function(t,e){var n=e.graphId,o=e.postId;t.graphs[n].nodes.push(o)},removePostFromGraph:function(t,e){for(var n=e.graphId,r=e.postId,s={},a=0,i=Object.values(t.links);a<i.length;a++){var l=i[a],c=l.graph===parseInt(n,10),u=l.source===r||l.target===r;c&&u||(s[l.id]=l)}o.a.set(t,"links",s),o.a.set(t.graphs[n],"nodes",t.graphs[n].nodes.filter((function(t){return t!==r})))},addPost:function(t,e){return o.a.set(t.posts,e.id,e),e},updatePost:function(t,e){o.a.set(t.posts,e.id,e)},removePost:function(t,e){var n=e.id;t.selectedPostIds.includes(n)&&t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1);for(var r={},s=0,a=Object.values(t.links);s<a.length;s++){var i=a[s];i.source!==n&&i.target!==n&&(r[i.id]=i)}for(var l=0,c=Object.entries(t.graphs);l<c.length;l++){var u=Et()(c[l],2),p=u[0],d=u[1],h=Ft({},d,{nodes:d.nodes.filter((function(t){return t!==n}))});o.a.set(t.graphs,p,h)}o.a.set(t,"links",r),o.a.delete(t.posts,n)},addLink:function(t,e){var n=e.source,r=e.target,s=e.graph,a=e.type,i=void 0===a?"reply":a,l=Object.keys(t.links),c=(0===l.length?0:Math.max.apply(Math,zt()(l.map((function(t){return parseInt(t,10)})))))+1;if(Object.values(t.links).filter((function(t){return t.graph===s&&t.source===n&&t.target===r&&t.type===i})).length>0)alert("This link already exists");else{var u=t.graphs[s].nodes;u.includes(n)||t.graphs[s].nodes.push(n),u.includes(r)||t.graphs[s].nodes.push(r),o.a.set(t.links,c,{id:c,graph:s,source:n,target:r,type:i})}},updateLink:function(t,e){var n=t.graphs[e.graph].nodes;n.includes(e.source)||t.graphs[e.graph].nodes.push(e.source),n.includes(e.target)||t.graphs[e.graph].nodes.push(e.target),o.a.set(t.links,e.id,e)},removeLink:function(t,e){var n=e.id;o.a.delete(t.links,n)}},Wt={makeNewPost:(Qt=c()(i.a.mark((function t(e,n){var o,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object.keys(Yt.posts),r=0===o.length?0:Math.max.apply(Math,zt()(o.map((function(t){return parseInt(t,10)})))),s=r+1,n.id=s,e.commit("addPost",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),function(t,e){return Qt.apply(this,arguments)}),replyToPost:(Ut=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postId,n.newPost;case 1:case"end":return t.stop()}}),t)}))),function(t,e){return Ut.apply(this,arguments)})},Jt={state:Yt,getters:Rt,mutations:Zt,actions:Wt,namespaced:!0},Vt={state:{showClickButtonMenu:!1,clickMode:"openPosts",newLinkSource:null,newLinkTarget:null,newLinkGraphId:1,newLinkType:"reply",linkToEdit:null},getters:{},mutations:{setShowClickButtonMenu:function(t,e){t.showClickButtonMenu=e,e||(t.newLinkSource=null,t.newLinkTarget=null,t.newLinkGraphId=1,t.newLinkType="reply",t.linkToEdit=null)},setClickMode:function(t,e){t.clickMode=e},setNewLinkSource:function(t,e){t.newLinkSource=e},setNewLinkTarget:function(t,e){t.newLinkTarget=e},setNewLinkGraphId:function(t,e){t.newLinkGraphId=e},setNewLinkType:function(t,e){t.newLinkType=e},setLinkToEdit:function(t,e){t.linkToEdit=e}},actions:{handlePostClick:(Ht=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===bt()(n)){t.next=3;break}return console.error("no post clicked, clicked",n),t.abrupt("return");case 3:t.t0=e.state.clickMode,t.next="openPosts"===t.t0?6:"addLink"===t.t0?8:"changeLink"===t.t0?22:6;break;case 6:return e.commit("postsModule/selectPostId",{id:n.id,canOpenMultiplePosts:e.rootState.settingsModule.canOpenMultiplePosts},{root:!0}),t.abrupt("break",23);case 8:if(null!==e.state.newLinkSource){t.next=13;break}return e.commit("setNewLinkSource",n.id),t.abrupt("break",23);case 13:if(e.state.newLinkSource!==n.id){t.next=16;break}return alert("A post can't be linked to itself"),t.abrupt("return");case 16:return e.commit("setNewLinkTarget",n.id),e.commit("postsModule/addLink",{source:e.state.newLinkSource,target:e.state.newLinkTarget,graph:e.state.newLinkGraphId,type:e.state.newLinkType},{root:!0}),e.commit("setClickMode","openPosts"),e.commit("setNewLinkSource",null),e.commit("setNewLinkTarget",null),t.abrupt("break",23);case 22:return t.abrupt("return");case 23:case"end":return t.stop()}}),t)}))),function(t,e){return Ht.apply(this,arguments)}),handleLinkClick:($t=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),"object"===bt()(n)){t.next=4;break}return console.error("no link clicked, clicked",n),t.abrupt("return");case 4:t.t0=e.state.clickMode,t.next="changeLink"===t.t0?7:9;break;case 7:return e.commit("setLinkToEdit",n.id),t.abrupt("break",10);case 9:return t.abrupt("return");case 10:case"end":return t.stop()}}),t)}))),function(t,e){return $t.apply(this,arguments)})},namespaced:!0},qt=n("Wcq6"),Kt=(n("Zs65"),function(t){if(""===t.apiKey)throw new Error("firebase config is wrong, please check it: "+JSON.stringify(t));return qt.apps.length||qt.initializeApp(t),qt.database()});o.a.use(u.a);var Xt,te,ee,ne,oe,re,se=new u.a.Store({strict:!1,modules:{settingsModule:Nt,firebaseModule:Lt,postsModule:Jt,clickerModule:Vt},state:{loadingApp:!0,failedToLoadData:!1},getters:{storageObject:function(t){return{postsModule:t.postsModule,settingsModule:t.settingsModule,firebaseModule:t.firebaseModule}}},mutations:{setLoadingApp:function(t,e){t.loadingApp=e},setFailedToLoadData:function(t,e){t.failedToLoadData=e}},actions:{saveStateToLocalStorage:(re=c()(i.a.mark((function t(e){var n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getters.storageObject,o=JSON.stringify(n),localStorage.setItem("offlineState",o);case 3:case"end":return t.stop()}}),t)}))),function(t){return re.apply(this,arguments)}),saveStateToStorage:(oe=c()(i.a.mark((function t(e){var n,o,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getters.storageObject,o=JSON.stringify(n),localStorage.setItem("offlineState",o),r=e.state.settingsModule.remoteStorageMethod,t.t0=r,t.next="firebase"===t.t0?7:10;break;case 7:return Kt(e.state.firebaseModule.firebaseConfig).ref("offlineState").set(o),t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)}))),function(t){return oe.apply(this,arguments)}),loadStateFromStorage:(ne=c()(i.a.mark((function t(e){var n,o,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=JSON.parse(localStorage.getItem("offlineState")))){t.next=4;break}return e.commit("setLoadingApp",!1),t.abrupt("return");case 4:o=n.settingsModule.remoteStorageMethod,console.log("remoteStorageMethod:",o),t.t0=o,t.next="firebase"===t.t0?9:(t.t0,23);break;case 9:t.prev=9,r=!1,Kt(n.firebaseModule.firebaseConfig).ref("offlineState").once("value").then((function(t){var n=JSON.parse(t.val());null!==n?(e.dispatch("importState",n),r=!0,e.commit("setLoadingApp",!1)):e.commit("setFailedToLoadData",!0)})).catch((function(t){console.log(t),alert("There was an error loading the state from Firebase, please refresh the page/change your Firebase config in 'settings', and try again")})),setTimeout((function(){r||e.commit("setFailedToLoadData",!0)}),5e3),t.next=22;break;case 16:return t.prev=16,t.t1=t.catch(9),e.commit("settingsModule/setRemoteStorageMethod","none",{root:!0}),e.commit("setLoadingApp",!1),alert(t.t1),t.abrupt("return");case 22:return t.abrupt("break",26);case 23:return e.dispatch("importState",n),e.commit("setLoadingApp",!1),t.abrupt("break",26);case 26:case"end":return t.stop()}}),t,null,[[9,16]])}))),function(t){return ne.apply(this,arguments)}),loadDataFrom:(ee=c()(i.a.mark((function t(e,n){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="local"===t.t0?3:"firebase"===t.t0?8:12;break;case 3:if(null!=(o=JSON.parse(localStorage.getItem("offlineState")))){t.next=6;break}return t.abrupt("return");case 6:return e.dispatch("importData",o),t.abrupt("break",13);case 8:return e.commit("setLoadingApp",!0),Kt(e.state.firebaseModule.firebaseConfig).ref("offlineState").once("value").then((function(t){var n=JSON.parse(t.val());null!==n&&e.dispatch("importData",n)})).catch((function(t){console.log(t),alert("There was an error loading the data from Firebase, please refresh the page/change your Firebase config in 'settings', and try again")})).finally((function(){e.commit("setLoadingApp",!1)})),t.abrupt("break",13);case 12:return t.abrupt("break",13);case 13:case"end":return t.stop()}}),t)}))),function(t,e){return ee.apply(this,arguments)}),importState:function(){var t=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postsModule&&e.commit("postsModule/setState",n.postsModule),n.settingsModule&&e.commit("settingsModule/setState",n.settingsModule),n.firebaseModule&&e.commit("firebaseModule/setState",n.firebaseModule);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),importData:(te=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postsModule&&e.commit("postsModule/setState",n.postsModule);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return te.apply(this,arguments)}),importSettings:(Xt=c()(i.a.mark((function t(e,n){var o,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.storageObject,r=n.shouldTakeDataFrom,s=e.state.settingsModule.remoteStorageMethod!==o.settingsModule.remoteStorageMethod,o.settingsModule&&e.commit("settingsModule/setState",o.settingsModule),o.firebaseModule&&e.commit("firebaseModule/setState",o.firebaseModule),s&&e.dispatch("loadDataFrom",r);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return Xt.apply(this,arguments)})}});se.subscribe((function(t,e){var n=e.settingsModule.shouldAutosave&&!["setLoadingApp","setFailedToLoadData"].includes(t.type)&&!t.type.endsWith("/setState")&&!t.type.startsWith("clickerModule/");if(console.log(t.type),n){var o={postsModule:e.postsModule,settingsModule:e.settingsModule,firebaseModule:e.firebaseModule},r=JSON.stringify(o);if(console.log("autosaving, mutation is",t.type),localStorage.setItem("offlineState",r),"firebase"===e.settingsModule.remoteStorageMethod)Kt(e.firebaseModule.firebaseConfig).ref("offlineState").set(r)}}));var ae=se;new o.a({store:ae,el:"#offlineGraphApp",components:{OfflineRoot:Pt},template:"<OfflineRoot/>"})},BKTg:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.componentContainer[data-v-9d83bff2] {\n    background-color: #eee;\n    color: #333;\n}\n",""])},Ebcv:function(t,e,n){var o=n("k1XQ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("35d698a0",o,!0,{})},FbAF:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.actionsContainer[data-v-63d36f1e] {\n    padding: 1rem 1rem 0 1rem;\n\n    background-color: #eeeeee;\n    color: #333;\n}\n",""])},GbnV:function(t,e,n){"use strict";var o=n("3Z06");n.n(o).a},H2ud:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.setting[data-v-0c1c566e] {\n    padding: 1rem 2rem;\n\n    background-color: white;\n    border-radius: 1rem;\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n.setting[data-v-0c1c566e]:not(:last-of-type) {\n    margin-bottom: 2rem;\n}\n",""])},"KAC/":function(t,e,n){var o=n("BKTg");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("50f0f86e",o,!0,{})},LaNS:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,'\n.clicker[data-v-3eb45b8e] {\n    position: absolute;\n    bottom: 5%;\n    right: 0;\n}\n.clicker__button[data-v-3eb45b8e] {\n    border-radius: 9999px;\n\n    background: var(--red);\n    color: var(--white);\n    cursor: pointer;\n\n    width: 40px;\n    height: 40px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.clicker__container[data-v-3eb45b8e] {\n    position: absolute;\n    bottom: 100%;\n    right: 0;\n\n    display: flex;\n    flex-direction: column-reverse;\n    align-items: flex-end;\n\n    background-color: #f7f7f7e6;\n    border-radius: 10px;\n    max-width: 85vw;\n}\n.clicker__actionButtons[data-v-3eb45b8e] {\n    padding: 10px;\n    margin-bottom: 10px;\n    max-width: 100%;\n}\n.clicker__actionButton[data-v-3eb45b8e] {\n    display: flex;\n    border: 1px solid var(--red);\n    padding: 0.5rem 0.75rem;\n    border-radius: 2rem;\n    white-space: nowrap;\n    transition: all 0.3s ease;\n}\n.clicker__actionButton[data-v-3eb45b8e]:hover,\n.clicker__actionButton[data-v-3eb45b8e]:focus,\n.clicker__actionButton[data-v-3eb45b8e]:active {\n    background-color: #e8e8e8;\n}\n.clicker__actionButton[data-v-3eb45b8e]:not(:last-of-type) {\n    margin-bottom: 1rem;\n}\n.linkIcon[data-v-3eb45b8e] {\n    display: inline-block;\n    width: 28px;\n    height: 20px;\n\n    background: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTEuNDgyIDYuNTE3MThDMTMuNTgyNSA4LjYxOTg0IDEzLjU1MzYgMTEuOTkwOSAxMS40OTQ2IDE0LjA2MTRDMTEuNDkwOCAxNC4wNjU2IDExLjQ4NjIgMTQuMDcwMiAxMS40ODIgMTQuMDc0NEw5LjExOTQ4IDE2LjQzNjlDNy4wMzU3NyAxOC41MjA2IDMuNjQ1NjkgMTguNTIwMyAxLjU2MjMgMTYuNDM2OUMtMC41MjE0MTYgMTQuMzUzNSAtMC41MjE0MTYgMTAuOTYzIDEuNTYyMyA4Ljg3OTY4TDIuODY2OCA3LjU3NTE4QzMuMjEyNzQgNy4yMjkyNCAzLjgwODUgNy40NTkxNiAzLjgyNjM2IDcuOTQ4MDRDMy44NDkxNCA4LjU3MTA4IDMuOTYwODcgOS4xOTcwNCA0LjE2NzAyIDkuODAxNTJDNC4yMzY4NCAxMC4wMDYyIDQuMTg2OTYgMTAuMjMyNiA0LjAzNDAzIDEwLjM4NTVMMy41NzM5NCAxMC44NDU2QzIuNTg4NjUgMTEuODMwOSAyLjU1Nzc0IDEzLjQzNTIgMy41MzMzMyAxNC40MzAyQzQuNTE4NTUgMTUuNDM0OSA2LjEzNzkyIDE1LjQ0MDkgNy4xMzA2OSAxNC40NDgxTDkuNDkzMTkgMTIuMDg1OUMxMC40ODQzIDExLjA5NDggMTAuNDgwMSA5LjQ5MjkyIDkuNDkzMTkgOC41MDU5N0M5LjM2MzA4IDguMzc2MTEgOS4yMzIwMiA4LjI3NTIxIDkuMTI5NjQgOC4yMDQ3MkM5LjA1NzIyIDguMTU0OTkgOC45OTc0MiA4LjA4OTAxIDguOTU1MDIgOC4wMTIwN0M4LjkxMjYxIDcuOTM1MTIgOC44ODg3OCA3Ljg0OTMzIDguODg1NDEgNy43NjE1NEM4Ljg3MTQ5IDcuMzkwMDQgOS4wMDMxMiA3LjAwNzIzIDkuMjk2NjcgNi43MTM2N0wxMC4wMzY5IDUuOTczNDZDMTAuMjMwOSA1Ljc3OTM2IDEwLjUzNTQgNS43NTU1MiAxMC43NjA1IDUuOTEyNkMxMS4wMTgzIDYuMDkyNTggMTEuMjU5NyA2LjI5NDg5IDExLjQ4MiA2LjUxNzE4VjYuNTE3MThaTTE2LjQzNjcgMS41NjIxOUMxNC4zNTMzIC0wLjUyMTI0IDEwLjk2MzMgLTAuNTIxNTIyIDguODc5NTQgMS41NjIxOUw2LjUxNzA0IDMuOTI0NjlDNi41MTI4MiAzLjkyODkxIDYuNTA4MjUgMy45MzM0OCA2LjUwNDM5IDMuOTM3N0M0LjQ0NTQyIDYuMDA4MTIgNC40MTY1NiA5LjM3OTIyIDYuNTE3MDQgMTEuNDgxOUM2LjczOTMzIDExLjcwNDIgNi45ODA3NCAxMS45MDY1IDcuMjM4NDggMTIuMDg2NEM3LjQ2MzU1IDEyLjI0MzUgNy43NjgwOCAxMi4yMTk2IDcuOTYyMTQgMTIuMDI1Nkw4LjcwMjMyIDExLjI4NTRDOC45OTU4OCAxMC45OTE4IDkuMTI3NSAxMC42MDkgOS4xMTM1OCAxMC4yMzc1QzkuMTEwMjEgMTAuMTQ5NyA5LjA4NjM4IDEwLjA2MzkgOS4wNDM5OCA5Ljk4Njk2QzkuMDAxNTcgOS45MTAwMSA4Ljk0MTc3IDkuODQ0MDQgOC44NjkzNSA5Ljc5NDMxQzguNzY2OTcgOS43MjM4MiA4LjYzNTkxIDkuNjIyOTIgOC41MDU4IDkuNDkzMDZDNy41MTg4NiA4LjUwNjExIDcuNTE0NzEgNi45MDQxOCA4LjUwNTggNS45MTMwOUwxMC44NjgzIDMuNTUwOTRDMTEuODYxMSAyLjU1ODE3IDEzLjQ4MDQgMi41NjQxNCAxNC40NjU3IDMuNTY4ODdDMTUuNDQxMiA0LjU2MzggMTUuNDEwNCA2LjE2ODEyIDE0LjQyNTEgNy4xNTM0MUwxMy45NjUgNy42MTM1QzEzLjgxMiA3Ljc2NjQzIDEzLjc2MjEgNy45OTI4MyAxMy44MzIgOC4xOTc1MUMxNC4wMzgxIDguODAxOTkgMTQuMTQ5OSA5LjQyNzk1IDE0LjE3MjYgMTAuMDUxQzE0LjE5MDUgMTAuNTM5OSAxNC43ODYzIDEwLjc2OTggMTUuMTMyMiAxMC40MjM5TDE2LjQzNjcgOS4xMTkzNEMxOC41MjA0IDcuMDM2MDIgMTguNTIwNCAzLjY0NTU1IDE2LjQzNjcgMS41NjIxOVYxLjU2MjE5WiIgZmlsbD0iY3VycmVudENvbG9yIiBmaWxsLW9wYWNpdHk9IjAuMjUiLz48L3N2Zz4=") no-repeat left;\n    background-size: contain;\n}\n.clicker__contextMenu[data-v-3eb45b8e] {\n    border-radius: 10px;\n    padding: 15px;\n    margin-bottom: 10px;\n    max-width: 100%;\n\n    background-color: white;\n    border: 1px solid var(--red);\n    color: #333;\n}\n',""])},Quxa:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,'\n.post[data-v-1fe818fb] {\n    background: white;\n\n    overflow-y: auto;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n}\n@media (max-width: 768px) {\n.post[data-v-1fe818fb] {\n        min-width: 92% !important;\n}\n}\n.post__dragHandle[data-v-1fe818fb] {\n    cursor: grab;\n}\n.focusButton[data-v-1fe818fb] {\n    cursor: crosshair;\n}\n.bottomLink[data-v-1fe818fb] {\n    font-size: .75rem;\n}\n.bottomLink--unselected[data-v-1fe818fb] {\n    color: #a0aec0;\n}\n.bottomLink--selected[data-v-1fe818fb] {\n    color: #2d3748;\n}\n.bottomLink[data-v-1fe818fb]:hover {\n     color: #2d3748;\n}\n.bottomLink[data-v-1fe818fb]:not(:last-of-type):after {\n    content: "⋅"\n}\n',""])},SViF:function(t,e,n){"use strict";var o=n("1F4C");n.n(o).a},TycU:function(t,e,n){"use strict";var o=n("Ebcv");n.n(o).a},Ugez:function(t,e,n){var o=n("axGT");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("483e11df",o,!0,{})},W1TW:function(t,e,n){"use strict";var o=n("6T9c");n.n(o).a},XhxE:function(t,e,n){"use strict";var o=n("kHq5");n.n(o).a},axGT:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n:root {\n    --node-text-size: 48px;\n    --link-stroke-width: 20px;\n}\n#graphSvg {\n    min-width: 33%;\n}\n.graph__link {\n    fill: none;\n    stroke-width: var(--link-stroke-width);\n    cursor: pointer;\n}\n.node__circle {\n    fill: #353535;\n    stroke: none;\n    cursor: pointer;\n}\n.node__text {\n    cursor: pointer;\n    text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;\n    fill: #333333;\n\n    font-size: var(--node-text-size);\n    font-weight: bold;\n    stroke-width: 0;\n}\n",""])},cQci:function(t,e,n){"use strict";var o=n("KAC/");n.n(o).a},hZnF:function(t,e,n){"use strict";var o=n("Ugez");n.n(o).a},j1RZ:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,'\n.postBar {\n    min-width: 33%;\n    background: #eeeeee url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAR0lEQVQYlYWPuw0AQAhC2X9AY+UOTOBVNH7OgkQpHgDzSJJpHk3ySSZ0SPWXsBFqUiNuZGyEmoSNMBJ/a09i9ceOU1dca/U/VPFxnYht7pgAAAAASUVORK5CYII=");\n}\n',""])},k1XQ:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.textareaBody[data-v-4a313601] {\n    min-height: 75px;\n    max-height: 50%;\n}\n",""])},kHq5:function(t,e,n){var o=n("Quxa");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("244cc946",o,!0,{})},s1UG:function(t,e,n){var o=n("j1RZ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("71231a00",o,!0,{})}});
//# sourceMappingURL=graph-951bea0d9f25013ed66e.js.map