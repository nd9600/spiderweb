!function(t){function e(e){for(var o,a,i=e[0],c=e[1],l=e[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(u&&u(e);d.length;)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={0:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push(["88xZ",1]),n()}({"0NGO":function(t,e,n){var o=n("15cm");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("ebc68cb0",o,!0,{})},"0Rwe":function(t,e,n){var o=n("QH2O");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("4f41384e",o,!0,{})},"15cm":function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.componentContainer[data-v-af9fea68] {\n    background-color: #eee;\n    color: #333;\n}\n",""])},"3fMe":function(t,e,n){"use strict";var o=n("s1UG");n.n(o).a},"88xZ":function(t,e,n){"use strict";n.r(e);var o=n("oCYn"),s=n("lSNA"),r=n.n(s),a=n("o0o1"),i=n.n(a),c=n("yXPU"),l=n.n(c),u=n("L2JU"),p=n("VphZ"),d=n("9/5/"),h=n.n(d);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var g={name:"PostSearch",data:function(){return{searchTerm:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)("postsModule",["posts"]),{},Object(u.c)("postsModule",["titleOrBody","postIdsThatLinkToPost"]),{searchResults:function(){var t=this.searchTerm.trim().toLowerCase();return 0===t.length?[]:Object.values(this.posts).filter((function(e){return e.title.toLowerCase().includes(t)||e.body.toLowerCase().includes(t)})).sort((function(t,e){var n=t.title.length>0?t.title:t.body,o=e.title.length>0?e.title:e.body;return n<o?-1:o<n?1:0})).slice(0,25)}}),mounted:function(){this.$refs.searchInput.focus()}},m=n("KHd+"),b=Object(m.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"searchInput",staticClass:"p-2 w-full input input--primary",attrs:{type:"text",placeholder:"On the Origin of Species",minlength:"0",maxlength:"50",title:"search for a post"},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),t._v(" "),t.searchResults.length>0?n("div",t._l(t.searchResults,(function(e){return n("div",{key:e.id,staticClass:"mt-2 p-1 cursor-pointer bg-red-200 hover:bg-red-300 rounded-lg",on:{click:function(n){return t.$emit("clickedOnResult",e)}}},[e.title.length>0?n("span",{staticClass:"font-bold"},[t._v("\n                "+t._s(e.title)+"\n            ")]):t._e(),t._v(" "),e.body.length>0?n("p",{staticClass:"text-xs"},[t._v("\n                "+t._s(e.body.substr(0,200))+t._s(e.body.length>200?"...":"")+"\n            ")]):t._e()])})),0):t._e()])}),[],!1,null,null,null).exports;function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={name:"LinkEditor",components:{PostSearch:b},props:{link:{type:Object,required:!0}},data:function(){return{graphId:this.link.graph,source:this.link.source,target:this.link.target,type:this.link.type}},computed:y({},Object(u.e)("postsModule",["graphs","posts","selectedGraphNames"]),{},Object(u.c)("postsModule",["postIds","graphNames","titleOrBody"]),{wantsToChangeSource:{get:function(){return this.$store.state.clickerModule.wantsToChangeSource},set:function(t){this.setWantsToChangeSource(t)}},wantsToChangeTarget:{get:function(){return this.$store.state.clickerModule.wantsToChangeTarget},set:function(t){this.setWantsToChangeTarget(t)}}}),watch:{graphId:"updateLinkLocal",source:"updateLinkLocal",target:"updateLinkLocal",type:"updateLinkLocal"},methods:y({},Object(u.d)("postsModule",["updateLink","removeLink"]),{},Object(u.d)("clickerModule",["setWantsToChangeSource","setWantsToChangeTarget"]),{onPostClick:function(t,e){"source"===t?(this.source=e.id,this.wantsToChangeSource=!1):(this.target=e.id,this.wantsToChangeTarget=!1)},updateLinkLocal:function(){this.updateLink({id:this.link.id,graph:this.graphId,source:this.source,target:this.target,type:this.type,updated_at:(new Date).toISOString()}),this.$emit("updatedLink",this.link.id)},removeLinkLocal:function(){this.removeLink({id:this.link.id}),this.$emit("removedLink",this.link.id)}})},k=Object(m.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[t._v("\n        The link is a\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"select select--secondary mb-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                reply\n            ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                sidenote\n            ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                link\n            ")])])]),t._v(" "),n("label",[t._v("\n        in the graph\n        "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"select select--secondary mb-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)]),t._v(" "),n("p",{staticClass:"mt-2 mb-6"},[t._v("\n        from\n        "),t.wantsToChangeSource?n("PostSearch",{staticClass:"ml-2",on:{clickedOnResult:function(e){return t.onPostClick("source",e)}}}):n("span",{staticClass:"text-red"},[t._v("\n            "+t._s(t.titleOrBody(t.source))+"\n        ")]),t._v(" "),n("span",{class:t.wantsToChangeSource?"block":""},[t.wantsToChangeSource?n("sub",{staticClass:"my-2 text-xs text-gray-500"},[t._v("\n                search for a post's title/body, or click on a post\n            ")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn--secondary mt-2 ml-4",attrs:{type:"button"},on:{click:function(e){t.wantsToChangeSource=!t.wantsToChangeSource}}},[t._v("\n                "+t._s(t.wantsToChangeSource?"Cancel":"Change")+"\n            ")])])],1),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"mt-6 mb-10"},[t._v("\n        to\n        "),t.wantsToChangeTarget?n("PostSearch",{staticClass:"ml-2",on:{clickedOnResult:function(e){return t.onPostClick("target",e)}}}):n("span",{staticClass:"text-red"},[t._v("\n            "+t._s(t.titleOrBody(t.target))+"\n        ")]),t._v(" "),n("span",{class:t.wantsToChangeTarget?"block":""},[t.wantsToChangeTarget?n("sub",{staticClass:"my-2 text-xs text-gray-500"},[t._v("\n                search for a post's title/body, or click on a post\n            ")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn--secondary mt-2 ml-4",attrs:{type:"button"},on:{click:function(e){t.wantsToChangeTarget=!t.wantsToChangeTarget}}},[t._v("\n                "+t._s(t.wantsToChangeTarget?"Cancel":"Change")+"\n            ")])])],1),t._v(" "),n("button",{staticClass:"btn btn--secondary mb-4 py-1 px-2 block",on:{click:t.removeLinkLocal}},[t._v("\n        🗑 remove link\n    ")])])}),[],!1,null,null,null).exports;function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M={name:"LinkAdder",components:{PostSearch:b},computed:x({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["titleOrBody"]),{},Object(u.e)("clickerModule",["newLinkSource"]),{newLinkGraphId:{get:function(){return this.$store.state.clickerModule.newLinkGraphId},set:function(t){this.setNewLinkGraphId(t)}},newLinkType:{get:function(){return this.$store.state.clickerModule.newLinkType},set:function(t){this.setNewLinkType(t)}}}),methods:x({},Object(u.d)("clickerModule",["setNewLinkSource","setNewLinkGraphId","setNewLinkType"]),{},Object(u.b)("clickerModule",["handlePostClick"]))},j=Object(m.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{staticClass:"mb-4"},[t._v("\n        The new link will be a\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.newLinkType,expression:"newLinkType"}],staticClass:"select select--secondary mb-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newLinkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                reply\n            ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                sidenote\n            ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                link\n            ")])]),t._v("\n        in the graph\n        "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.newLinkGraphId,expression:"newLinkGraphId",modifiers:{number:!0}}],staticClass:"select select--secondary max-w-full",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.newLinkGraphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,staticClass:"truncate",domProps:{value:o}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)]),t._v(" "),t.newLinkSource?n("label",{staticClass:"mt-4 pt-4 block",staticStyle:{"border-top":"1px solid var(--red)"}},[t._v("\n        It'll be from\n        "),n("span",{staticClass:"inline-block"},[n("span",{staticClass:"text-red"},[t._v(t._s(t.titleOrBody(t.newLinkSource)))]),t._v("\n            →\n        ")]),t._v(" "),n("PostSearch",{staticClass:"ml-2",on:{clickedOnResult:function(e){return t.handlePostClick(e)}}}),t._v(" "),n("div",{staticClass:"my-2 flex justify-between"},[n("p",{staticClass:"text-xs text-gray-500"},[t._v("\n                search for a post's title/body, or click on a post\n            ")]),t._v(" "),n("button",{staticClass:"btn btn--secondary",attrs:{type:"button",disabled:null==t.newLinkSource,title:"remove this source"},on:{click:function(e){return t.setNewLinkSource(null)}}},[t._v("\n                x\n            ")])])],1):t._e()])}),[],!1,null,null,null).exports;function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I,T={name:"PostMaker",props:{shouldShowPostAttacher:{type:Boolean,default:!0}},data:function(){return{showTitleInput:!1,title:"",body:"",graphIdsToAttachNewPostTo:[]}},computed:P({},Object(u.e)("postsModule",["graphs"])),methods:P({},Object(u.d)("postsModule",["addPostToGraph"]),{},Object(u.b)("postsModule",["makeNewPost"]),{toggleTitleInput:function(){this.showTitleInput&&this.title.trim().length>0?this.$refs.inputTitle.focus():this.showTitleInput=!this.showTitleInput},makePost:(I=l()(i.a.mark((function t(){var e,n,o,s,r,a,c,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={title:this.title,body:this.body,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},t.next=3,this.makeNewPost(e);case 3:if(n=t.sent,!(this.graphIdsToAttachNewPostTo.length>0)){t.next=24;break}for(o=!0,s=!1,r=void 0,t.prev=8,a=this.graphIdsToAttachNewPostTo[Symbol.iterator]();!(o=(c=a.next()).done);o=!0)l=c.value,this.addPostToGraph({graphId:l,postId:n.id});t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),s=!0,r=t.t0;case 16:t.prev=16,t.prev=17,o||null==a.return||a.return();case 19:if(t.prev=19,!s){t.next=22;break}throw r;case 22:return t.finish(19);case 23:return t.finish(16);case 24:this.resetNewPost(),this.$emit("madePost",n);case 26:case"end":return t.stop()}}),t,this,[[8,12,16,24],[17,,19,23]])}))),function(){return I.apply(this,arguments)}),resetNewPost:function(){this.title="",this.body="",this.graphIdsToAttachNewPostTo=[]}})},C=(n("q7nX"),Object(m.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"mb-5 flex flex-col"},[n("button",{staticClass:"text-left font-bold underline",on:{click:function(e){return e.preventDefault(),t.toggleTitleInput(e)}}},[t._v("\n            Title\n        ")]),t._v(" "),t.showTitleInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"inputTitle",staticClass:"p-2 rounded border text-gray-800 placeholder-gray-600",attrs:{type:"text",placeholder:"On the Origin of Species",minlength:"0",maxlength:"1000"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}):t._e()]),t._v(" "),n("label",{staticClass:"mb-5 flex flex-col"},[n("span",{staticClass:"font-bold"},[t._v("Body")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body,expression:"body"}],staticClass:"p-2 h-48 rounded border text-gray-800 placeholder-gray-600 textareaBody",attrs:{placeholder:"[Markdown] But with regard to the material world, we can at least go so far as this—we can perceive that events are brought about not by insulated interpositions of Divine power, exerted in each particular case, but by the establishment of general laws",required:"required",minlength:"1",maxlength:"10000"},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})]),t._v(" "),t.shouldShowPostAttacher?n("label",{staticClass:"mb-2 flex justify-between items-start text-xs"},[n("span",[t._v("I want to attach the post to these graphs:")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphIdsToAttachNewPostTo,expression:"graphIdsToAttachNewPostTo",modifiers:{number:!0}}],staticClass:"select select--secondary",attrs:{multiple:"",size:Math.min(Object.keys(t.graphs).length,3)},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphIdsToAttachNewPostTo=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)]):t._e(),t._v(" "),n("button",{staticClass:"mb-5 btn btn--primary",attrs:{type:"submit",disabled:0===t.title.trim().length&&0===t.body.trim().length},on:{click:t.makePost}},[t._v("\n        Create\n    ")])])}),[],!1,null,"8fa55884",null).exports);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N={name:"PostAttacher",props:{post:{type:Object,required:!0},initialShouldExpand:{type:Boolean,default:!1}},data:function(){return{shouldExpand:this.initialShouldExpand,graphIdsToAttachPostTo:[]}},computed:D({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["graphIdsThatIncludeThisPost"]),{graphsNotAlreadyAttachedTo:function(){var t=this,e=this.graphIdsThatIncludeThisPost(this.post.id).map((function(t){return parseInt(t,10)}));return Object.keys(this.graphs).filter((function(t){return!e.includes(Number(t))})).map((function(e){return t.graphs[e]}))}}),created:function(){1===Object.keys(this.graphs).length&&(this.graphIdsToAttachPostTo=Object.keys(this.graphs)[0])},methods:D({},Object(u.d)("postsModule",["addPostToGraph"]),{attachPost:function(){if(this.graphIdsToAttachPostTo.length>0){var t=!0,e=!1,n=void 0;try{for(var o,s=this.graphIdsToAttachPostTo[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;this.addPostToGraph({graphId:r,postId:this.post.id})}}catch(t){e=!0,n=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw n}}this.$emit("attachedPost",this.graphIdsToAttachPostTo)}}})};n("MjxF");function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var A={name:"PostsAttacher",components:{PostAttacher:Object(m.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"postToAttach p-2"},[t.initialShouldExpand?t._e():n("div",{staticClass:"p-1 cursor-pointer hover:bg-red-300 font-bold",on:{click:function(e){e.stopPropagation(),t.shouldExpand=!t.shouldExpand}}},[t.post.title.length>0?n("p",[t._v("\n            "+t._s(t.post.title)+"\n        ")]):t._e(),t._v(" "),t.post.body.length>0?n("p",{staticClass:"pl-4"},[t._v("\n            "+t._s(t.post.body.substr(0,30))+t._s(t.post.body.length>30?"...":"")+"\n        ")]):t._e()]),t._v(" "),t.shouldExpand?n("label",{staticClass:"mt-2 pl-4 flex flex-col items-start text-xs"},[t.graphsNotAlreadyAttachedTo.length>0?[Object.keys(t.graphs).length>1?n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphIdsToAttachPostTo,expression:"graphIdsToAttachPostTo",modifiers:{number:!0}}],staticClass:"select select--secondary",attrs:{multiple:"",size:Math.min(Object.keys(t.graphs).length,3)},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphIdsToAttachPostTo=e.target.multiple?n:n[0]}}},t._l(t.graphsNotAlreadyAttachedTo,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),0):n("span",{staticClass:"block text-xs text-gray-500"},[t._v("\n                you can only attach the post to the graph '"+t._s(Object.values(t.graphs)[0].name)+"'\n            ")]),t._v(" "),n("button",{staticClass:"btn btn--primary mt-2",attrs:{disabled:0===t.graphIdsToAttachPostTo.length},on:{click:t.attachPost}},[t._v("\n                Attach\n            ")])]:n("span",{staticClass:"block text-xs text-gray-500"},[t._v("\n            this post is already attached to all the graphs\n        ")])],2):t._e()])}),[],!1,null,"6c84bc35",null).exports,PostSearch:b},data:function(){return{postToAttach:null}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)("postsModule",["posts","links"]),{},Object(u.c)("postsModule",["unattachedPosts"])),methods:{onPostClick:function(t){null===this.postToAttach||this.postToAttach.id!==t.id?this.postToAttach=t:this.postToAttach=null}}};function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z={name:"FloatingActionButton",components:{LinkEditor:k,LinkAdder:j,PostMaker:C,PostsAttacher:Object(m.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.unattachedPosts.length>0?n("section",{staticClass:"w-full mb-4 border-b border-red-500"},[n("h4",{staticClass:"h h--4"},[t._v("\n            Posts that haven't been attached to any graph yet\n        ")]),t._v(" "),t._l(t.unattachedPosts,(function(t){return n("PostAttacher",{key:t.id,attrs:{post:t}})}))],2):t._e(),t._v(" "),n("section",{staticClass:"mb-4"},[n("h4",{staticClass:"h h--4"},[t._v("\n            Search for posts\n        ")]),t._v(" "),n("PostSearch",{staticClass:"ml-2",on:{clickedOnResult:function(e){return t.onPostClick(e)}}})],1),t._v(" "),null!==t.postToAttach?n("section",[n("h4",{staticClass:"h h--4"},[t._v("\n            Attach post\n        ")]),t._v(" "),n("PostAttacher",{attrs:{post:t.postToAttach,initialShouldExpand:!0},on:{attachedPost:function(e){t.postToAttach=null}}})],1):t._e()])}),[],!1,null,null,null).exports,PostSearch:b},computed:G({},Object(u.e)("settingsModule",["graphHeight","canOpenMultiplePosts"]),{},Object(u.e)("postsModule",["graphs","selectedGraphIds","links"]),{},Object(u.c)("postsModule",["titleOrBody"]),{},Object(u.e)("clickerModule",["newLinkSource","linkToEdit"]),{shouldShowClickButtonMenu:{get:function(){return this.$store.state.clickerModule.shouldShowClickButtonMenu},set:function(t){this.setShouldShowClickButtonMenu(t)}},clickMode:{get:function(){return this.$store.state.clickerModule.clickMode},set:function(t){this.setClickMode(t)}},shouldShowContextMenu:function(){return"openPosts"!==this.clickMode}}),watch:{clickMode:function(t,e){"changeLink"===t?document.querySelector(":root").style.setProperty("--link-stroke-width","40px"):"changeLink"===e&&document.querySelector(":root").style.setProperty("--link-stroke-width","20px")}},created:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.newLinkGraphId=t},methods:G({},Object(u.d)("clickerModule",["setShouldShowClickButtonMenu","setClickMode","setLinkToEdit"]),{},Object(u.d)("postsModule",["selectPostId"]),{toggleClickButtonMenu:function(){var t=this.shouldShowClickButtonMenu;this.shouldShowClickButtonMenu=!this.shouldShowClickButtonMenu,t||(this.clickMode="openPosts")},toggleClickMode:function(t){var e=this.clickMode;this.clickMode=e===t?"openPosts":t},madePost:function(){this.toggleClickMode("openPosts"),this.shouldShowClickButtonMenu=!1},selectPost:function(t){this.selectPostId({id:t.id,canOpenMultiplePosts:this.canOpenMultiplePosts})},onRemovedLink:function(){this.setLinkToEdit(null),this.clickMode="openPosts"}})},B=(n("MZBl"),Object(m.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clicker"},[n("button",{staticClass:"clicker__button",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickButtonMenu(e)}}},[t._v("\n        +\n    ")]),t._v(" "),n("div",{staticClass:"clicker__container text-xs md:text-base",style:{"max-height":t.graphHeight+"vh"}},[t.shouldShowClickButtonMenu?n("div",{staticClass:"clicker__actionButtons"},[n("button",{staticClass:"clicker__actionButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickMode("attachPostsToGraphs")}}},[n("span",{staticClass:"linkIcon"}),t._v(" Attach posts to graphs\n            ")]),t._v(" "),n("button",{staticClass:"clicker__actionButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickMode("changeLink")}}},[n("svg",{staticClass:"mr-2 opacity-50",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 14 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 011.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"}})]),t._v("\n                Change/remove link\n            ")]),t._v(" "),n("button",{staticClass:"clicker__actionButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickMode("addLink")}}},[n("span",{staticClass:"mr-2 text-xl text-red"},[t._v("↔")]),t._v(" Add link between posts\n            ")]),t._v(" "),n("button",{staticClass:"clicker__actionButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickMode("addPost")}}},[n("span",{staticClass:"mr-2 text-xl font-bold text-red"},[t._v("+")]),t._v(" Add post\n            ")]),t._v(" "),n("button",{staticClass:"clicker__actionButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickMode("searchForPosts")}}},[n("span",{staticClass:"mr-2 text-xl font-bold text-red"},[t._v("🔍")]),t._v(" Search for posts\n            ")])]):t._e(),t._v(" "),t.shouldShowContextMenu?n("div",{staticClass:"clicker__contextMenu"},["addLink"===t.clickMode?n("LinkAdder"):"changeLink"===t.clickMode?[null===t.linkToEdit?n("sub",{staticClass:"text-xs text-gray-500"},[t._v("\n                    click on a link to change it\n                ")]):n("LinkEditor",{attrs:{link:t.links[t.linkToEdit]},on:{removedLink:t.onRemovedLink}})]:"addPost"===t.clickMode?n("PostMaker",{on:{madePost:t.madePost}}):"attachPostsToGraphs"===t.clickMode?n("PostsAttacher"):"searchForPosts"===t.clickMode?n("PostSearch",{on:{clickedOnResult:function(e){return t.selectPost(e)}}}):t._e()],2):t._e()])])}),[],!1,null,"acf30a34",null).exports);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={name:"OfflineGraph",components:{FloatingActionButton:B},data:function(){return{svg:null,rootG:null,shouldSaveZoomChanges:!1,zoom:null,zoomBehaviour:null,shouldResetZooming:!1,linksG:null,nodesG:null,nodesWithCoordinates:{}}},computed:U({},Object(u.e)("settingsModule",["canOpenMultiplePosts"]),{},Object(u.e)("postsModule",["selectedGraphIds"]),{},Object(u.c)("postsModule",["postsInSelectedGraphs","linksInSelectedGraphs","graphColour","titleOrBody","isNeighbour"]),{},Object(u.e)("clickerModule",["shouldShowClickButtonMenu","clickMode"]),{selectedPostIds:function(){return this.$store.state.postsModule.selectedPostIds}}),watch:{selectedGraphIds:function(){this.shouldResetZooming=!0,this.debouncedMakeGraphSvg()},postsInSelectedGraphs:function(){this.debouncedMakeGraphSvg()},linksInSelectedGraphs:function(){this.debouncedMakeGraphSvg()},zoom:function(t){var e=t.x,n=t.y,o=t.scale;this.rootG.attr("transform","translate(".concat(e," ").concat(n,") scale(").concat(o,")"));var s=.5/o,r=s<1?s:1+.35*(s-1),a=Math.min(220,Math.ceil(48*r));document.querySelector(":root").style.setProperty("--node-text-size",a+"px"),this.debouncedSaveZoomState()}},mounted:function(){var t=this;this.svg=p.h("#graphSvg"),this.rootG=p.h("#graphSvg g"),this.linksG=p.h(".graph__links").attr("stroke","#999").attr("stroke-opacity",.6),this.nodesG=p.h(".graph__nodes").attr("stroke","#fff").attr("stroke-width",1.5),this.setupZooming(),this.svg.call(this.zoomBehaviour).call(this.zoomBehaviour.transform,p.k.translate(this.$store.state.postsModule.zoom.x,this.$store.state.postsModule.zoom.y).scale(this.$store.state.postsModule.zoom.scale)),this.$nextTick((function(){t.debouncedMakeGraphSvg()})),this.$root.$on("focusOnPost",this.focusOnPost)},methods:U({},Object(u.d)("postsModule",["setZoom"]),{},Object(u.d)("clickerModule",["setShouldShowClickButtonMenu","setClickMode"]),{},Object(u.b)("clickerModule",["handlePostClick","handleLinkClick"]),{onSvgClick:function(t){"graphSvg"===t.target.id&&(this.shouldShowClickButtonMenu&&this.setShouldShowClickButtonMenu(!1),"openPosts"!==this.clickMode&&this.setClickMode("openPosts"))},debouncedMakeGraphSvg:h()((function(){this.makeGraphSvg()}),500,{leading:!1,trailing:!0}),makeGraphSvg:function(){var t=this,e=JSON.parse(JSON.stringify(this.postsInSelectedGraphs)),n=JSON.parse(JSON.stringify(this.linksInSelectedGraphs)),o=this,s=p.f(e).force("link",p.d(n).id((function(t){return t.id})).distance(200)).force("charge",p.e().strength(-7500)).force("center",p.c(200,100));s.tick(300);var r=this.linksG.selectAll("line").data(n,(function(t){return t.id})).join("line").classed("graph__link",!0).classed("graph__link--sidenote",(function(t){return"sidenote"===t.type})).classed("graph__link--link",(function(t){return"link"===t.type})).attr("stroke",(function(e){return t.graphColour(e.graph)})).attr("marker-end","url(#arrowhead)").on("click",function(){var t=l()(i.a.mark((function t(e){var n,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.handleLinkClick({link:e,coordinates:p.g(this)});case 2:null!=(n=t.sent)&&(s=n,o.focusOnPost(s,1.5));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()).call(p.a().clickDistance(4)),a=this.nodesG.selectAll("g").data(e,(function(t){return t.id}));a.exit().remove();var c=a.enter(),u=c.append("g").classed("node",!0);u.append("circle"),u.append("text"),(a=a.merge(c)).selectAll("g").attr("dataset-id",(function(t){return t.id}));var d=p.i(".node").select("circle").classed("node__circle",!0).attr("r",15).attr("title",(function(t){return t.title})),h=p.i(".node").select("text").classed("node__text",!0).attr("text-anchor","end").text((function(e){return t.titleOrBody(e.id)})).on("mouseover",(function(t){p.h(this).style("filter","url(#postHoverFilter)"),p.h(p.h(this).node().parentNode).raise(),d.filter((function(e){return t.id!==e.id&&!o.isNeighbour(t,e)})).style("opacity",.2),h.filter((function(e){return t.id!==e.id&&!o.isNeighbour(t,e)})).style("opacity",.2),r.filter((function(e){return t.id!==e.source.id&&t.id!==e.target.id})).style("opacity",.2)})).on("mouseout",(function(t){p.h(this).style("filter",""),d.style("opacity",1),h.style("opacity",1),r.style("opacity",1)}));p.i(".node *").on("click",this.handlePostClick).call(p.a().clickDistance(4)),s.on("tick",(function(){r.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),d.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),h.attr("x",(function(t){return t.x-6})).attr("y",(function(t){return t.y-4}))})),this.shouldResetZooming&&(this.shouldResetZooming=!1,this.$nextTick((function(){t.resetZoomToCenter()}))),this.shouldSaveZoomChanges||this.$nextTick((function(){t.shouldSaveZoomChanges=!0}));var f={},g=!0,m=!1,b=void 0;try{for(var v,y=e[Symbol.iterator]();!(g=(v=y.next()).done);g=!0){var O=v.value;f[O.id]=O}}catch(t){m=!0,b=t}finally{try{g||null==y.return||y.return()}finally{if(m)throw b}}this.nodesWithCoordinates=f},setupZooming:function(){var t=this;this.zoomBehaviour=p.j().scaleExtent([.05,2]).on("zoom",(function(){var e=p.b.transform.x,n=p.b.transform.y,o=p.b.transform.k;t.zoom={x:e,y:n,scale:o}})),this.svg.call(this.zoomBehaviour).on("wheel",(function(){p.b.preventDefault()}))},resetZoomToCenter:function(){this.svg.call(this.zoomBehaviour).call(this.zoomBehaviour.transform,p.k.translate(200,100).scale(.5))},debouncedSaveZoomState:h()((function(){this.shouldSaveZoomChanges&&this.setZoom(this.zoom)}),250,{leading:!1,trailing:!0}),focusOnPost:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.nodesWithCoordinates[t];this.svg.transition().duration(1500/e).call(this.zoomBehaviour.transform,p.k.scale(.5).translate(550-n.x,500-n.y))}})},Q=(n("hZnF"),Object(m.a)($,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"h-full w-full relative pb-4 px-0 flex"},[e("svg",{staticClass:"w-full cursor-move border bg-white",attrs:{id:"graphSvg"},on:{click:this.onSvgClick}},[e("defs",[e("marker",{attrs:{id:"arrowhead",viewBox:"-0 -5 10 10",refX:"15",refY:"0",orient:"auto",markerWidth:"2",markerHeight:"2"}},[e("path",{staticStyle:{stroke:"none"},attrs:{d:"M 0,-5 L 10 ,0 L 0,5",fill:"#353535"}})]),this._v(" "),e("filter",{attrs:{id:"postHoverFilter"}},[e("feFlood",{attrs:{"flood-color":"#000"}}),this._v(" "),e("feComponentTransfer",[e("feFuncA",{attrs:{type:"linear",slope:"0.75"}})],1),this._v(" "),e("feComposite",{attrs:{in:"SourceGraphic"}})],1)]),this._v(" "),e("g",{attrs:{transform:"translate(5, 15) scale(0.5)"}},[e("g",{staticClass:"graph__links"}),this._v(" "),e("g",{staticClass:"graph__nodes"})])]),this._v(" "),e("FloatingActionButton")],1)}),[],!1,null,null,null).exports),R=n("DlQD"),H=n.n(R);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y={name:"PostEditor",props:{post:{type:Object,required:!0}},data:function(){return{showTitleInput:this.post.title.length>0}},computed:Z({},Object(u.c)("postsModule",["titleOrBody"]),{title:{get:function(){return this.post.title},set:function(t){this.updatePost(Z({},this.post,{title:t,updated_at:(new Date).toISOString()}))}},body:{get:function(){return this.post.body},set:function(t){this.updatePost(Z({},this.post,{body:t,updated_at:(new Date).toISOString()}))}}}),methods:Z({},Object(u.d)("postsModule",["updatePost","removePost"]),{toggleTitleInput:function(){this.showTitleInput&&this.title.trim().length>0?this.$refs.inputTitle.focus():this.showTitleInput=!this.showTitleInput},removePostLocal:function(){confirm("Are you sure you want to remove this post? ")&&this.removePost({id:this.post.id})}})},J=Object(m.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flex flex-col p-1 pb-0"},[n("label",{staticClass:"mb-5 flex flex-col"},[n("button",{staticClass:"text-left font-bold",class:t.title.trim().length>0?"cursor-default":"cursor-pointer underline",on:{click:function(e){return e.preventDefault(),t.toggleTitleInput(e)}}},[t._v("\n            Title\n        ")]),t._v(" "),t.showTitleInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"inputTitle",staticClass:"p-2 rounded border text-gray-800 placeholder-gray-600",attrs:{type:"text",placeholder:"On the Origin of Species",minlength:"0",maxlength:"1000"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}):t._e()]),t._v(" "),n("label",{staticClass:"mb-5 flex flex-col"},[n("span",{staticClass:"font-bold"},[t._v("Body")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body,expression:"body"}],staticClass:"p-2 h-48 rounded border text-gray-800 placeholder-gray-600 resize",attrs:{required:"required",placeholder:"you can type Markdown here",minlength:"1",maxlength:"10000"},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})]),t._v(" "),n("span",{staticClass:"mb-2"},[n("button",{staticClass:"btn btn--secondary",on:{click:t.removePostLocal}},[t._v("\n            delete\n        ")])])])}),[],!1,null,null,null).exports;function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={name:"LinkedPosts",props:{post:{type:Object,required:!0}},computed:q({},Object(u.e)("settingsModule",["canOpenMultiplePosts"]),{},Object(u.e)("postsModule",["posts"]),{},Object(u.c)("postsModule",["titleOrBody","postIdsThatLinkToPost"]),{linkedPosts:function(){return this.postIdsThatLinkToPost(this.post.id)}}),methods:q({},Object(u.d)("postsModule",["togglePostId","removeLink"]),{togglePostIdLocal:function(t){this.togglePostId({id:t,canOpenMultiplePosts:this.canOpenMultiplePosts})}})},X=Object(m.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"flex justify-between items-center"},[Object.keys(t.linkedPosts.to).length>0?[n("div",t._l(t.linkedPosts.to,(function(e,o){return n("div",{key:o,staticClass:"mb-4 flex justify-between items-start"},[n("div",{staticClass:"p-1 cursor-pointer bg-red-200 hover:bg-red-300 rounded-lg text-xs md:text-sm",attrs:{title:"view this post"},on:{click:function(n){return t.togglePostIdLocal(e)}}},[t.posts[e].title.length>0?n("span",{staticClass:"font-bold"},[t._v("\n                            "+t._s(t.posts[e].title)+"\n                        ")]):t._e(),t._v(" "),t.posts[e].body.length>0?n("p",{staticClass:"text-xs"},[t._v("\n                            "+t._s(t.posts[e].body.substr(0,200))+t._s(t.posts[e].body.length>200?"...":"")+"\n                        ")]):t._e()]),t._v(" "),n("button",{staticClass:"ml-2 py-1 px-2 btn btn--secondary",attrs:{title:"remove link"},on:{click:function(e){return t.removeLink({id:o})}}},[t._v("\n                        x\n                    ")])])})),0),t._v(" "),t._m(0)]:t._e(),t._v(" "),n("span",[t._v("\n            "+t._s(t.titleOrBody(t.post.id))+"\n        ")]),t._v(" "),Object.keys(t.linkedPosts.from).length>0?[t._m(1),t._v(" "),n("div",t._l(t.linkedPosts.from,(function(e,o){return n("div",{key:o,staticClass:"mb-4 flex justify-between items-start"},[n("div",{staticClass:"p-1 cursor-pointer bg-red-200 hover:bg-red-300 rounded-lg text-xs md:text-sm",attrs:{title:"view this post"},on:{click:function(n){return t.togglePostIdLocal(e)}}},[t.posts[e].title.length>0?n("span",{staticClass:"font-bold"},[t._v("\n                            "+t._s(t.posts[e].title)+"\n                        ")]):t._e(),t._v(" "),t.posts[e].body.length>0?n("p",{staticClass:"text-xs"},[t._v("\n                            "+t._s(t.posts[e].body.substr(0,200))+t._s(t.posts[e].body.length>200?"...":"")+"\n                        ")]):t._e()]),t._v(" "),n("button",{staticClass:"ml-2 py-1 px-2 btn btn--secondary",attrs:{title:"remove link"},on:{click:function(e){return t.removeLink({id:o})}}},[t._v("\n                        x\n                    ")])])})),0)]:t._e()],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{staticClass:"h h--4 mx-4 flex flex-col"},[e("span",[this._v("→")]),this._v(" "),e("span",[this._v("→")]),this._v(" "),e("span",[this._v("→")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{staticClass:"h h--4 mx-4 flex flex-col"},[e("span",[this._v("→")]),this._v(" "),e("span",[this._v("→")]),this._v(" "),e("span",[this._v("→")])])}],!1,null,null,null).exports;function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nt={name:"LinkedGraphs",props:{post:{type:Object,required:!0}},computed:et({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["graphIdsThatIncludeThisPost"]),{linkedGraphs:function(){return this.graphIdsThatIncludeThisPost(this.post.id)}}),methods:et({},Object(u.d)("postsModule",["toggleGraphId","removePostFromGraph"]))},ot=Object(m.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",[n("h4",{staticClass:"h h--4"},[t._v("\n            Graphs that include this post\n        ")]),t._v(" "),t._l(t.linkedGraphs,(function(e){return n("a",{key:e,staticClass:"link block mb-2 text-xs md:text-base",attrs:{title:"show/hide this graph"},on:{click:function(n){return t.toggleGraphId(e)}}},[t._v("\n            "+t._s(t.graphs[e].name)+"\n\n            "),n("button",{staticClass:"ml-8 py-1 px-2 text-xs btn btn--secondary",on:{click:function(n){return n.stopPropagation(),t.removePostFromGraph({graphId:e,postId:t.post.id})}}},[t._v("\n                remove from graph\n            ")])])}))],2)])}),[],!1,null,null,null).exports;function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at={name:"AddLinkedPost",components:{PostMaker:C},props:{post:{type:Object,required:!0}},data:function(){return{graphId:1,fromOrToNewPost:"to",linkType:"reply"}},computed:rt({},Object(u.e)("postsModule",["graphs","selectedGraphIds"]),{},Object(u.c)("postsModule",["titleOrBody"])),created:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.graphId=t},methods:rt({},Object(u.d)("postsModule",["addLink"]),{toggleFromOrToTheNewPost:function(){var t="from"===this.fromOrToNewPost?"to":"from";this.fromOrToNewPost=t},addLinkToPost:function(t){var e="from"===this.fromOrToNewPost?t.id:this.post.id,n="to"===this.fromOrToNewPost?t.id:this.post.id;this.addLink({source:e,target:n,graph:this.graphId,type:this.linkType})}})},it=Object(m.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("label",{staticClass:"mb-3 block"},[t._v("\n        Link in graph:\n        "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"select select--secondary max-w-full",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)]),t._v(" "),n("label",{staticClass:"mb-3 block"},[t._v("\n        "+t._s(t.titleOrBody(t.post.id))+"\n        "),n("button",{staticClass:"mx-4 link",attrs:{type:"button"},on:{click:t.toggleFromOrToTheNewPost}},[t._v("\n            "+t._s("to"===t.fromOrToNewPost?"→":"←")+"\n        ")]),t._v("\n        [the new post]\n    ")]),t._v(" "),n("label",{staticClass:"mb-3 block"},[t._v("\n        link type:\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.linkType,expression:"linkType"}],staticClass:"select select--secondary max-w-full",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.linkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                reply\n            ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                sidenote\n            ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                link\n            ")])])]),t._v(" "),n("h4",{staticClass:"mt-5 h h--4"},[t._v("\n        Add post\n    ")]),t._v(" "),n("hr",{staticClass:"mb-1"}),t._v(" "),n("PostMaker",{attrs:{shouldShowPostAttacher:!1},on:{madePost:t.addLinkToPost}})],1)}),[],!1,null,null,null).exports;function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ut=new H.a.Renderer,pt=ut.link;ut.link=function(t,e,n){return pt.call(ut,t,e,n).replace(/^<a /,'<a target="_blank" rel="nofollow" ')},H.a.setOptions({breaks:!0,gfm:!0,headerIds:!1}),H.a.use({renderer:ut});var dt={name:"Post",components:{PostEditor:J,LinkedPosts:X,LinkedGraphs:ot,AddLinkedPost:it},props:{post:{type:Object,required:!0}},data:function(){return{showPostEditor:!1,bottomTab:""}},computed:lt({},Object(u.e)("settingsModule",["postWidth"]),{},Object(u.e)("postsModule",["selectedPostIds"]),{},Object(u.c)("postsModule",["postIdsInSelectedGraphs","postIdsThatLinkToPost","graphIdsThatIncludeThisPost"]),{hasLinkedPosts:function(){var t=this.postIdsThatLinkToPost(this.post.id);return Object.keys(t.to).length>0||Object.keys(t.from).length>0},isAttachedToAGraph:function(){return this.graphIdsThatIncludeThisPost(this.post.id).length>0},isVisibleInGraph:function(){return this.postIdsInSelectedGraphs.includes(this.post.id)},minPostWidth:function(){var t=this.selectedPostIds.length;return Math.max(this.postWidth,Math.floor(92/t))}}),methods:lt({marked:H.a},Object(u.d)("postsModule",["unselectPostId","movePostLeft","movePostRight"]),{toggleBottomTab:function(t){this.bottomTab=this.bottomTab===t?"":t}})};n("zW5e");function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gt={name:"PostBar",components:{Post:Object(m.a)(dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"relative post",style:{"min-width":t.minPostWidth+"vw"}},[n("div",[n("div",{staticClass:"flex justify-between"},[[t.post.title.length>0?n("h3",{staticClass:"h h--3 mr-2 whitespace-pre-wrap"},[t.isVisibleInGraph?n("button",{staticClass:"focusButton mr-2",attrs:{type:"button",title:"focus on this post in the viewer above"},on:{click:function(e){return t.$root.$emit("focusOnPost",t.post.id)}}},[n("span",{staticClass:"text-base"},[t._v("🔍")])]):t._e(),t._v(t._s(t.post.title))]):n("span")],t._v(" "),n("span",{staticStyle:{"min-width":"48px"}},[n("button",{staticClass:"mr-2 transition-150",class:{"opacity-25 hover:opacity-100":!t.showPostEditor,"opacity-100 hover:opacity-25":t.showPostEditor},attrs:{type:"button"},on:{click:function(e){t.showPostEditor=!t.showPostEditor}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 14 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 011.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"}})])]),t._v(" "),n("button",{staticClass:"opacity-25 hover:opacity-100 transition-150",attrs:{type:"button"},on:{click:function(e){return t.unselectPostId(t.post.id)}}},[n("svg",{attrs:{width:"18",height:"18",viewBox:"0 0 128 128"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M65.086 75.41l-50.113 50.113c-3.121 3.121-8.192 3.126-11.316.002-3.118-3.118-3.123-8.19.002-11.316l50.114-50.114L3.659 13.982C.538 10.86.533 5.79 3.657 2.666c3.118-3.118 8.19-3.123 11.316.002l50.113 50.114L115.2 2.668c3.121-3.121 8.192-3.126 11.316-.002 3.118 3.118 3.123 8.19-.002 11.316L76.4 64.095l50.114 50.114c3.121 3.121 3.126 8.192.002 11.316-3.118 3.118-8.19 3.123-11.316-.002L65.086 75.409z"}})])])])],2),t._v(" "),t.showPostEditor?n("PostEditor",{attrs:{post:t.post}}):n("div",[t.isVisibleInGraph&&0===t.post.title.length?n("button",{staticClass:"focusButton mr-2 float-left",attrs:{type:"button",title:"focus on this post in the viewer above"},on:{click:function(e){return t.$root.$emit("focusOnPost",t.post.id)}}},[n("span",{staticClass:"text-base"},[t._v("🔍")])]):t._e(),t._v(" "),n("p",{staticClass:"font-sans markdownContent",domProps:{innerHTML:t._s(t.marked(t.post.body))}})])],1),t._v(" "),n("div",{staticClass:"flex justify-between"},[n("span",[t.selectedPostIds.length>1?n("button",{staticClass:"bottomLink bottomLink--unselected",attrs:{type:"button",title:"move this post left"},on:{click:function(e){return t.movePostLeft(t.post.id)}}},[n("span",{staticClass:"text-xl"},[t._v("⇐")])]):t._e(),t._v(" "),t.isAttachedToAGraph?n("button",{staticClass:"bottomLink",class:"linked-graphs"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",attrs:{title:"graphs that include this post",type:"button"},on:{click:function(e){return t.toggleBottomTab("linked-graphs")}}},[n("span",{staticClass:"text-xs"},[t._v("linked graphs")])]):t._e(),t._v(" "),t.hasLinkedPosts?n("button",{staticClass:"bottomLink",class:"linked-posts"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",attrs:{type:"button",title:"posts that link to or from this one"},on:{click:function(e){return t.toggleBottomTab("linked-posts")}}},[n("span",{staticClass:"text-xs"},[t._v("linked posts")])]):t._e()]),t._v(" "),n("span",[n("button",{staticClass:"bottomLink",class:"add-linked-post"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",attrs:{title:"add a post linked to/from this one",type:"button"},on:{click:function(e){return t.toggleBottomTab("add-linked-post")}}},[n("span",{staticClass:"text-xl"},[t._v("+")])]),t._v(" "),t.selectedPostIds.length>1?n("button",{staticClass:"bottomLink bottomLink--unselected",attrs:{type:"button",title:"move this post right"},on:{click:function(e){return t.movePostRight(t.post.id)}}},[n("span",{staticClass:"text-xl"},[t._v("⇒")])]):t._e()])]),t._v(" "),""!==t.bottomTab?n(t.bottomTab,{tag:"component",staticClass:"pt-5",attrs:{post:t.post}}):t._e()],1)}),[],!1,null,"b375409a",null).exports},computed:ft({},Object(u.e)("postsModule",["posts"]),{selectedPostIds:{get:function(){return this.$store.state.postsModule.selectedPostIds},set:function(t){this.setSelectedPostIds(t)}}}),methods:ft({},Object(u.d)("postsModule",["setSelectedPostIds"]))};n("3fMe");function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var bt={name:"Viewer",components:{OfflineGraph:Q,PostBar:Object(m.a)(gt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"w-full flex items-start overflow-x-auto postBar",attrs:{id:"postBar"}},t._l(t.selectedPostIds,(function(e){return n("post",{key:e,staticClass:"m-2 p-2",attrs:{post:t.posts[e]}})})),1)])}),[],!1,null,null,null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)("settingsModule",["graphHeight","postBarHeight"]),{},Object(u.e)("postsModule",["graphs"]),{selectedGraphIds:{get:function(){return this.$store.state.postsModule.selectedGraphIds},set:function(t){this.$store.commit("postsModule/setSelectedGraphIds",t)}}}),methods:{scrollToPostBar:function(){window.scrollBy(0,document.getElementById("postBar").getBoundingClientRect().top-5)},scrollToGraph:function(){window.scrollTo(0,document.getElementById("graphsList").offsetTop-5)}}},vt=Object(m.a)(bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"mb-4 flex flex-col"},[n("span",{staticClass:"block h h--4",attrs:{id:"graphsList"}},[t._v("\n            Graphs\n        ")]),t._v(" "),n("span",{staticClass:"flex"},[n("button",{staticClass:"btn btn--secondary mr-2",attrs:{type:"button",title:"scroll to the posts"},on:{click:t.scrollToPostBar}},[t._v("\n                ↧\n            ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.selectedGraphIds,expression:"selectedGraphIds",modifiers:{number:!0}}],staticClass:"select select--secondary w-full",attrs:{multiple:"",size:Math.min(Object.keys(t.graphs).length,7)},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.selectedGraphIds=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),0)])]),t._v(" "),n("div",{staticClass:"flex flex-col"},[n("OfflineGraph",{ref:"offlineGraph",style:{"min-height":t.graphHeight+"vh"}}),t._v(" "),n("PostBar",{style:{"min-height":t.postBarHeight+"vh"}})],1),t._v(" "),n("button",{staticClass:"btn btn--secondary mt-4",attrs:{type:"button",title:"scroll to the graph"},on:{click:t.scrollToGraph}},[t._v("\n        ↥\n    ")])])}),[],!1,null,null,null).exports;function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kt={name:"GraphEditor",props:{graphId:{type:String,required:!0}},data:function(){return{postIdToAddToGraph:null,newGraphName:""}},computed:Ot({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["postIds","titleOrBody"]),{graph:function(){return this.graphs[this.graphId]}}),methods:Ot({},Object(u.d)("postsModule",["changeGraphName","removeGraph"]),{changeGraphNameLocal:function(){0!==this.newGraphName.trim().length&&(this.changeGraphName({graphId:this.graphId,newGraphName:this.newGraphName}),this.newGraphName="")}})};function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Mt={name:"Graphs",components:{GraphEditor:Object(m.a)(kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex justify-between"},[n("h3",{staticClass:"h h--3"},[t._v("\n            "+t._s(t.graph.name)+"\n        ")]),t._v(" "),1!==t.graphId?n("button",{staticClass:"py-1 px-2 btn btn--secondary",on:{click:function(e){return t.removeGraph(t.graphId)}}},[t._v("\n            Remove\n        ")]):t._e()]),t._v(" "),n("div",[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newGraphName,expression:"newGraphName"}],staticClass:"mb-2 p-2 rounded text-gray-800 text-base placeholder-gray-600",attrs:{type:"text",placeholder:"foo graph"},domProps:{value:t.newGraphName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeGraphNameLocal(e)},input:function(e){e.target.composing||(t.newGraphName=e.target.value)}}}),t._v(" "),n("button",{staticClass:"py-1 px-2 btn btn--secondary",attrs:{disabled:0===t.newGraphName.trim().length},on:{click:t.changeGraphNameLocal}},[t._v("\n                Change graph name\n            ")])])])])}),[],!1,null,null,null).exports},data:function(){return{newGraphName:""}},computed:xt({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["postIds","titleOrBody"])),methods:xt({},Object(u.d)("postsModule",["makeNewGraph"]),{makeNewGraphLocal:function(){this.makeNewGraph(this.newGraphName),this.newGraphName=""}})},jt=Object(m.a)(Mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[Object.keys(t.graphs).length>0?n("section",[n("h1",{staticClass:"h h--1"},[t._v("\n            Graphs\n        ")]),t._v(" "),n("hr",{staticClass:"my-5"}),t._v(" "),n("h2",{staticClass:"h h--2"},[n("label",{staticClass:"flex flex-col items-start"},[t._v("\n                Make new graph\n                "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newGraphName,expression:"newGraphName"}],staticClass:"mb-2 p-2 rounded text-gray-800 text-base placeholder-gray-600",attrs:{type:"text",placeholder:"foo graph"},domProps:{value:t.newGraphName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.makeNewGraphLocal(e)},input:function(e){e.target.composing||(t.newGraphName=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{type:"submit",disabled:0===t.newGraphName.trim().length},on:{click:t.makeNewGraphLocal}},[t._v("\n                    Create\n                ")])])]),t._v(" "),n("hr",{staticClass:"my-5"}),t._v(" "),n("section",[n("h2",{staticClass:"h h--2"},[t._v("\n                Edit graphs\n            ")]),t._v(" "),t._l(t.graphs,(function(t,e){return n("GraphEditor",{key:e,staticClass:"m-4 p-4 border",attrs:{graphId:e}})}))],2)]):t._e()])}),[],!1,null,null,null).exports;function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var It,Tt={name:"LoadSave",data:function(){return{fileToImport:null,shouldImportData:!1,shouldImportSettings:!1,shouldTakeDataFrom:null}},computed:Pt({},Object(u.e)("settingsModule",["shouldAutosave"]),{},Object(u.c)(["storageObject"]),{isAlreadySyncingWithFirebase:function(){return"firebase"===this.$store.state.settingsModule.remoteStorageMethod},shouldShowTakeDataFromSelect:function(){return this.shouldImportSettings&&!this.isAlreadySyncingWithFirebase&&!this.shouldImportData},fileToImportIsValid:function(){return null!==this.fileToImport&&"application/json"===this.fileToImport.type},importButtonIsDisabled:function(){return!this.fileToImportIsValid||!this.shouldImportData&&!this.shouldImportSettings||this.shouldShowTakeDataFromSelect&&null===this.shouldTakeDataFrom}}),methods:Pt({},Object(u.b)(["saveStateToStorage","loadStateFromStorage","importData","importSettings"]),{onFileUpload:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length&&!(e.length>1)){var n=e[0];this.fileToImport=e[0],"application/json"===n.type||alert("You must upload a JSON file exported by the 'export' button")}},importState:(It=l()(i.a.mark((function t(){var e,n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fileToImport.text();case 2:if(e=t.sent,"postsModule"in(n=JSON.parse(e))&&"settingsModule"in n&&"firebaseModule"in n){t.next=7;break}return alert("Imported file isn't valid"),t.abrupt("return");case 7:if(!this.shouldImportData){t.next=10;break}return t.next=10,this.importData(n);case 10:if(o=n.settingsModule.remoteStorageMethod&&"firebase"===n.settingsModule.remoteStorageMethod,!this.shouldImportSettings){t.next=19;break}if(!this.shouldShowTakeDataFromSelect||null===this.shouldTakeDataFrom||!o){t.next=17;break}return t.next=15,this.importSettings({storageObject:n,shouldTakeDataFrom:this.shouldTakeDataFrom});case 15:t.next=19;break;case 17:return t.next=19,this.importSettings({storageObject:n,shouldTakeDataFrom:null});case 19:return this.fileToImport=null,t.next=22,this.saveStateToStorage();case 22:case"end":return t.stop()}}),t,this)}))),function(){return It.apply(this,arguments)}),exportState:function(){var t=new Blob([JSON.stringify(this.storageObject)],{type:"application/json"}),e=(new Date).toISOString().replace("T","_").replace("Z","");this.downloadData(t,"spiderwebExport-".concat(e,".json"))},downloadData:function(t,e){var n=document.createElement("a");document.body.appendChild(n),n.style="display: none";var o=window.URL.createObjectURL(t);n.href=o,n.download=e,n.click(),window.URL.revokeObjectURL(o)}})},Ct=Object(m.a)(Tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.shouldAutosave?t._e():n("div",{staticClass:"mb-8 flex justify-around"},[n("button",{staticClass:"btn btn--primary",on:{click:t.saveStateToStorage}},[t._v("\n                Save\n            ")])]),t._v(" "),n("div",{staticClass:"flex justify-around items-start"},[n("div",{staticClass:"w-1/2 flex flex-col items-start"},[n("label",{staticClass:"mb-4"},[n("button",{staticClass:"btn btn--secondary",on:{click:function(e){return t.$refs.fileInput.click()}}},[t._v("\n                        Upload a data/settings file that's been previously exported\n                    ")]),t._v(" "),n("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",accept:"application/json"},on:{change:t.onFileUpload}})]),t._v(" "),t.fileToImportIsValid?n("div",{staticClass:"mb-4 flex flex-col items-start"},[n("label",[t._v("\n                        Import data\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shouldImportData,expression:"shouldImportData"}],staticClass:"ml-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.shouldImportData)?t._i(t.shouldImportData,null)>-1:t.shouldImportData},on:{change:function(e){var n=t.shouldImportData,o=e.target,s=!!o.checked;if(Array.isArray(n)){var r=t._i(n,null);o.checked?r<0&&(t.shouldImportData=n.concat([null])):r>-1&&(t.shouldImportData=n.slice(0,r).concat(n.slice(r+1)))}else t.shouldImportData=s}}})]),t._v(" "),n("label",[t._v("\n                        Import settings\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shouldImportSettings,expression:"shouldImportSettings"}],staticClass:"ml-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.shouldImportSettings)?t._i(t.shouldImportSettings,null)>-1:t.shouldImportSettings},on:{change:function(e){var n=t.shouldImportSettings,o=e.target,s=!!o.checked;if(Array.isArray(n)){var r=t._i(n,null);o.checked?r<0&&(t.shouldImportSettings=n.concat([null])):r>-1&&(t.shouldImportSettings=n.slice(0,r).concat(n.slice(r+1)))}else t.shouldImportSettings=s}}})]),t._v(" "),n("p",[t.shouldImportData||t.shouldImportSettings?t._e():n("sub",{staticClass:"text-gray-500"},[t._v("\n                            (you need to import data and/or settings)\n                        ")])]),t._v(" "),t.shouldShowTakeDataFromSelect?n("label",{staticClass:"mt-2 pt-2 border-t border-r-0 border-b-0 border-l-0 border-gray-400"},[t._v("\n                        If the settings I'm importing will start syncing data with Firebase,\n                        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldTakeDataFrom,expression:"shouldTakeDataFrom"}],ref:"shouldTakeDataFromSelect",staticClass:"select text-red",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldTakeDataFrom=e.target.multiple?n:n[0]}}},[null===t.shouldTakeDataFrom?n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("\n                                [please choose an option]\n                            ")]):t._e(),t._v(" "),n("option",{attrs:{value:"local"}},[t._v("\n                                keep using the data that's been stored locally\n                            ")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("\n                                use any data that's already been stored in Firebase, and overwrite what I've stored locally\n                            ")])])]):t._e(),t._v(" "),t._m(0),t._v(" "),t._m(1)]):t._e(),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{disabled:t.importButtonIsDisabled},on:{click:t.importState}},[t._v("\n                    Import the uploaded file\n                ")]),t._v(" "),null===t.fileToImport||t.fileToImportIsValid&&(t.shouldImportData||t.shouldImportSettings)?t._e():n("sub",{staticClass:"my-2 text-xs text-gray-500"},[t._v("\n                    "+t._s(t.fileToImportIsValid?t.shouldImportData||t.shouldImportSettings?"":"you must click one of the 'import' buttons above":"the file you've uploaded isn't valid")+"\n                ")])]),t._v(" "),n("div",{staticClass:"w-1/2 flex justify-end"},[n("button",{staticClass:"btn btn--primary",on:{click:t.exportState}},[t._v("\n                    Export data and settings\n                ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("sub",{staticClass:"text-gray-500"},[this._v("\n                            The file you're importing must look like this:\n                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"33vh"}},[e("code",[this._v('{\n    "postsModule": {\n        "posts": {},\n        "links": {},\n        "graphs": {\n            "1": {\n                "id": 1,\n                "name": "default",\n                "nodes": [],\n                "colour": "black"\n            }\n        },\n        "selectedPostIds": [],\n        "selectedGraphIds": []\n    },\n    "settingsModule": {\n        "shouldAutosave": true,\n        "remoteStorageMethod": "firebase",\n        "canOpenMultiplePosts": true,\n        "graphHeight": 66,\n        "postBarHeight": 66\n    },\n    "firebaseModule": {\n        "firebaseConfig": {\n            "apiKey": "x",\n            "authDomain": "y",\n            "databaseURL": "z",\n            "projectId": "xy",\n            "storageBucket": "yz",\n            "messagingSenderId": "xyz",\n            "appId": "xx"\n        }\n    }\n}')])])}],!1,null,null,null).exports,St=n("cDf5"),Dt=n.n(St);function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Lt,At={name:"Settings",data:function(){return{remoteStorageMethodInComponent:"none",shouldTakeDataFrom:null,firebaseConfigInComponent:""}},computed:{shouldAutosave:{get:function(){return this.$store.state.settingsModule.shouldAutosave},set:function(t){this.setShouldAutosave(t)}},remoteStorageMethod:function(){return this.$store.state.settingsModule.remoteStorageMethod},firebaseConfig:{get:function(){return JSON.stringify(this.$store.state.firebaseModule.firebaseConfig)},set:function(t){try{this.setFirebaseConfig(JSON.parse(t))}catch(t){alert('Firebase config isn\'t formatted correctly, it should be like this: {"apiKey":"xx","authDomain":"x.firebaseapp.com","databaseURL":"https://x.firebaseio.com","projectId":"spiderweb-e49bd","storageBucket":"x.appspot.com","messagingSenderId":"123","appId":"xyz"}')}}},canOpenMultiplePosts:{get:function(){return this.$store.state.settingsModule.canOpenMultiplePosts},set:function(t){this.setCanOpenMultiplePosts(t)}},graphHeight:{get:function(){return this.$store.state.settingsModule.graphHeight},set:function(t){this.setGraphHeight(t)}},postBarHeight:{get:function(){return this.$store.state.settingsModule.postBarHeight},set:function(t){this.setPostBarHeight(t)}},postWidth:{get:function(){return this.$store.state.settingsModule.postWidth},set:function(t){this.setPostWidth(t)}},firebaseConfigIsValid:function(){try{var t=JSON.parse(this.firebaseConfigInComponent);return"object"===Dt()(t)&&"string"==typeof t.apiKey&&""!==t.apiKey.trim()}catch(t){return!1}},canChangeStorageMethod:function(){return"firebase"!==this.remoteStorageMethodInComponent||null!==this.shouldTakeDataFrom&&this.firebaseConfigIsValid}},created:function(){this.remoteStorageMethodInComponent=this.remoteStorageMethod,this.firebaseConfigInComponent=this.firebaseConfig},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.d)("settingsModule",["setShouldAutosave","setCanOpenMultiplePosts","setGraphHeight","setPostBarHeight","setPostWidth"]),{},Object(u.b)("settingsModule",["setRemoteStorageMethod"]),{},Object(u.b)("firebaseModule",["setFirebaseConfig"]),{changeStorageMethod:(Lt=l()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.firebaseConfig!==this.firebaseConfigInComponent&&(this.firebaseConfig=this.firebaseConfigInComponent),t.next=3,this.setRemoteStorageMethod({remoteStorageMethod:this.remoteStorageMethodInComponent,shouldTakeDataFrom:this.shouldTakeDataFrom});case 3:case"end":return t.stop()}}),t,this)}))),function(){return Lt.apply(this,arguments)})})};n("EScV");function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zt,Bt={name:"OfflineApp",components:{Viewer:vt,Graphs:jt,LoadSave:Ct,Settings:Object(m.a)(At,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flex flex-col items-start"},[n("div",{staticClass:"setting"},[n("label",[t._v("\n            Data\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldAutosave,expression:"shouldAutosave"}],staticClass:"text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldAutosave=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:!0}},[t._v("\n                    should\n                ")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("\n                    shouldn't\n                ")])]),t._v("\n            be saved automatically when something changes\n        ")]),t._v(" "),t.shouldAutosave?t._e():n("sub",{staticClass:"text-gray-500"},[t._v('\n            (you\'ll need to press "save" in the "load/save" tab)\n        ')])]),t._v(" "),n("div",{staticClass:"setting flex flex-col",class:{"w-full md:w-1/2":"firebase"===t.remoteStorageMethod}},[n("div",{staticClass:"flex flex-col items-start"},[n("label",[t._v("\n                Data\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.remoteStorageMethodInComponent,expression:"remoteStorageMethodInComponent"}],staticClass:"ml-4 text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.remoteStorageMethodInComponent=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"none"}},[t._v("shouldn't")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("should")])]),t._v("\n                be synced to "),n("a",{staticClass:"link",attrs:{href:"https://firebase.google.com/docs/database"}},[t._v("\n                    Firebase's Realtime Database\n                ")]),t._v(" "),"firebase"===t.remoteStorageMethodInComponent?n("sub",{staticClass:"ml-1 text-xs text-gray-500"},[t._v("\n                    copy your Firebase config from "),n("a",{staticClass:"link",attrs:{href:"https://firebase.google.com/docs/web/setup?authuser=0#config-object",target:"_blank"}},[t._v("here")]),t._v(", it must be like\n                    "),t._m(0)]):t._e()]),t._v(" "),"none"!==t.remoteStorageMethodInComponent?n("div",{staticClass:"w-full flex flex-col items-start"},[t.remoteStorageMethodInComponent!==t.remoteStorageMethod?n("label",[t._v("\n                    When I start syncing data with Firebase, I want to\n                    "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldTakeDataFrom,expression:"shouldTakeDataFrom"}],staticClass:"text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldTakeDataFrom=e.target.multiple?n:n[0]}}},[null===t.shouldTakeDataFrom?n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("\n                            [please choose an option]\n                        ")]):t._e(),t._v(" "),n("option",{attrs:{value:"local"}},[t._v("\n                            keep using the data that's been stored locally\n                        ")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("\n                            use any data that's already been stored in Firebase, and overwrite what I've stored locally\n                        ")])])]):t._e(),t._v(" "),"firebase"===t.remoteStorageMethodInComponent?n("pre",{staticClass:"w-full"},[n("label",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.firebaseConfigInComponent,expression:"firebaseConfigInComponent"}],staticClass:"p-2 w-full h-48 rounded border text-gray-800 placeholder-gray-600",attrs:{required:"required"},domProps:{value:t.firebaseConfigInComponent},on:{input:function(e){e.target.composing||(t.firebaseConfigInComponent=e.target.value)}}})])]):t._e(),t._v(" "),t.firebaseConfigIsValid?t._e():n("p",[t._v("\n                    Firebase config invalid, it should look like\n                    "),t._m(1)])]):t._e(),t._v(" "),t.remoteStorageMethodInComponent!==t.remoteStorageMethod?n("button",{staticClass:"btn btn--primary mt-2",attrs:{type:"button",disabled:!t.canChangeStorageMethod},on:{click:t.changeStorageMethod}},[t._v("\n                Change storage method\n            ")]):t._e()])]),t._v(" "),n("div",{staticClass:"setting"},[n("label",[t._v("\n            When I already have a post open in the viewer, and I click on a second one, the second one should\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.canOpenMultiplePosts,expression:"canOpenMultiplePosts"}],staticClass:"text-red select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.canOpenMultiplePosts=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:!0}},[t._v("\n                    be opened as well\n                ")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("\n                    replace the already-open one\n                ")])])])]),t._v(" "),n("div",{staticClass:"setting"},[n("label",{staticClass:"block"},[t._v("\n            The graph should take up\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.graphHeight,expression:"graphHeight",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16  rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.graphHeight},on:{input:function(e){e.target.composing||(t.graphHeight=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's height\n        ")]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            The post-bar should take up\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.postBarHeight,expression:"postBarHeight",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16  rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.postBarHeight},on:{input:function(e){e.target.composing||(t.postBarHeight=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's height\n        ")]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            Each post should take up at least\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.postWidth,expression:"postWidth",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16 rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.postWidth},on:{input:function(e){e.target.composing||(t.postWidth=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's width\n        ")]),t._v(" "),n("div",{staticClass:"p-1 h-64 w-64 flex flex-col overflow-auto border border-solid border-gray-600"},[n("div",{staticClass:"p-1 w-full border border-solid border-gray-600",style:{"min-height":t.graphHeight+"%"}},[t._v("\n                Graph\n            ")]),t._v(" "),n("div",{staticClass:"mt-1 p-1 w-full border border-solid border-gray-600 flex items-start overflow-x-auto",style:{"min-height":t.postBarHeight+"%"}},[n("div",{staticClass:"mt-1 mr-1 mb-1 p-1 border border-solid border-gray-600 text-xs",style:{"min-width":t.postWidth+"%"}},[t._v("\n                    Post\n                ")]),t._v(" "),n("div",{staticClass:"m-1 p-1 border border-solid border-gray-600 text-xs",style:{"min-width":t.postWidth+"%"}},[t._v("\n                    Post\n                ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{staticClass:"inline bg-red-700 text-white p-1"},[e("code",[this._v('{"apiKey":"xyz",..}')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",{staticClass:"whitespace-pre-wrap bg-red-700 text-white p-1"},[this._v('{"apiKey":"xx","authDomain":"x.firebaseapp.com","databaseURL":"https://x.firebaseio.com","projectId":"spiderweb-e49bd","storageBucket":"x.appspot.com","messagingSenderId":"123","appId":"xyz"}')])])}],!1,null,"5d244bc8",null).exports},data:function(){return{currentTab:"viewer",tabs:[{key:"viewer",name:"Viewer"},{key:"graphs",name:"Graphs"},{key:"load-save",name:"Load/save"},{key:"settings",name:"Settings"}]}},computed:Gt({},Object(u.e)(["loadingApp","failedToLoadData"])),methods:Gt({},Object(u.b)(["loadStateFromStorage"]),{},Object(u.b)("settingsModule",["setRemoteStorageMethod"]),{refreshPage:function(){window.location.reload()},switchToLoadingDataFromLocalStorage:(zt=l()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setRemoteStorageMethod({remoteStorageMethod:"none",shouldTakeDataFrom:"local"});case 2:return t.next=4,this.loadStateFromStorage();case 4:case"end":return t.stop()}}),t,this)}))),function(){return zt.apply(this,arguments)})})};n("wjDy");function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Ut,$t={name:"OfflineRoot",components:{OfflineApp:Object(m.a)(Bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.loadingApp?n("div",{staticClass:"px-4 md:px-8"},[t._v("\n        loading..\n\n        "),t.failedToLoadData?n("div",{staticClass:"mt-4"},[n("p",{staticClass:"text-red font-bold"},[t._v("\n                Couldn't load data from Firebase\n            ")]),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.refreshPage}},[t._v("\n                Refresh\n            ")]),t._v(" "),n("button",{staticClass:"btn btn--secondary",attrs:{type:"button"},on:{click:t.switchToLoadingDataFromLocalStorage}},[t._v("\n                Load data from Local Storage instead\n            ")]),t._v(" "),n("sub",{staticClass:"my-2 text-xs text-gray-500"},[t._v("\n                (any data stored in Firebase will still be there)\n            ")])]):t._e()]):[n("nav",{staticClass:"flex flex-wrap",staticStyle:{"border-bottom":"5px solid var(--red)"}},t._l(t.tabs,(function(e){return n("button",{key:e.key,staticClass:"optionBtn flex-grow",class:{"optionBtn--selected":t.currentTab===e.key},on:{click:function(n){t.currentTab=e.key}}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0),t._v(" "),n("div",{staticClass:"min-h-full py-4 px-4 md:px-8 componentContainer"},[n("keep-alive",[n(t.currentTab,{tag:"component"})],1)],1)]],2)}),[],!1,null,"af9fea68",null).exports},mounted:(Ut=l()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadStateFromStorage();case 2:case"end":return t.stop()}}),t,this)}))),function(){return Ut.apply(this,arguments)}),methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.b)(["loadStateFromStorage"]))},Qt=Object(m.a)($t,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-full"},[e("OfflineApp",{staticClass:"w-full h-full"})],1)}),[],!1,null,null,null).exports;function Rt(t){return Number.isInteger(t)||function(t){if(RegExp(/^0+$/).test(t))return!0;var e=t.replace(/^0+/,""),n=Math.floor(Number(e));return n!==1/0&&String(n)===e&&n>=0}(t)}function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Wt(t,e,n){var s=e.shift();t[s]||o.a.set(t,s,{}),e.length?Wt(t[s],e,n):n&&"object"===Dt()(n)&&!Array.isArray(n)?t[s]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t[s],{},n):t[s]=n}var Zt,Yt,Jt={state:{shouldAutosave:!0,remoteStorageMethod:"none",canOpenMultiplePosts:!0,graphHeight:66,postBarHeight:66,postWidth:50},getters:{},mutations:{setState:function(t,e){0!==Object.keys(e).length&&(t.shouldAutosave=null==e.shouldAutosave||e.shouldAutosave,t.canOpenMultiplePosts=null==e.canOpenMultiplePosts||e.canOpenMultiplePosts,t.remoteStorageMethod=e.remoteStorageMethod||"none",t.graphHeight=e.graphHeight||66,t.postBarHeight=e.postBarHeight||66,t.postWidth=e.postWidth||50)},setShouldAutosave:function(t,e){t.shouldAutosave=e},setRemoteStorageMethod:function(t,e){Wt(t,["remoteStorageMethod"],e)},setCanOpenMultiplePosts:function(t,e){t.canOpenMultiplePosts=e},setGraphHeight:function(t,e){!Rt(e)||e>100||(t.graphHeight=e)},setPostBarHeight:function(t,e){!Rt(e)||e>100||(t.postBarHeight=e)},setPostWidth:function(t,e){!Rt(e)||e>100||(t.postWidth=e)}},actions:{setRemoteStorageMethod:(Zt=l()(i.a.mark((function t(e,n){var o,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.remoteStorageMethod,s=n.shouldTakeDataFrom,r="none"!==o,e.commit("setRemoteStorageMethod",o),!r){t.next=6;break}return t.next=6,e.dispatch("loadDataFrom",s,{root:!0});case 6:return t.next=8,e.dispatch("saveStateToLocalStorage",null,{root:!0});case 8:case"end":return t.stop()}}),t)}))),function(t,e){return Zt.apply(this,arguments)})},namespaced:!0},Vt={state:{firebaseConfig:{apiKey:"",authDomain:"xxx.firebaseapp.com",databaseURL:"https://xxx.firebaseio.com",projectId:"xxx",storageBucket:"xxx.appspot.com",messagingSenderId:"123",appId:"456"}},getters:{},mutations:{setState:function(t,e){0!==Object.keys(e).length&&(t.firebaseConfig=e.firebaseConfig||{apiKey:"",authDomain:"xxx.firebaseapp.com",databaseURL:"https://xxx.firebaseio.com",projectId:"xxx",storageBucket:"xxx.appspot.com",messagingSenderId:"123",appId:"456"})},setFirebaseConfig:function(t,e){t.firebaseConfig=e}},actions:{setFirebaseConfig:(Yt=l()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n.apiKey){t.next=2;break}throw new Error("firebase config is wrong, please check it");case 2:return e.commit("setFirebaseConfig",n),t.next=5,e.dispatch("loadStateFromStorage",null,{root:!0});case 5:case"end":return t.stop()}}),t)}))),function(t,e){return Yt.apply(this,arguments)})},namespaced:!0},qt=n("J4zp"),Kt=n.n(qt),Xt=n("RIqP"),te=n.n(Xt);function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oe(t,e,n){var o=t.slice(0),s=t[e];return o.splice(e,1),o.splice(n,0,s),o}var se,re,ae,ie,ce={posts:{},links:{},graphs:{1:{id:1,name:"default",nodes:[],colour:"black"}},selectedPostIds:[],selectedGraphIds:[1],zoom:{x:200,y:100,scale:.5}},le={graphNames:function(t){return Object.values(t.graphs).map((function(t){return t.name}))},postIdsInSelectedGraphs:function(t){var e=[],n=!0,o=!1,s=void 0;try{for(var r,a=t.selectedGraphIds[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var i=r.value;e=e.concat(t.graphs[i].nodes)}}catch(t){o=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return te()(new Set(e))},postsInSelectedGraphs:function(t,e){return e.postIdsInSelectedGraphs.map((function(e){return t.posts[e]}))},linksInSelectedGraphs:function(t){return Object.values(t.links).filter((function(e){return t.selectedGraphIds.includes(e.graph)}))},graphColour:function(t){return function(e){return t.graphs[e].colour||function(t){for(var e=0,n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);for(var o="#",s=0;s<3;s++){o+=("00"+(e>>8*s&255).toString(16)).substr(-2)}return o}("".concat(String(e),"salt and pepper are good for hashes"))}},postIds:function(t){return Object.keys(t.posts).map((function(t){return parseInt(t,10)}))},unattachedPosts:function(t){for(var e=[],n=0,o=Object.values(t.graphs);n<o.length;n++){var s=o[n];e=e.concat(s.nodes)}var r=te()(new Set(e));return Object.keys(t.posts).map((function(t){return parseInt(t,10)})).filter((function(t){return!r.includes(t)})).map((function(e){return t.posts[e]}))},titleOrBody:function(t){return function(e){var n=t.posts[e],o=n.title.split("\n")[0].trim();if(o.length>0)return o;var s=n.body.split("\n")[0].trim();return s.length>30?s.substr(0,30)+"..":s}},neighbourIndex:function(t,e){var n={};return e.linksInSelectedGraphs.forEach((function(t){var e=Math.min(t.source,t.target),o=Math.max(t.source,t.target);n[e+","+o]=1})),n},isNeighbour:function(t,e){return function(t,n){var o=Math.min(t.id,n.id),s=Math.max(t.id,n.id);return void 0!==e.neighbourIndex[o+","+s]}},postIdsThatLinkToPost:function(t){return function(e){var n={},o={};return Object.values(t.links).forEach((function(t){t.source===e?n[t.id]=t.target:t.target===e&&(o[t.id]=t.source)})),{from:n,to:o}}},graphIdsThatIncludeThisPost:function(t){return function(e){for(var n=[],o=0,s=Object.values(t.graphs);o<s.length;o++){var r=s[o];r.nodes.includes(e)&&n.push(r.id)}return n}}},ue={setState:function(t,e){0!==Object.keys(e).length&&0!==Object.keys(e.posts).length&&(t.posts=e.posts,t.links=e.links,t.graphs=e.graphs,t.selectedPostIds=e.selectedPostIds||[],t.selectedGraphIds=e.selectedGraphIds||[],t.zoom=e.zoom||{x:200,y:100,scale:.5})},setSelectedPostIds:function(t,e){t.selectedPostIds=e},selectPostId:function(t,e){var n=e.id,o=e.canOpenMultiplePosts;t.selectedPostIds.includes(n)&&t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1),o?t.selectedPostIds.unshift(n):t.selectedPostIds=[n]},unselectPostId:function(t,e){t.selectedPostIds.splice(t.selectedPostIds.indexOf(e),1)},togglePostId:function(t,e){var n=e.id,o=e.canOpenMultiplePosts;t.selectedPostIds.includes(n)?t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1):o?t.selectedPostIds.unshift(n):t.selectedPostIds=[n]},movePostLeft:function(t,e){var n=t.selectedPostIds.indexOf(e),o=0===n?t.selectedPostIds.length-1:n-1;t.selectedPostIds=oe(t.selectedPostIds,n,o)},movePostRight:function(t,e){var n=t.selectedPostIds.indexOf(e),o=n===t.selectedPostIds.length-1?0:n+1;t.selectedPostIds=oe(t.selectedPostIds,n,o)},setSelectedGraphIds:function(t,e){t.selectedGraphIds=e},selectGraphId:function(t,e){t.selectedGraphIds.includes(e)||t.selectedGraphIds.push(e)},toggleGraphId:function(t,e){t.selectedGraphIds.includes(e)?t.selectedGraphIds.splice(t.selectedGraphIds.indexOf(e),1):t.selectedGraphIds.push(e)},makeNewGraph:function(t,e){if(0!==e.trim().length)if(Object.values(t.graphs).map((function(t){return t.name})).includes(e))alert("You're trying to add a graph that already exists, choose a different name");else{var n=Object.keys(t.graphs),s=(0===n.length?0:Math.max.apply(Math,te()(n.map((function(t){return parseInt(t,10)})))))+1;o.a.set(t.graphs,s,{id:s,name:e,nodes:[]})}},changeGraphName:function(t,e){var n=e.graphId,o=e.newGraphName;t.graphs[n].name=o},removeGraph:function(t,e){var n=t.selectedGraphIds.filter((function(t){return t!==parseInt(e,10)}));t.selectedGraphIds=0===n.length?[1]:n,o.a.delete(t.graphs,e)},addPostToGraph:function(t,e){var n=e.graphId,o=e.postId;t.graphs[n].nodes.includes(o)||t.graphs[n].nodes.push(o)},removePostFromGraph:function(t,e){for(var n=e.graphId,s=e.postId,r={},a=0,i=Object.values(t.links);a<i.length;a++){var c=i[a],l=c.graph===parseInt(n,10),u=c.source===s||c.target===s;l&&u||(r[c.id]=c)}o.a.set(t,"links",r),o.a.set(t.graphs[n],"nodes",t.graphs[n].nodes.filter((function(t){return t!==s})))},addPost:function(t,e){return o.a.set(t.posts,e.id,e),e},updatePost:function(t,e){o.a.set(t.posts,e.id,e)},removePost:function(t,e){var n=e.id;t.selectedPostIds.includes(n)&&t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1);for(var s={},r=0,a=Object.values(t.links);r<a.length;r++){var i=a[r];i.source!==n&&i.target!==n&&(s[i.id]=i)}for(var c=0,l=Object.entries(t.graphs);c<l.length;c++){var u=Kt()(l[c],2),p=u[0],d=u[1],h=ne({},d,{nodes:d.nodes.filter((function(t){return t!==n}))});o.a.set(t.graphs,p,h)}o.a.set(t,"links",s),o.a.delete(t.posts,n)},addLink:function(t,e){var n=e.source,s=e.target,r=e.graph,a=e.type,i=void 0===a?"reply":a,c=Object.keys(t.links),l=(0===c.length?0:Math.max.apply(Math,te()(c.map((function(t){return parseInt(t,10)})))))+1;if(Object.values(t.links).filter((function(t){return t.graph===r&&t.source===n&&t.target===s&&t.type===i})).length>0)alert("This link already exists");else{var u=t.graphs[r].nodes;u.includes(n)||t.graphs[r].nodes.push(n),u.includes(s)||t.graphs[r].nodes.push(s),o.a.set(t.links,l,{id:l,graph:r,source:n,target:s,type:i})}},updateLink:function(t,e){var n=t.graphs[e.graph].nodes;n.includes(e.source)||t.graphs[e.graph].nodes.push(e.source),n.includes(e.target)||t.graphs[e.graph].nodes.push(e.target),o.a.set(t.links,e.id,e)},changeLinkSource:function(t,e){var n=e.id,s=e.source,r=JSON.parse(JSON.stringify(t.links[n]));r.source!==s&&r.target!==s&&(t.graphs[r.graph].nodes.includes(s)||t.graphs[r.graph].nodes.push(s),r.source=s,o.a.set(t.links,n,r))},changeLinkTarget:function(t,e){var n=e.id,s=e.target,r=JSON.parse(JSON.stringify(t.links[n]));r.source!==s&&r.target!==s&&(t.graphs[r.graph].nodes.includes(s)||t.graphs[r.graph].nodes.push(s),r.target=s,o.a.set(t.links,n,r))},removeLink:function(t,e){var n=e.id;o.a.delete(t.links,n)},setZoom:function(t,e){t.zoom=e}},pe={makeNewPost:(re=l()(i.a.mark((function t(e,n){var o,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object.keys(ce.posts),s=0===o.length?0:Math.max.apply(Math,te()(o.map((function(t){return parseInt(t,10)})))),r=s+1,n.id=r,e.commit("addPost",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),function(t,e){return re.apply(this,arguments)}),replyToPost:(se=l()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postId,n.newPost;case 1:case"end":return t.stop()}}),t)}))),function(t,e){return se.apply(this,arguments)})},de={state:ce,getters:le,mutations:ue,actions:pe,namespaced:!0},he={state:{shouldShowClickButtonMenu:!1,clickMode:"openPosts",newLinkSource:null,newLinkTarget:null,newLinkGraphId:1,newLinkType:"reply",linkToEdit:null,wantsToChangeSource:!1,wantsToChangeTarget:!1},getters:{},mutations:{setShouldShowClickButtonMenu:function(t,e){t.shouldShowClickButtonMenu=e,e||(t.newLinkSource=null,t.newLinkTarget=null,t.newLinkGraphId=1,t.newLinkType="reply",t.linkToEdit=null,t.wantsToChangeSource=!1,t.wantsToChangeTarget=!1)},setClickMode:function(t,e){t.clickMode=e},setNewLinkSource:function(t,e){t.newLinkSource=e},setNewLinkTarget:function(t,e){t.newLinkTarget=e},setNewLinkGraphId:function(t,e){t.newLinkGraphId=e},setNewLinkType:function(t,e){t.newLinkType=e},setLinkToEdit:function(t,e){t.linkToEdit=e},setWantsToChangeSource:function(t,e){t.wantsToChangeSource=e},setWantsToChangeTarget:function(t,e){t.wantsToChangeTarget=e}},actions:{handlePostClick:(ie=l()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===Dt()(n)){t.next=3;break}return console.error("no post clicked, clicked",n),t.abrupt("return");case 3:t.t0=e.state.clickMode,t.next="openPosts"===t.t0?6:"addLink"===t.t0?8:"changeLink"===t.t0?21:6;break;case 6:return e.commit("postsModule/selectPostId",{id:n.id,canOpenMultiplePosts:e.rootState.settingsModule.canOpenMultiplePosts},{root:!0}),t.abrupt("break",24);case 8:if(null!==e.state.newLinkSource){t.next=13;break}return e.commit("setNewLinkSource",n.id),t.abrupt("break",24);case 13:if(e.state.newLinkSource!==n.id){t.next=15;break}return t.abrupt("return");case 15:return e.commit("setNewLinkTarget",n.id),e.commit("postsModule/addLink",{source:e.state.newLinkSource,target:e.state.newLinkTarget,graph:e.state.newLinkGraphId,type:e.state.newLinkType},{root:!0}),e.commit("setClickMode","openPosts"),e.commit("setNewLinkSource",null),e.commit("setNewLinkTarget",null),t.abrupt("break",24);case 21:e.state.wantsToChangeSource?(e.commit("postsModule/changeLinkSource",{id:e.state.linkToEdit,source:n.id},{root:!0}),e.commit("setWantsToChangeSource",!1)):e.state.wantsToChangeTarget&&(e.commit("postsModule/changeLinkTarget",{id:e.state.linkToEdit,target:n.id},{root:!0}),e.commit("setWantsToChangeTarget",!1)),e.commit("setClickMode","openPosts"),e.commit("setLinkToEdit",null);case 24:case"end":return t.stop()}}),t)}))),function(t,e){return ie.apply(this,arguments)}),handleLinkClick:(ae=l()(i.a.mark((function t(e,n){var o,s,r,a,c,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.link,s=n.coordinates,"object"===Dt()(o)){t.next=4;break}return console.error("no link clicked, clicked",o),t.abrupt("return");case 4:t.t0=e.state.clickMode,t.next="openPosts"===t.t0?7:"changeLink"===t.t0?20:22;break;case 7:if(r=[o.source.x,o.source.y],a=[o.target.x,o.target.y],c=Math.hypot(r[0]-s[0],r[1]-s[1]),l=Math.hypot(a[0]-s[0],a[1]-s[1]),!(c<l)){t.next=15;break}return t.abrupt("return",o.target.id);case 15:if(!(l<c)){t.next=19;break}return t.abrupt("return",o.source.id);case 19:return t.abrupt("return");case 20:return e.commit("setLinkToEdit",o.id),t.abrupt("break",23);case 22:return t.abrupt("return");case 23:case"end":return t.stop()}}),t)}))),function(t,e){return ae.apply(this,arguments)})},namespaced:!0},fe=n("Wcq6"),ge=(n("Zs65"),function(t){if(""===t.apiKey)throw new Error("firebase config is wrong, please check it: "+JSON.stringify(t));return fe.apps.length||fe.initializeApp(t),fe.database()});o.a.use(u.a);var me,be,ve,ye,Oe,ke,we=new u.a.Store({strict:!1,modules:{settingsModule:Jt,firebaseModule:Vt,postsModule:de,clickerModule:he},state:{loadingApp:!0,failedToLoadData:!1},getters:{storageObject:function(t){return{postsModule:t.postsModule,settingsModule:t.settingsModule,firebaseModule:t.firebaseModule}}},mutations:{setLoadingApp:function(t,e){t.loadingApp=e},setFailedToLoadData:function(t,e){t.failedToLoadData=e}},actions:{saveStateToLocalStorage:(ke=l()(i.a.mark((function t(e){var n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getters.storageObject,o=JSON.stringify(n),localStorage.setItem("offlineState",o);case 3:case"end":return t.stop()}}),t)}))),function(t){return ke.apply(this,arguments)}),saveStateToStorage:(Oe=l()(i.a.mark((function t(e){var n,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getters.storageObject,o=JSON.stringify(n),localStorage.setItem("offlineState",o),s=e.state.settingsModule.remoteStorageMethod,t.t0=s,t.next="firebase"===t.t0?7:10;break;case 7:return ge(e.state.firebaseModule.firebaseConfig).ref("offlineState").set(o),t.abrupt("break",11);case 10:return t.abrupt("break",11);case 11:case"end":return t.stop()}}),t)}))),function(t){return Oe.apply(this,arguments)}),loadStateFromStorage:(ye=l()(i.a.mark((function t(e){var n,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=JSON.parse(localStorage.getItem("offlineState")))){t.next=4;break}return e.commit("setLoadingApp",!1),t.abrupt("return");case 4:o=n.settingsModule.remoteStorageMethod,t.t0=o,t.next="firebase"===t.t0?8:(t.t0,22);break;case 8:t.prev=8,s=!1,ge(n.firebaseModule.firebaseConfig).ref("offlineState").once("value").then((function(t){var n=JSON.parse(t.val());null!==n?(e.dispatch("importState",n),s=!0,e.commit("setLoadingApp",!1)):e.commit("setFailedToLoadData",!0)})).catch((function(t){console.log(t),alert("There was an error loading the state from Firebase, please refresh the page/change your Firebase config in 'settings', and try again")})),setTimeout((function(){s||e.commit("setFailedToLoadData",!0)}),5e3),t.next=21;break;case 15:return t.prev=15,t.t1=t.catch(8),e.commit("settingsModule/setRemoteStorageMethod","none",{root:!0}),e.commit("setLoadingApp",!1),alert(t.t1),t.abrupt("return");case 21:return t.abrupt("break",25);case 22:return e.dispatch("importState",n),e.commit("setLoadingApp",!1),t.abrupt("break",25);case 25:case"end":return t.stop()}}),t,null,[[8,15]])}))),function(t){return ye.apply(this,arguments)}),loadDataFrom:(ve=l()(i.a.mark((function t(e,n){var o,s,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="local"===t.t0?3:"firebase"===t.t0?8:25;break;case 3:if(null!=(o=JSON.parse(localStorage.getItem("offlineState")))){t.next=6;break}return t.abrupt("return");case 6:return e.dispatch("importData",o),t.abrupt("break",26);case 8:return e.commit("setLoadingApp",!0),t.prev=9,s=ge(e.state.firebaseModule.firebaseConfig),t.next=13,s.ref("offlineState").once("value");case 13:return r=t.sent,a=JSON.parse(r.val()),t.next=17,e.dispatch("importData",a);case 17:t.next=23;break;case 19:t.prev=19,t.t1=t.catch(9),console.log(t.t1),alert("There was an error loading the data from Firebase, please refresh the page/change your Firebase config in 'settings', and try again");case 23:return e.commit("setLoadingApp",!1),t.abrupt("break",26);case 25:return t.abrupt("break",26);case 26:case"end":return t.stop()}}),t,null,[[9,19]])}))),function(t,e){return ve.apply(this,arguments)}),importState:function(){var t=l()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postsModule&&e.commit("postsModule/setState",n.postsModule),n.settingsModule&&e.commit("settingsModule/setState",n.settingsModule),n.firebaseModule&&e.commit("firebaseModule/setState",n.firebaseModule);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),importData:(be=l()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postsModule&&e.commit("postsModule/setState",n.postsModule);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return be.apply(this,arguments)}),importSettings:(me=l()(i.a.mark((function t(e,n){var o,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.storageObject,s=n.shouldTakeDataFrom,r=e.state.settingsModule.remoteStorageMethod!==o.settingsModule.remoteStorageMethod,o.settingsModule&&e.commit("settingsModule/setState",o.settingsModule),o.firebaseModule&&e.commit("firebaseModule/setState",o.firebaseModule),!r){t.next=7;break}return t.next=7,e.dispatch("loadDataFrom",s);case 7:case"end":return t.stop()}}),t)}))),function(t,e){return me.apply(this,arguments)})}});we.subscribe((function(t,e){var n=e.settingsModule.shouldAutosave&&!["setLoadingApp","setFailedToLoadData","settingsModule/setRemoteStorageMethod"].includes(t.type)&&!t.type.endsWith("/setState")&&!t.type.startsWith("clickerModule/");if(console.log(t.type),n){var o={postsModule:e.postsModule,settingsModule:e.settingsModule,firebaseModule:e.firebaseModule},s=JSON.stringify(o);if(console.log("autosaving, mutation is",t.type),localStorage.setItem("offlineState",s),"firebase"===e.settingsModule.remoteStorageMethod)ge(e.firebaseModule.firebaseConfig).ref("offlineState").set(s)}}));var xe=we;new o.a({store:xe,el:"#offlineGraphApp",components:{OfflineRoot:Qt},template:"<OfflineRoot/>"})},EScV:function(t,e,n){"use strict";var o=n("0Rwe");n.n(o).a},Ejxx:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,'\n.post[data-v-b375409a] {\n    background: white;\n\n    overflow-y: auto;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n}\n@media (max-width: 768px) {\n.post[data-v-b375409a] {\n        min-width: 92% !important;\n}\n}\n.focusButton[data-v-b375409a] {\n    cursor: crosshair;\n}\n.transition-150[data-v-b375409a] {\n    transition: all 150ms ease-in-out;\n}\n.bottomLink--unselected[data-v-b375409a] {\n    color: #a0aec0;\n}\n.bottomLink--selected[data-v-b375409a] {\n    color: #2d3748;\n}\n.bottomLink[data-v-b375409a]:hover {\n     color: #2d3748;\n}\n.bottomLink[data-v-b375409a]:not(:last-of-type):after {\n    content: "⋅"\n}\n',""])},Hy2F:function(t,e,n){var o=n("UVzx");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("5d676986",o,!0,{})},ISrG:function(t,e,n){var o=n("aS4t");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("1f8ee04e",o,!0,{})},LRsX:function(t,e,n){var o=n("lT0o");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("b10f1a9a",o,!0,{})},MZBl:function(t,e,n){"use strict";var o=n("LRsX");n.n(o).a},MjxF:function(t,e,n){"use strict";var o=n("Hy2F");n.n(o).a},QH2O:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.setting[data-v-5d244bc8] {\n    padding: 1rem 2rem;\n\n    background-color: white;\n    border-radius: 1rem;\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n.setting[data-v-5d244bc8]:not(:last-of-type) {\n    margin-bottom: 2rem;\n}\n",""])},UVzx:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.postToAttach[data-v-6c84bc35]:not(:last-of-type) {\n    border-bottom: 1px solid #f56565;\n}\n",""])},Ugez:function(t,e,n){var o=n("axGT");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("483e11df",o,!0,{})},a5Qa:function(t,e,n){var o=n("Ejxx");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("e9f50a04",o,!0,{})},aS4t:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n.textareaBody[data-v-8fa55884] {\n    min-height: 75px;\n    max-height: 50%;\n}\n",""])},axGT:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,"\n:root {\n    --node-text-size: 48px;\n    --link-stroke-width: 20px;\n}\n#graphSvg {\n    min-width: 33%;\n}\n.graph__link {\n    fill: none;\n    stroke-width: var(--link-stroke-width);\n    cursor: pointer;\n}\n.graph__link--sidenote {\n    stroke-dasharray: 50, 50;\n}\n.graph__link--link {\n    stroke-dasharray: 10, 10;\n}\n.node__circle {\n    fill: #353535;\n    stroke: none;\n    cursor: pointer;\n}\n.node__text {\n    cursor: pointer;\n    text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;\n    fill: #333333;\n\n    font-size: var(--node-text-size);\n    font-weight: bold;\n    stroke-width: 0;\n}\n",""])},hZnF:function(t,e,n){"use strict";var o=n("Ugez");n.n(o).a},j1RZ:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,'\n.postBar {\n    min-width: 33%;\n    background: #eeeeee url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAR0lEQVQYlYWPuw0AQAhC2X9AY+UOTOBVNH7OgkQpHgDzSJJpHk3ySSZ0SPWXsBFqUiNuZGyEmoSNMBJ/a09i9ceOU1dca/U/VPFxnYht7pgAAAAASUVORK5CYII=");\n}\n',""])},lT0o:function(t,e,n){var o=n("JPst");(t.exports=o(!1)).push([t.i,'\n.clicker[data-v-acf30a34] {\n    position: absolute;\n    bottom: 5%;\n    right: 0;\n}\n.clicker__button[data-v-acf30a34] {\n    border-radius: 9999px;\n\n    background: var(--red);\n    color: var(--white);\n    cursor: pointer;\n\n    width: 40px;\n    height: 40px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.clicker__container[data-v-acf30a34] {\n    position: absolute;\n    bottom: 100%;\n    right: 0;\n\n    display: flex;\n    flex-direction: column-reverse;\n    align-items: flex-end;\n\n    background-color: #f7f7f7e6;\n    border-radius: 10px;\n    max-width: 50vw;\n}\n.clicker__actionButtons[data-v-acf30a34] {\n    padding: 10px;\n    max-width: 100%;\n}\n.clicker__actionButton[data-v-acf30a34] {\n    display: flex;\n    align-items: center;\n\n    border: 1px solid var(--red);\n    padding: 0.5rem 0.75rem;\n    border-radius: 2rem;\n    white-space: nowrap;\n    transition: all 0.3s ease;\n}\n.clicker__actionButton[data-v-acf30a34]:hover,\n.clicker__actionButton[data-v-acf30a34]:focus,\n.clicker__actionButton[data-v-acf30a34]:active {\n    background-color: #e8e8e8;\n}\n.clicker__actionButton[data-v-acf30a34]:not(:last-of-type) {\n    margin-bottom: 0.5rem;\n}\n@media (max-width: 768px) {\n.clicker__actionButton[data-v-acf30a34] {\n        border: 0;\n        border-radius: 0;\n        padding: 0.25rem;\n}\n.clicker__actionButton[data-v-acf30a34]:not(:last-of-type) {\n        margin-bottom: 0.25rem;\n}\n}\n.linkIcon[data-v-acf30a34] {\n    display: inline-block;\n    width: 28px;\n    height: 20px;\n\n    background: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTEuNDgyIDYuNTE3MThDMTMuNTgyNSA4LjYxOTg0IDEzLjU1MzYgMTEuOTkwOSAxMS40OTQ2IDE0LjA2MTRDMTEuNDkwOCAxNC4wNjU2IDExLjQ4NjIgMTQuMDcwMiAxMS40ODIgMTQuMDc0NEw5LjExOTQ4IDE2LjQzNjlDNy4wMzU3NyAxOC41MjA2IDMuNjQ1NjkgMTguNTIwMyAxLjU2MjMgMTYuNDM2OUMtMC41MjE0MTYgMTQuMzUzNSAtMC41MjE0MTYgMTAuOTYzIDEuNTYyMyA4Ljg3OTY4TDIuODY2OCA3LjU3NTE4QzMuMjEyNzQgNy4yMjkyNCAzLjgwODUgNy40NTkxNiAzLjgyNjM2IDcuOTQ4MDRDMy44NDkxNCA4LjU3MTA4IDMuOTYwODcgOS4xOTcwNCA0LjE2NzAyIDkuODAxNTJDNC4yMzY4NCAxMC4wMDYyIDQuMTg2OTYgMTAuMjMyNiA0LjAzNDAzIDEwLjM4NTVMMy41NzM5NCAxMC44NDU2QzIuNTg4NjUgMTEuODMwOSAyLjU1Nzc0IDEzLjQzNTIgMy41MzMzMyAxNC40MzAyQzQuNTE4NTUgMTUuNDM0OSA2LjEzNzkyIDE1LjQ0MDkgNy4xMzA2OSAxNC40NDgxTDkuNDkzMTkgMTIuMDg1OUMxMC40ODQzIDExLjA5NDggMTAuNDgwMSA5LjQ5MjkyIDkuNDkzMTkgOC41MDU5N0M5LjM2MzA4IDguMzc2MTEgOS4yMzIwMiA4LjI3NTIxIDkuMTI5NjQgOC4yMDQ3MkM5LjA1NzIyIDguMTU0OTkgOC45OTc0MiA4LjA4OTAxIDguOTU1MDIgOC4wMTIwN0M4LjkxMjYxIDcuOTM1MTIgOC44ODg3OCA3Ljg0OTMzIDguODg1NDEgNy43NjE1NEM4Ljg3MTQ5IDcuMzkwMDQgOS4wMDMxMiA3LjAwNzIzIDkuMjk2NjcgNi43MTM2N0wxMC4wMzY5IDUuOTczNDZDMTAuMjMwOSA1Ljc3OTM2IDEwLjUzNTQgNS43NTU1MiAxMC43NjA1IDUuOTEyNkMxMS4wMTgzIDYuMDkyNTggMTEuMjU5NyA2LjI5NDg5IDExLjQ4MiA2LjUxNzE4VjYuNTE3MThaTTE2LjQzNjcgMS41NjIxOUMxNC4zNTMzIC0wLjUyMTI0IDEwLjk2MzMgLTAuNTIxNTIyIDguODc5NTQgMS41NjIxOUw2LjUxNzA0IDMuOTI0NjlDNi41MTI4MiAzLjkyODkxIDYuNTA4MjUgMy45MzM0OCA2LjUwNDM5IDMuOTM3N0M0LjQ0NTQyIDYuMDA4MTIgNC40MTY1NiA5LjM3OTIyIDYuNTE3MDQgMTEuNDgxOUM2LjczOTMzIDExLjcwNDIgNi45ODA3NCAxMS45MDY1IDcuMjM4NDggMTIuMDg2NEM3LjQ2MzU1IDEyLjI0MzUgNy43NjgwOCAxMi4yMTk2IDcuOTYyMTQgMTIuMDI1Nkw4LjcwMjMyIDExLjI4NTRDOC45OTU4OCAxMC45OTE4IDkuMTI3NSAxMC42MDkgOS4xMTM1OCAxMC4yMzc1QzkuMTEwMjEgMTAuMTQ5NyA5LjA4NjM4IDEwLjA2MzkgOS4wNDM5OCA5Ljk4Njk2QzkuMDAxNTcgOS45MTAwMSA4Ljk0MTc3IDkuODQ0MDQgOC44NjkzNSA5Ljc5NDMxQzguNzY2OTcgOS43MjM4MiA4LjYzNTkxIDkuNjIyOTIgOC41MDU4IDkuNDkzMDZDNy41MTg4NiA4LjUwNjExIDcuNTE0NzEgNi45MDQxOCA4LjUwNTggNS45MTMwOUwxMC44NjgzIDMuNTUwOTRDMTEuODYxMSAyLjU1ODE3IDEzLjQ4MDQgMi41NjQxNCAxNC40NjU3IDMuNTY4ODdDMTUuNDQxMiA0LjU2MzggMTUuNDEwNCA2LjE2ODEyIDE0LjQyNTEgNy4xNTM0MUwxMy45NjUgNy42MTM1QzEzLjgxMiA3Ljc2NjQzIDEzLjc2MjEgNy45OTI4MyAxMy44MzIgOC4xOTc1MUMxNC4wMzgxIDguODAxOTkgMTQuMTQ5OSA5LjQyNzk1IDE0LjE3MjYgMTAuMDUxQzE0LjE5MDUgMTAuNTM5OSAxNC43ODYzIDEwLjc2OTggMTUuMTMyMiAxMC40MjM5TDE2LjQzNjcgOS4xMTkzNEMxOC41MjA0IDcuMDM2MDIgMTguNTIwNCAzLjY0NTU1IDE2LjQzNjcgMS41NjIxOVYxLjU2MjE5WiIgZmlsbD0iY3VycmVudENvbG9yIiBmaWxsLW9wYWNpdHk9IjAuMjUiLz48L3N2Zz4=") no-repeat left;\n    background-size: contain;\n}\n.clicker__contextMenu[data-v-acf30a34] {\n    border-radius: 10px;\n    padding: 5px;\n    max-width: 100%;\n\n    background-color: white;\n    border: 1px solid var(--red);\n    color: #333;\n    overflow-y: auto;\n}\n',""])},q7nX:function(t,e,n){"use strict";var o=n("ISrG");n.n(o).a},s1UG:function(t,e,n){var o=n("j1RZ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n("SZ7m").default)("71231a00",o,!0,{})},wjDy:function(t,e,n){"use strict";var o=n("0NGO");n.n(o).a},zW5e:function(t,e,n){"use strict";var o=n("a5Qa");n.n(o).a}});
//# sourceMappingURL=graph-5c9a12d834d71cf781e8.js.map