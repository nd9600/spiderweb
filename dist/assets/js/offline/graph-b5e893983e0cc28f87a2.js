!function(t){function e(e){for(var r,a,i=e[0],l=e[1],c=e[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);for(u&&u(e);d.length;)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(r=!1)}r&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},s=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push(["88xZ",1]),n()}({"1F4C":function(t,e,n){var r=n("FbAF");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("34185a9c",r,!0,{})},"3fMe":function(t,e,n){"use strict";var r=n("s1UG");n.n(r).a},"88xZ":function(t,e,n){"use strict";n.r(e);var r=n("oCYn"),o=n("lSNA"),s=n.n(o),a=n("o0o1"),i=n.n(a),l=n("yXPU"),c=n.n(l),u=n("L2JU"),p=n("VphZ"),d=n("9/5/"),h=n.n(d);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={name:"Clicker",computed:g({},Object(u.e)("postsModule",["graphs","selectedGraphIds"]),{},Object(u.c)("postsModule",["titleOrBody"]),{},Object(u.e)("clickerModule",["newLinkSource"]),{showClickButtonMenu:{get:function(){return this.$store.state.clickerModule.showClickButtonMenu},set:function(t){this.setShowClickButtonMenu(t)}},clickMode:{get:function(){return this.$store.state.clickerModule.clickMode},set:function(t){this.setClickMode(t)}},newLinkGraphId:{get:function(){return this.$store.state.clickerModule.newLinkGraphId},set:function(t){this.setNewLinkGraphId(t)}},newLinkType:{get:function(){return this.$store.state.clickerModule.newLinkType},set:function(t){this.setNewLinkType(t)}},shouldShowContextMenu:function(){return"addLink"===this.clickMode}}),created:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.newLinkGraphId=t},methods:g({},Object(u.d)("clickerModule",["setShowClickButtonMenu","setClickMode","setNewLinkSource","setNewLinkTarget","setNewLinkGraphId","setNewLinkType"]),{toggleClickButtonMenu:function(){var t=this.showClickButtonMenu;this.showClickButtonMenu=!this.showClickButtonMenu,t||(this.clickMode="openPosts")}})},m=(n("JR8w"),n("KHd+")),b=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clicker"},[n("button",{staticClass:"clicker__button",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleClickButtonMenu(e)}}},[t._v("\n        +\n    ")]),t._v(" "),n("div",{staticClass:"clicker__container"},[t.showClickButtonMenu?n("div",{staticClass:"clicker__actionButtons"},[n("label",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.clickMode,expression:"clickMode"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.clickMode=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"openPosts"}},[t._v("\n                        Open posts\n                    ")]),t._v(" "),n("option",{attrs:{value:"addLink"}},[t._v("\n                        Add link\n                    ")])])])]):t._e(),t._v(" "),t.shouldShowContextMenu?n("div",{staticClass:"clicker__contextMenu"},["addLink"===t.clickMode?[n("sub",{staticClass:"ml-1 text-xs text-gray-500"},[t._v("\n                    "+t._s(null===t.newLinkSource?"click on a post to choose a source":"will add link on next click")+"\n\n                ")]),t._v(" "),n("sub",{staticClass:"ml-1 text-xs text-gray-500"}),t._v(" "),n("label",{staticClass:"mb-1 block"},[t._v("\n                    Link in graph:\n                    "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.newLinkGraphId,expression:"newLinkGraphId",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.newLinkGraphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])})),0)]),t._v(" "),n("label",{staticClass:"mb-1 block"},[t._v("\n                    link type:\n                    "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.newLinkType,expression:"newLinkType"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newLinkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                            reply\n                        ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                            sidenote\n                        ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                            link\n                        ")])])]),t._v(" "),t.newLinkSource?n("span",[t._v("\n                    Source: "+t._s(t.titleOrBody(t.newLinkSource))+"\n                    "),n("button",{staticClass:"btn btn--secondary",attrs:{type:"button",disabled:null==t.newLinkSource},on:{click:function(e){return t.setNewLinkSource(null)}}},[t._v("\n                        x\n                    ")])]):t._e()]:t._e()],2):t._e()])])}),[],!1,null,"0e672a91",null).exports;function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={name:"OfflineGraph",components:{Clicker:b},data:function(){return{svg:null,rootG:null,zoom:null,linksG:null,nodesG:null,nodesWithCoordinates:{}}},computed:O({},Object(u.e)("settingsModule",["canOpenMultiplePosts"]),{},Object(u.e)("postsModule",["selectedGraphIds"]),{},Object(u.c)("postsModule",["postsInSelectedGraphs","linksInSelectedGraphs","graphColour","titleOrBody","isNeighbour"]),{},Object(u.e)("clickerModule",["showClickButtonMenu","clickMode"]),{selectedPostIds:function(){return this.$store.state.postsModule.selectedPostIds}}),watch:{selectedGraphIds:function(){this.shouldResetZooming=!0,this.debouncedMakeGraphSvg()},postsInSelectedGraphs:function(){this.debouncedMakeGraphSvg()},linksInSelectedGraphs:function(){this.debouncedMakeGraphSvg()}},mounted:function(){var t=this;this.svg=p.f("#graphSvg"),this.rootG=p.f("#graphSvg g"),this.linksG=p.f(".graph__links").attr("stroke","#999").attr("stroke-opacity",.6),this.nodesG=p.f(".graph__nodes").attr("stroke","#fff").attr("stroke-width",1.5),this.setupZooming(),this.$nextTick((function(){t.debouncedMakeGraphSvg()})),this.$root.$on("focusOnPost",this.focusOnPost)},methods:O({},Object(u.d)("postsModule",["selectPostId"]),{},Object(u.d)("clickerModule",["setShowClickButtonMenu","setClickMode"]),{},Object(u.b)("clickerModule",["handlePostClick","handleLinkClick"]),{onSvgClick:function(t){"graphSvg"===t.target.id&&(this.showClickButtonMenu&&this.setShowClickButtonMenu(!1),"openPosts"!==this.clickMode&&this.setClickMode("openPosts"))},debouncedMakeGraphSvg:h()((function(){this.makeGraphSvg()}),250,{leading:!1,trailing:!0}),makeGraphSvg:function(){var t=this,e=JSON.parse(JSON.stringify(this.postsInSelectedGraphs)),n=JSON.parse(JSON.stringify(this.linksInSelectedGraphs)),r=this,o=p.e(e).force("link",p.c(n).id((function(t){return t.id})).distance(200)).force("charge",p.d().strength(-7500)).force("center",p.b(200,100));o.tick(300);var s=this.linksG.selectAll("line").data(n,(function(t){return t.id})).join("line").classed("graph__link",!0).attr("stroke",(function(e){return t.graphColour(e.graph)})).attr("marker-end","url(#arrowhead)").on("click",this.handleLinkClick),a=this.nodesG.selectAll("g").data(e,(function(t){return t.id}));a.exit().remove();var i=a.enter(),l=i.append("g").classed("node",!0);l.append("circle"),l.append("text"),(a=a.merge(i)).selectAll("g").attr("dataset-id",(function(t){return t.id}));var c=p.g(".node").select("circle").classed("node__circle",!0).attr("r",15).attr("title",(function(t){return t.title})),u=p.g(".node").select("text").classed("node__text",!0).attr("text-anchor","end").text((function(e){return t.titleOrBody(e.id)})).on("mouseover",(function(t){p.f(this).style("filter","url(#postHoverFilter)"),p.f(p.f(this).node().parentNode).raise(),c.filter((function(e){return t.id!==e.id&&!r.isNeighbour(t,e)})).style("opacity",.2),u.filter((function(e){return t.id!==e.id&&!r.isNeighbour(t,e)})).style("opacity",.2),s.filter((function(e){return t.id!==e.source.id&&t.id!==e.target.id})).style("opacity",.2)})).on("mouseout",(function(t){p.f(this).style("filter",""),c.style("opacity",1),u.style("opacity",1),s.style("opacity",1)}));p.g(".node *").on("click",this.handlePostClick),o.on("tick",(function(){s.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),c.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),u.attr("x",(function(t){return t.x-6})).attr("y",(function(t){return t.y-4}))})),this.shouldResetZooming&&(this.shouldResetZooming=!1,this.$nextTick((function(){t.resetZoomToCenter()})));var d={},h=!0,f=!1,g=void 0;try{for(var v,m=e[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var b=v.value;d[b.id]=b}}catch(t){f=!0,g=t}finally{try{h||null==m.return||m.return()}finally{if(f)throw g}}this.nodesWithCoordinates=d},setupZooming:function(){var t=this;this.zoom=p.h().scaleExtent([.05,2]).on("zoom",(function(){var e=p.a.transform.x,n=p.a.transform.y,r=p.a.transform.k;t.rootG.attr("transform","translate(".concat(e," ").concat(n,") scale(").concat(r,")"));var o=.5/r,s=o<1?o:1+.35*(o-1),a=Math.min(220,Math.ceil(48*s));document.querySelector(":root").style.setProperty("--text-size",a+"px")})),this.resetZoomToCenter()},resetZoomToCenter:function(){this.svg.call(this.zoom).call(this.zoom.transform,p.i.translate(200,100).scale(.5)).on("wheel",(function(){p.a.preventDefault()}))},focusOnPost:function(t){var e=this.nodesWithCoordinates[t];this.svg.transition().duration(1500).call(this.zoom.transform,p.i.translate(200,100).scale(.5).translate(400-e.x+100,200-e.y+100))}})},_=(n("hZnF"),Object(m.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"h-full w-full pb-4 pr-8 md:pr-16 flex"},[e("svg",{staticClass:"w-full cursor-move border bg-white",attrs:{id:"graphSvg"},on:{click:this.onSvgClick}},[e("defs",[e("marker",{attrs:{id:"arrowhead",viewBox:"-0 -5 10 10",refX:"15",refY:"0",orient:"auto",markerWidth:"2",markerHeight:"2"}},[e("path",{staticStyle:{stroke:"none"},attrs:{d:"M 0,-5 L 10 ,0 L 0,5",fill:"#353535"}})]),this._v(" "),e("filter",{attrs:{id:"postHoverFilter"}},[e("feFlood",{attrs:{"flood-color":"#000"}}),this._v(" "),e("feComponentTransfer",[e("feFuncA",{attrs:{type:"linear",slope:"0.75"}})],1),this._v(" "),e("feComposite",{attrs:{in:"SourceGraphic"}})],1)]),this._v(" "),e("g",{attrs:{transform:"translate(5, 15) scale(0.5)"}},[e("g",{staticClass:"graph__links"}),this._v(" "),e("g",{staticClass:"graph__nodes"})])]),this._v(" "),e("Clicker")],1)}),[],!1,null,null,null).exports);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x={name:"LinkedPosts",props:{post:{type:Object,required:!0}},computed:P({},Object(u.e)("settingsModule",["canOpenMultiplePosts"]),{},Object(u.c)("postsModule",["titleOrBody","postIdsThatLinkToPost"]),{linkedPosts:function(){return this.postIdsThatLinkToPost(this.post.id)}}),methods:P({},Object(u.d)("postsModule",["togglePostId","removeLink"]),{togglePostIdLocal:function(t){this.togglePostId({id:t,canOpenMultiplePosts:this.canOpenMultiplePosts})}})},j=Object(m.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"flex justify-between items-center"},[Object.keys(t.linkedPosts.to).length>0?n("div",t._l(t.linkedPosts.to,(function(e,r){return n("div",{key:r,staticClass:"mb-2"},[n("a",{staticClass:"link text-xs md:text-sm",attrs:{title:"view this post"},on:{click:function(n){return t.togglePostIdLocal(e)}}},[t._v("\n                    "+t._s(t.titleOrBody(e))+"\n                ")]),t._v(" "),n("button",{staticClass:"ml-2 py-1 px-2 btn btn--secondary",attrs:{title:"remove link"},on:{click:function(e){return t.removeLink({id:r})}}},[t._v("\n                    x\n                ")])])})),0):t._e(),t._v(" "),Object.keys(t.linkedPosts.to).length>0?n("h4",{staticClass:"h h--4 mx-1 flex flex-col"},[n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")])]):t._e(),t._v(" "),n("span",[t._v("\n            "+t._s(t.titleOrBody(t.post.id))+"\n        ")]),t._v(" "),Object.keys(t.linkedPosts.from).length>0?n("h4",{staticClass:"h h--4 mx-1 flex flex-col"},[n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")]),t._v(" "),n("span",[t._v("→")])]):t._e(),t._v(" "),Object.keys(t.linkedPosts.from).length>0?n("div",t._l(t.linkedPosts.from,(function(e,r){return n("div",{key:r,staticClass:"mb-2"},[n("a",{staticClass:"link text-xs md:text-sm",on:{click:function(n){return t.togglePostIdLocal(e)}}},[t._v("\n                    "+t._s(t.titleOrBody(e))+"\n                ")]),t._v(" "),n("button",{staticClass:"ml-2 py-1 px-2 btn btn--secondary",attrs:{title:"remove link"},on:{click:function(e){return t.removeLink({id:r})}}},[t._v("\n                    x\n                ")])])})),0):t._e()])])}),[],!1,null,null,null).exports;function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={name:"LinkedGraphs",props:{post:{type:Object,required:!0}},computed:C({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["graphIdsThatIncludeThisPost"]),{linkedGraphs:function(){return this.graphIdsThatIncludeThisPost(this.post.id)}}),methods:C({},Object(u.d)("postsModule",["toggleGraphId","removePostFromGraph"]))},M=Object(m.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.linkedGraphs.length>0?n("div",[n("h4",{staticClass:"h h--4"},[t._v("\n            Graphs that include this post\n        ")]),t._v(" "),t._l(t.linkedGraphs,(function(e){return n("a",{key:e,staticClass:"link block mb-2 text-xs md:text-base",attrs:{title:"show/hide this graph"},on:{click:function(n){return t.toggleGraphId(e)}}},[t._v("\n            "+t._s(t.graphs[e].name)+"\n\n            "),n("button",{staticClass:"ml-8 py-1 px-2 text-xs btn btn--secondary",on:{click:function(n){return t.removePostFromGraph({graphId:e,postId:t.post.id})}}},[t._v("\n                remove from graph\n            ")])])}))],2):t._e()])}),[],!1,null,null,null).exports,T=n("wd/R"),L=n.n(T);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A={name:"PostEditor",props:{post:{type:Object,required:!0},inPostBar:{type:Boolean,default:!1}},data:function(){return{showEditor:!1,showTitleInput:this.post.title.length>0}},computed:D({},Object(u.c)("postsModule",["titleOrBody"]),{title:{get:function(){return this.post.title},set:function(t){this.updatePost(D({},this.post,{title:t,updated_at:L()().format()}))}},body:{get:function(){return this.post.body},set:function(t){this.updatePost(D({},this.post,{body:t,updated_at:L()().format}))}}}),methods:D({},Object(u.d)("postsModule",["updatePost","removePost"]),{toggleTitleInput:function(){this.showTitleInput&&this.title.trim().length>0?this.$refs.inputTitle.focus():this.showTitleInput=!this.showTitleInput},removePostLocal:function(){confirm("Are you sure you want to remove this post? ")&&this.removePost({id:this.post.id})}})},N=Object(m.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flex flex-col"},[n("div",{staticClass:"w-full flex",class:{"justify-center":!t.inPostBar,"justify-start":t.inPostBar}},[n("div",{staticClass:"w-full flex items-center",class:{"md:w-2/3":!t.inPostBar,"justify-between":!t.inPostBar,"justify-start":t.inPostBar}},[t.inPostBar?t._e():n("span",[t._v("\n                "+t._s(t.titleOrBody(t.post.id))+"\n            ")]),t._v(" "),n("span",[n("button",{staticClass:"mt-4 mr-8 px-4 btn btn--primary",on:{click:function(e){t.showEditor=!t.showEditor}}},[t._v("\n                    "+t._s(t.showEditor?"close":"edit")+"\n                ")]),t._v(" "),n("button",{staticClass:"btn btn--secondary",on:{click:t.removePostLocal}},[t._v("\n                    delete\n                ")])])])]),t._v(" "),t.showEditor?n("div",{staticClass:"my-2"},[n("label",{staticClass:"mb-5 flex flex-col"},[n("button",{staticClass:"text-left underline",class:t.title.trim().length>0?"cursor-default":"cursor-pointer",on:{click:function(e){return e.preventDefault(),t.toggleTitleInput(e)}}},[t._v("\n                Title\n            ")]),t._v(" "),t.showTitleInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"inputTitle",staticClass:"p-2 rounded text-gray-800 placeholder-gray-600",attrs:{type:"text",placeholder:"On the Origin of Species",minlength:"0",maxlength:"1000"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}):t._e()]),t._v(" "),n("label",{staticClass:"mb-5 flex flex-col"},[t._v("\n            Body\n            "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body,expression:"body"}],staticClass:"p-2 h-48 rounded text-gray-800 placeholder-gray-600",attrs:{required:"required",minlength:"1",maxlength:"10000"},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})])]):t._e(),t._v(" "),t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex justify-center"},[e("hr",{staticClass:"my-4 w-2/3"})])}],!1,null,"4a4db3e0",null).exports;function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var B,F={name:"PostMaker",data:function(){return{showTitleInput:!1,title:"",body:""}},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.b)("postsModule",["makeNewPost"]),{toggleTitleInput:function(){this.showTitleInput&&this.title.trim().length>0?this.$refs.inputTitle.focus():this.showTitleInput=!this.showTitleInput},makePost:(B=c()(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={title:this.title,body:this.body,created_at:L()().format(),updated_at:L()().format()},t.next=3,this.makeNewPost(e);case 3:n=t.sent,this.resetNewPost(),this.$emit("madePost",n);case 6:case"end":return t.stop()}}),t,this)}))),function(){return B.apply(this,arguments)}),resetNewPost:function(){this.title="",this.body=""}})},$=(n("TycU"),Object(m.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"mb-5 flex flex-col"},[n("button",{staticClass:"text-left underline",on:{click:function(e){return e.preventDefault(),t.toggleTitleInput(e)}}},[t._v("\n            Title\n        ")]),t._v(" "),t.showTitleInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"inputTitle",staticClass:"p-2 rounded text-gray-800 placeholder-gray-600",attrs:{type:"text",placeholder:"On the Origin of Species",minlength:"0",maxlength:"1000"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}):t._e()]),t._v(" "),n("label",{staticClass:"mb-5 flex flex-col"},[t._v("\n        Body\n        "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body,expression:"body"}],staticClass:"p-2 h-48 rounded text-gray-800 placeholder-gray-600 textareaBody",attrs:{placeholder:"But with regard to the material world, we can at least go so far as this—we can perceive that events are brought about not by insulated interpositions of Divine power, exerted in each particular case, but by the establishment of general laws",required:"required",minlength:"1",maxlength:"10000"},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"mb-5 btn btn--primary",attrs:{type:"submit",disabled:0===t.title.trim().length&&0===t.body.trim().length},on:{click:t.makePost}},[t._v("\n        Create\n    ")])])}),[],!1,null,"4a313601",null).exports);function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={name:"AddLinkedPost",components:{PostMaker:$},props:{post:{type:Object,required:!0}},data:function(){return{show:!1,graphId:1,fromOrToNewPost:"to",linkType:"reply"}},computed:J({},Object(u.e)("postsModule",["graphs","selectedGraphIds"]),{},Object(u.c)("postsModule",["titleOrBody"])),created:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.graphId=t},methods:J({},Object(u.d)("postsModule",["addLink"]),{toggleFromOrToTheNewPost:function(){var t="from"===this.fromOrToNewPost?"to":"from";this.fromOrToNewPost=t},addLinkToPost:function(t){var e="from"===this.fromOrToNewPost?t.id:this.post.id,n="to"===this.fromOrToNewPost?t.id:this.post.id;this.addLink({source:e,target:n,graph:this.graphId,type:this.linkType})}})},z={name:"Actions",components:{PostEditor:N,AddLinkedPost:Object(m.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("button",{staticClass:"h h--3 mb-5 underline",attrs:{type:"button"},on:{click:function(e){t.show=!t.show}}},[t._v("\n        Add linked post\n    ")]),t._v(" "),t.show?[n("label",{staticClass:"mb-3 block"},[t._v("\n            Link in graph:\n            "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),0)]),t._v(" "),n("label",{staticClass:"mb-3 block"},[t._v("\n            "+t._s(t.titleOrBody(t.post.id))+"\n            "),n("button",{staticClass:"mx-4 link",attrs:{type:"button"},on:{click:t.toggleFromOrToTheNewPost}},[t._v("\n                "+t._s("to"===t.fromOrToNewPost?"→":"←")+"\n            ")]),t._v("\n            [the new post]\n        ")]),t._v(" "),n("label",{staticClass:"mb-3 block"},[t._v("\n            link type:\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.linkType,expression:"linkType"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.linkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                    reply\n                ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                    sidenote\n                ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                    link\n                ")])])]),t._v(" "),n("h4",{staticClass:"mt-5 h h--4"},[t._v("\n            Add post\n        ")]),t._v(" "),n("hr",{staticClass:"mb-1"}),t._v(" "),n("post-maker",{on:{madePost:t.addLinkToPost}})]:t._e()],2)}),[],!1,null,null,null).exports},props:{post:{type:Object,required:!0}}};n("SViF");function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Z={name:"Post",components:{LinkedPosts:j,LinkedGraphs:M,Actions:Object(m.a)(z,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"actionsContainer"},[e("PostEditor",{attrs:{post:this.post,inPostBar:!0}}),this._v(" "),e("AddLinkedPost",{attrs:{post:this.post}})],1)}),[],!1,null,"63d36f1e",null).exports},props:{post:{type:Object,required:!0}},data:function(){return{bottomTab:""}},computed:R({},Object(u.e)("settingsModule",["postWidth"]),{},Object(u.c)("postsModule",["postIdsInSelectedGraphs","postIdsThatLinkToPost"]),{hasLinkedPosts:function(){var t=this.postIdsThatLinkToPost(this.post.id);return Object.keys(t.to).length>0||Object.keys(t.from).length>0},isVisibleInGraph:function(){return this.postIdsInSelectedGraphs.includes(this.post.id)}}),methods:R({},Object(u.d)("postsModule",["unselectPostId"]),{toggleBottomTab:function(t){this.bottomTab=this.bottomTab===t?"":t}})},V=(n("M23k"),Object(m.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"relative post",style:{"min-width":t.postWidth+"vw"}},[n("div",[n("button",{staticClass:"absolute right-0 mr-2 btn btn--primary opacity-25 hover:opacity-100",on:{click:function(e){return t.unselectPostId(t.post.id)}}},[t._v("\n            x\n        ")]),t._v(" "),t.post.title.length>0?n("h3",{staticClass:"h h--3 whitespace-pre-wrap"},[t._v(t._s(t.post.title))]):t._e(),t._v(" "),n("p",{staticClass:"whitespace-pre-wrap font-sans"},[t._v(t._s(t.post.body))])]),t._v(" "),n("div",[n("div",[n("button",{staticClass:"post__dragHandle bottomLink bottomLink--unselected",attrs:{type:"button",title:"click and drag this to move the post"}},[t._v("\n                move\n            ")]),t._v(" "),n("button",{staticClass:"focusButton bottomLink bottomLink--unselected",class:t.isVisibleInGraph?"":"line-through",attrs:{type:"button",title:"focus on the post in the viewer above",disabled:!t.isVisibleInGraph},on:{click:function(e){return t.$root.$emit("focusOnPost",t.post.id)}}},[t._v("\n                focus\n            ")]),t._v(" "),n("button",{staticClass:"bottomLink",class:["linked-posts"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",t.hasLinkedPosts?"":"line-through"],attrs:{type:"button",title:"posts that link to or from this one",disabled:!t.hasLinkedPosts},on:{click:function(e){return t.toggleBottomTab("linked-posts")}}},[t._v("\n                linked posts\n            ")]),t._v(" "),n("button",{staticClass:"bottomLink",class:"linked-graphs"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",attrs:{title:"graphs that include this post",type:"button"},on:{click:function(e){return t.toggleBottomTab("linked-graphs")}}},[t._v("\n                linked graphs\n            ")]),t._v(" "),n("button",{staticClass:"bottomLink",class:"actions"===t.bottomTab?"bottomLink--selected":"bottomLink--unselected",attrs:{title:"things you can do with this post",type:"button"},on:{click:function(e){return t.toggleBottomTab("actions")}}},[t._v("\n                actions\n            ")])]),t._v(" "),""!==t.bottomTab?n(t.bottomTab,{tag:"component",attrs:{post:t.post},on:{close:function(e){t.bottomTab=""}}}):t._e()],1)])}),[],!1,null,"408e8c65",null).exports),q=n("MQ60");function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={name:"PostBar",components:{Post:V,VueDraggable:n.n(q).a},computed:Y({},Object(u.e)("postsModule",["posts"]),{selectedPostIds:{get:function(){return this.$store.state.postsModule.selectedPostIds},set:function(t){this.setSelectedPostIds(t)}}}),methods:Y({},Object(u.d)("postsModule",["setSelectedPostIds"]))};n("3fMe");function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var tt={name:"Viewer",components:{OfflineGraph:_,PostBar:Object(m.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VueDraggable",{staticClass:"w-full flex items-start overflow-x-auto postBar",attrs:{handle:".post__dragHandle"},model:{value:t.selectedPostIds,callback:function(e){t.selectedPostIds=e},expression:"selectedPostIds"}},t._l(t.selectedPostIds,(function(e){return n("post",{key:e,staticClass:"m-2 p-2",attrs:{post:t.posts[e]}})})),1)}),[],!1,null,null,null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)("settingsModule",["graphAndPostsDirection","graphHeight","postBarHeight"]),{},Object(u.e)("postsModule",["graphs"]),{selectedGraphIds:{get:function(){return this.$store.state.postsModule.selectedGraphIds},set:function(t){this.$store.commit("postsModule/setSelectedGraphIds",t)}}})},et=Object(m.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"mb-4 flex flex-col"},[n("span",{staticClass:"block h h--4"},[t._v("\n            Graphs\n        ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.selectedGraphIds,expression:"selectedGraphIds",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700",attrs:{multiple:"",size:"7"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.selectedGraphIds=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)]),t._v(" "),n("div",{staticClass:"flex",style:{"flex-direction":"horizontal"===t.graphAndPostsDirection?"row":"column"}},[n("offline-graph",{style:{"min-height":t.graphHeight+"vh"}}),t._v(" "),n("PostBar",{style:{"min-height":t.postBarHeight+"vh"}})],1)])}),[],!1,null,null,null).exports;function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ot={name:"GraphEditor",props:{graphId:{type:String,required:!0}},data:function(){return{postIdToAddToGraph:null,newGraphName:""}},computed:rt({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["postIds","titleOrBody"]),{graph:function(){return this.graphs[this.graphId]},possiblePostIdsToAddToGraph:function(){var t=this;return this.postIds.filter((function(e){return!t.graph.nodes.includes(e)}))}}),methods:rt({},Object(u.d)("postsModule",["addPostToGraph","removePostFromGraph","changeGraphName","removeGraph"]),{addPostToGraphLocal:function(){this.addPostToGraph({graphId:this.graphId,postId:this.postIdToAddToGraph}),this.postIdToAddToGraph=null},changeGraphNameLocal:function(){0!==this.newGraphName.trim().length&&(this.changeGraphName({graphId:this.graphId,newGraphName:this.newGraphName}),this.newGraphName="")}})};function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var it={name:"Graphs",components:{GraphEditor:Object(m.a)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex justify-between"},[n("h3",{staticClass:"h h--3"},[t._v("\n            "+t._s(t.graph.name)+"\n        ")]),t._v(" "),1!==t.graphId?n("button",{staticClass:"py-1 px-2 btn btn--secondary",on:{click:function(e){return t.removeGraph(t.graphId)}}},[t._v("\n            Remove\n        ")]):t._e()]),t._v(" "),n("div",[n("span",{staticClass:"font-bold"},[t._v("\n            Posts\n        ")]),t._v(" "),t._l(t.graph.nodes,(function(e){return n("span",{key:e,staticClass:"flex justify-between items-center mb-2"},[t._v("\n            "+t._s(t.titleOrBody(e))+"\n\n            "),n("button",{staticClass:"py-1 px-2 btn btn--secondary",on:{click:function(n){return t.removePostFromGraph({graphId:t.graphId,postId:e})}}},[t._v("\n                Remove\n            ")])])})),t._v(" "),t.possiblePostIdsToAddToGraph.length>0?n("div",{staticClass:"mb-4"},[n("label",[n("span",{staticClass:"block h h--4"},[t._v("\n                    Add post to graph\n                ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.postIdToAddToGraph,expression:"postIdToAddToGraph",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.postIdToAddToGraph=e.target.multiple?n:n[0]}}},t._l(t.possiblePostIdsToAddToGraph,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                        "+t._s(t.titleOrBody(e))+"\n                    ")])})),0)]),t._v(" "),n("button",{staticClass:"py-1 px-2 btn btn--secondary",attrs:{disabled:null===t.postIdToAddToGraph},on:{click:t.addPostToGraphLocal}},[t._v("\n                Add\n            ")])]):t._e(),t._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newGraphName,expression:"newGraphName"}],staticClass:"mb-2 p-2 rounded text-gray-800 text-base placeholder-gray-600",attrs:{type:"text",placeholder:"foo graph"},domProps:{value:t.newGraphName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeGraphNameLocal(e)},input:function(e){e.target.composing||(t.newGraphName=e.target.value)}}}),t._v(" "),n("button",{staticClass:"py-1 px-2 btn btn--secondary",attrs:{disabled:0===t.newGraphName.trim().length},on:{click:t.changeGraphNameLocal}},[t._v("\n                Change graph name\n            ")])])],2)])}),[],!1,null,null,null).exports},data:function(){return{newGraphName:""}},computed:at({},Object(u.e)("postsModule",["graphs"]),{},Object(u.c)("postsModule",["postIds","titleOrBody"])),methods:at({},Object(u.d)("postsModule",["makeNewGraph"]),{makeNewGraphLocal:function(){this.makeNewGraph(this.newGraphName),this.newGraphName=""}})},lt=Object(m.a)(it,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[Object.keys(t.graphs).length>0?n("section",[n("h1",{staticClass:"h h--1"},[t._v("\n            Graphs\n        ")]),t._v(" "),n("hr",{staticClass:"my-5"}),t._v(" "),n("h2",{staticClass:"h h--2"},[n("label",{staticClass:"flex flex-col items-start"},[t._v("\n                Make new graph\n                "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newGraphName,expression:"newGraphName"}],staticClass:"mb-2 p-2 rounded text-gray-800 text-base placeholder-gray-600",attrs:{type:"text",placeholder:"foo graph"},domProps:{value:t.newGraphName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.makeNewGraphLocal(e)},input:function(e){e.target.composing||(t.newGraphName=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{type:"submit",disabled:0===t.newGraphName.trim().length},on:{click:t.makeNewGraphLocal}},[t._v("\n                    Create\n                ")])])]),t._v(" "),n("hr",{staticClass:"my-5"}),t._v(" "),n("section",[n("h2",{staticClass:"h h--2"},[t._v("\n                Edit graphs\n            ")]),t._v(" "),t._l(t.graphs,(function(t,e){return n("GraphEditor",{key:e,staticClass:"m-4 p-4 border",attrs:{graphId:e}})}))],2)]):t._e()])}),[],!1,null,null,null).exports;function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var ut={name:"Posts",components:{PostMaker:$,PostEditor:N},data:function(){return{shouldShowPosts:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)("postsModule",["posts"]))},pt=Object(m.a)(ut,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("section",[n("h1",{staticClass:"h h--1"},[t._v("\n            Add post\n        ")]),t._v(" "),n("hr",{staticClass:"mb-5"}),t._v(" "),n("post-maker")],1),t._v(" "),n("hr",{staticClass:"mb-5"}),t._v(" "),n("div",[Object.keys(t.posts).length>0?n("button",{staticClass:"mb-5 btn btn--secondary",on:{click:function(e){t.shouldShowPosts=!t.shouldShowPosts}}},[t._v("\n            "+t._s(t.shouldShowPosts?"Hide":"Show")+" editors\n        ")]):t._e(),t._v(" "),t.shouldShowPosts?[n("h2",{staticClass:"h h--2"},[t._v("\n                Edit posts\n            ")]),t._v(" "),t._l(t.posts,(function(t){return n("post-editor",{key:t.id,attrs:{post:t}})}))]:t._e()],2),t._v(" "),n("hr",{staticClass:"mb-5"})])}),[],!1,null,"ed3f1f2a",null).exports;function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ft={name:"PostLinker",props:{post:{type:Object,required:!0}},data:function(){return{graphId:1,source:null,linkType:"reply",showTypeSelect:!1}},computed:ht({},Object(u.e)("postsModule",["graphs","posts","selectedGraphIds"]),{},Object(u.c)("postsModule",["postIds","graphNames","titleOrBody"]),{possibleSources:function(){var t=this;return this.postIds.filter((function(e){return e!==t.post.id}))}}),mounted:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.graphId=t},methods:ht({},Object(u.d)("postsModule",["addLink"]),{linkPostLocal:function(){this.addLink({source:this.source,target:this.post.id,graph:this.graphId,type:this.linkType})}})},gt=Object(m.a)(ft,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"h h--3"},[t._v("\n        "+t._s(t.post.title.length>0?t.post.title:t.post.body.substr(0,20))+"\n    ")]),t._v(" "),n("p",[t._v("\n        Link in graph\n        "),n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),0)]),t._v(" "),n("span",{staticClass:"font-bold"},[t._v("from")]),t._v(" post\n        "),n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.source,expression:"source",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.source=e.target.multiple?n:n[0]}}},t._l(t.possibleSources,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                    "+t._s(t.titleOrBody(e))+"\n                ")])})),0)]),t._v(" "),n("span",{staticClass:"font-bold"},[t._v("to")]),t._v(" "+t._s(t.post.title.length>0?t.post.title:t.post.body.substr(0,20))+"\n\n        "),[n("label",[n("br"),t._v(" "),n("button",{staticClass:"text-left underline",on:{click:function(e){e.preventDefault(),t.showTypeSelect=!t.showTypeSelect}}},[t._v("\n                    with type\n                ")]),t._v(" "),t.showTypeSelect?n("select",{directives:[{name:"model",rawName:"v-model",value:t.linkType,expression:"linkType"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.linkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                        reply\n                    ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                        sidenote\n                    ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                        link\n                    ")])]):t._e()])]],2),t._v(" "),n("button",{staticClass:"mt-2 btn btn--primary",attrs:{disabled:0===t.graphId.length||null===t.source},on:{click:t.linkPostLocal}},[t._v("\n        Link\n    ")]),t._v(" "),t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex justify-center"},[e("hr",{staticClass:"my-4 w-2/3"})])}],!1,null,null,null).exports;function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bt={name:"LinkMaker",data:function(){return{graphId:1,source:null,target:null,linkType:"reply",showTypeSelect:!1}},computed:mt({},Object(u.e)("postsModule",["graphs","posts","selectedGraphIds"]),{},Object(u.c)("postsModule",["postIds","titleOrBody"]),{possibleTargets:function(){var t=this;return this.postIds.filter((function(e){return e!==t.source}))}}),created:function(){var t=this.selectedGraphIds.length>0?this.selectedGraphIds[0]:1;this.graphId=t},methods:mt({},Object(u.d)("postsModule",["addLink"]),{linkPostLocal:function(){this.addLink({source:this.source,target:this.target,graph:this.graphId,type:this.linkType}),this.source=null,this.target=null,this.graphId=null,this.graphId="reply",this.showTypeSelect=!1}})},yt=Object(m.a)(bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h2",{staticClass:"h h--2"},[t._v("\n        Add new link\n    ")]),t._v(" "),n("table",{staticClass:"w-full"},[t._m(0),t._v(" "),n("tbody",[n("tr",[n("td",[n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.source,expression:"source",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.source=e.target.multiple?n:n[0]}}},t._l(t.postIds,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                                "+t._s(t.titleOrBody(e))+"\n                            ")])})),0)])]),t._v(" "),n("td",[n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.target,expression:"target",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.target=e.target.multiple?n:n[0]}}},t._l(t.possibleTargets,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                                "+t._s(t.titleOrBody(e))+"\n                            ")])})),0)])]),t._v(" "),n("td",[n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v("\n                                "+t._s(e.name)+"\n                            ")])})),0)])]),t._v(" "),n("td",[n("label",[t.showTypeSelect?n("select",{directives:[{name:"model",rawName:"v-model",value:t.linkType,expression:"linkType"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.linkType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                                reply\n                            ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                                sidenote\n                            ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                                link\n                            ")])]):n("button",{staticClass:"text-left underline",on:{click:function(e){e.preventDefault(),t.showTypeSelect=!t.showTypeSelect}}},[t._v("\n                            with type\n                        ")])])])])])]),t._v(" "),n("button",{staticClass:"mt-2 btn btn--primary",attrs:{disabled:0===t.graphId.length||null===t.target},on:{click:t.linkPostLocal}},[t._v("\n        Link\n    ")]),t._v(" "),t._m(1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",[this._v("Source")]),this._v(" "),e("td",[this._v("Target")]),this._v(" "),e("td",[this._v("Graph")]),this._v(" "),e("td")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex justify-center"},[e("hr",{staticClass:"my-4 w-2/3"})])}],!1,null,null,null).exports;function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _t={name:"LinkEditor",props:{link:{type:Object,required:!0}},data:function(){return{shouldShowContent:!1,graphId:this.link.graph,source:this.link.source,target:this.link.target,type:this.link.type}},computed:kt({},Object(u.e)("postsModule",["graphs","posts","selectedGraphNames"]),{},Object(u.c)("postsModule",["postIds","graphNames","titleOrBody"]),{possibleTargets:function(){var t=this;return this.postIds.filter((function(e){return e!==t.source}))}}),watch:{graphId:"updateLinkLocal",source:"updateLinkLocal",target:"updateLinkLocal",type:"updateLinkLocal"},created:function(){var t=this;setTimeout((function(){t.shouldShowContent=!0}),0)},methods:kt({},Object(u.d)("postsModule",["updateLink","removeLink"]),{updateLinkLocal:function(){this.updateLink({id:this.link.id,graph:this.graphId,source:this.source,target:this.target,type:this.type,updated_at:L()().format()})},removeLinkLocal:function(){this.removeLink({id:this.link.id})}})};function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Pt={name:"Links",components:{UnlinkedPostLinker:gt,LinkMaker:yt,LinkEditor:Object(m.a)(_t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[t.shouldShowContent?[n("td",[n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.source,expression:"source",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.source=e.target.multiple?n:n[0]}}},t._l(t.postIds,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                        "+t._s(t.titleOrBody(e))+"\n                    ")])})),0)])]),t._v(" "),n("td",[n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.target,expression:"target",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.target=e.target.multiple?n:n[0]}}},t._l(t.possibleTargets,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                        "+t._s(t.titleOrBody(e))+"\n                    ")])})),0)])]),t._v(" "),n("td",[n("label",[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.graphId,expression:"graphId",modifiers:{number:!0}}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.graphId=e.target.multiple?n:n[0]}}},t._l(t.graphs,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])})),0)])]),t._v(" "),n("td",[n("label",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"reply"}},[t._v("\n                        reply\n                    ")]),t._v(" "),n("option",{attrs:{value:"sidenote"}},[t._v("\n                        sidenote\n                    ")]),t._v(" "),n("option",{attrs:{value:"link"}},[t._v("\n                        link\n                    ")])])])]),t._v(" "),n("td",{staticClass:"flex justify-center"},[n("button",{staticClass:"py-1 px-2 btn btn--secondary",on:{click:t.removeLinkLocal}},[t._v("\n                x\n            ")])])]:[t._v("\n        loading...\n    ")]],2)}),[],!1,null,null,null).exports},data:function(){return{shouldShowLinks:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)("postsModule",["posts","links"]),{},Object(u.c)("postsModule",["unlinkedPosts"]))},xt=Object(m.a)(Pt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col items-start"},[n("h1",{staticClass:"h h--1"},[t._v("\n        Link posts\n    ")]),t._v(" "),n("hr",{staticClass:"mb-5"}),t._v(" "),t.unlinkedPosts.length>0?n("section",{staticClass:"w-full"},[n("h2",{staticClass:"h h--2",attrs:{title:"posts that aren't in any graph yet"}},[t._v("\n            Unlinked posts\n        ")]),t._v(" "),t._l(t.unlinkedPosts,(function(t){return n("UnlinkedPostLinker",{key:t.id,attrs:{post:t}})}))],2):t._e(),t._v(" "),n("LinkMaker",{staticClass:"w-full"}),t._v(" "),Object.keys(t.links).length>0?n("button",{staticClass:"btn btn--secondary",on:{click:function(e){t.shouldShowLinks=!t.shouldShowLinks}}},[t._v("\n        "+t._s(t.shouldShowLinks?"Hide":"Show")+" links\n    ")]):t._e(),t._v(" "),t.shouldShowLinks?n("section",{staticClass:"w-full"},[n("h2",{staticClass:"h h--2"},[t._v("\n            Links\n        ")]),t._v(" "),n("table",{staticClass:"w-full text-sm"},[t._m(0),t._v(" "),n("tbody",t._l(t.links,(function(t){return n("LinkEditor",{key:t.id,attrs:{link:t}})})),1)])]):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("td",[t._v("Source")]),t._v(" "),n("td",[t._v("Target")]),t._v(" "),n("td",[t._v("Graph")]),t._v(" "),n("td",[t._v("Type")]),t._v(" "),n("td",[t._v("Remove")])])])}],!1,null,null,null).exports;function jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ct,St={name:"LoadSave",data:function(){return{fileToImport:null,shouldImportData:!1,shouldImportSettings:!1,shouldTakeDataFrom:"local"}},computed:It({},Object(u.c)(["storageObject"]),{fileToImportIsValid:function(){return null!==this.fileToImport&&"application/json"===this.fileToImport.type}}),methods:It({},Object(u.b)(["saveStateToLocalStorage","saveStateToStorage","loadStateFromStorage","importData","importSettings"]),{onFileUpload:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length&&!(e.length>1)){var n=e[0];this.fileToImport=e[0],"application/json"===n.type||alert("You must upload a JSON file exported by the 'export' button")}},importState:(Ct=c()(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fileToImport.text();case 2:if(e=t.sent,"postsModule"in(n=JSON.parse(e))&&"settingsModule"in n&&"firebaseModule"in n){t.next=7;break}return alert("Imported file isn't valid"),t.abrupt("return");case 7:if(!this.shouldImportData){t.next=10;break}return t.next=10,this.importData(n);case 10:if(!this.shouldImportSettings){t.next=18;break}if(this.shouldImportData){t.next=16;break}return t.next=14,this.importSettings({storageObject:n,shouldTakeDataFrom:this.shouldTakeDataFrom});case 14:t.next=18;break;case 16:return t.next=18,this.importSettings({storageObject:n,shouldTakeDataFrom:null});case 18:return this.fileToImport=null,t.next=21,this.saveStateToLocalStorage();case 21:case"end":return t.stop()}}),t,this)}))),function(){return Ct.apply(this,arguments)}),exportState:function(){var t=new Blob([JSON.stringify(this.storageObject)],{type:"application/json"}),e=L()().format("Y-MM-DD_HH:mm:ss");this.downloadData(t,"spiderwebExport-".concat(e,".json"))},downloadData:function(t,e){var n=document.createElement("a");document.body.appendChild(n),n.style="display: none";var r=window.URL.createObjectURL(t);n.href=r,n.download=e,n.click(),window.URL.revokeObjectURL(r)}})},Mt=Object(m.a)(St,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"flex justify-around"},[n("button",{staticClass:"btn btn--primary",on:{click:t.saveStateToStorage}},[t._v("\n                Save\n            ")])]),t._v(" "),n("div",{staticClass:"mt-8 flex justify-around items-start"},[n("div",{staticClass:"inline-block"},[t.fileToImportIsValid?n("div",{staticClass:"flex flex-col items-start"},[n("label",[t._v("\n                        Import data\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shouldImportData,expression:"shouldImportData"}],staticClass:"ml-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.shouldImportData)?t._i(t.shouldImportData,null)>-1:t.shouldImportData},on:{change:function(e){var n=t.shouldImportData,r=e.target,o=!!r.checked;if(Array.isArray(n)){var s=t._i(n,null);r.checked?s<0&&(t.shouldImportData=n.concat([null])):s>-1&&(t.shouldImportData=n.slice(0,s).concat(n.slice(s+1)))}else t.shouldImportData=o}}})]),t._v(" "),n("label",[t._v("\n                        Import settings\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shouldImportSettings,expression:"shouldImportSettings"}],staticClass:"ml-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.shouldImportSettings)?t._i(t.shouldImportSettings,null)>-1:t.shouldImportSettings},on:{change:function(e){var n=t.shouldImportSettings,r=e.target,o=!!r.checked;if(Array.isArray(n)){var s=t._i(n,null);r.checked?s<0&&(t.shouldImportSettings=n.concat([null])):s>-1&&(t.shouldImportSettings=n.slice(0,s).concat(n.slice(s+1)))}else t.shouldImportSettings=o}}})]),t._v(" "),n("p",[t.shouldImportData||t.shouldImportSettings?t._e():n("sub",{staticClass:"text-gray-500"},[t._v("\n                            (you need to import data and/or settings)\n                        ")])]),t._v(" "),t.shouldImportSettings&&!t.shouldImportData?n("label",[t._v("\n                        If changing storage method, take data from\n                        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldTakeDataFrom,expression:"shouldTakeDataFrom"}],staticClass:"p-2 rounded text-gray-700 bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldTakeDataFrom=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"local"}},[t._v("\n                                Local storage\n                            ")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("\n                                Firebase\n                            ")])])]):t._e(),t._v(" "),t._m(0),t._v(" "),t._m(1)]):t._e(),t._v(" "),n("label",[n("button",{staticClass:"btn btn--secondary",on:{click:function(e){return t.$refs.fileInput.click()}}},[t._v("\n                        Upload\n                    ")]),t._v(" "),n("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",accept:"application/json"},on:{change:t.onFileUpload}})]),t._v(" "),n("button",{staticClass:"btn btn--primary",attrs:{disabled:!t.fileToImportIsValid||!t.shouldImportData&&!t.shouldImportSettings},on:{click:t.importState}},[t._v("\n                    Import\n                ")])]),t._v(" "),n("button",{staticClass:"btn btn--primary",on:{click:t.exportState}},[t._v("\n                Export\n            ")])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("sub",{staticClass:"text-gray-500"},[this._v("\n                            The file you're importing must be like this:\n                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"33vh"}},[e("code",[this._v('{\n    "postsModule": {\n        "posts": {},\n        "links": {},\n        "graphs": {\n            "1": {\n                "id": 1,\n                "name": "default",\n                "nodes": [],\n                "colour": "black"\n            }\n        },\n        "selectedPostIds": [],\n        "selectedGraphIds": []\n    },\n    "settingsModule": {\n        "shouldAutosave": true,\n        "storageMethod": "local",\n        "canOpenMultiplePosts": true,\n        "graphHeight": 66,\n        "postBarHeight": 66\n    },\n    "firebaseModule": {\n        "firebaseConfig": {\n            "apiKey": "x",\n            "authDomain": "y",\n            "databaseURL": "z",\n            "projectId": "xy",\n            "storageBucket": "yz",\n            "messagingSenderId": "xyz",\n            "appId": "xx"\n        }\n    }\n}')])])}],!1,null,"a4f14184",null).exports;function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Lt={name:"Settings",data:function(){return{storageMethodInComponent:"local",shouldTakeDataFrom:"local"}},computed:{shouldAutosave:{get:function(){return this.$store.state.settingsModule.shouldAutosave},set:function(t){this.setShouldAutosave(t)}},storageMethod:function(){return this.$store.state.settingsModule.storageMethod},firebaseConfig:{get:function(){return JSON.stringify(this.$store.state.firebaseModule.firebaseConfig)},set:function(t){try{this.setFirebaseConfig(JSON.parse(t))}catch(t){alert('Firebase config isn\'t formatted correctly, it should be like this: {"apiKey":"xx","authDomain":"x.firebaseapp.com","databaseURL":"https://x.firebaseio.com","projectId":"spiderweb-e49bd","storageBucket":"x.appspot.com","messagingSenderId":"123","appId":"xyz"}')}}},canOpenMultiplePosts:{get:function(){return this.$store.state.settingsModule.canOpenMultiplePosts},set:function(t){this.setCanOpenMultiplePosts(t)}},graphAndPostsDirection:{get:function(){return this.$store.state.settingsModule.graphAndPostsDirection},set:function(t){this.setGraphAndPostsDirection(t)}},graphHeight:{get:function(){return this.$store.state.settingsModule.graphHeight},set:function(t){this.setGraphHeight(t)}},postBarHeight:{get:function(){return this.$store.state.settingsModule.postBarHeight},set:function(t){this.setPostBarHeight(t)}},postWidth:{get:function(){return this.$store.state.settingsModule.postWidth},set:function(t){this.setPostWidth(t)}}},created:function(){this.storageMethodInComponent=this.storageMethod},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.d)("settingsModule",["setShouldAutosave","setCanOpenMultiplePosts","setGraphAndPostsDirection","setGraphHeight","setPostBarHeight","setPostWidth"]),{},Object(u.b)("settingsModule",["setStorageMethod"]),{},Object(u.b)("firebaseModule",["setFirebaseConfig"]),{changeStorageMethod:function(){this.setStorageMethod({storageMethod:this.storageMethodInComponent,shouldTakeDataFrom:this.shouldTakeDataFrom})}})};n("jjuK");function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Dt={name:"OfflineApp",components:{Viewer:et,Graphs:lt,Posts:pt,Links:xt,LoadSave:Mt,Settings:Object(m.a)(Lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flex flex-col items-start"},[n("div",{staticClass:"setting"},[n("label",[t._v("\n            Data\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldAutosave,expression:"shouldAutosave"}],staticClass:"p-2 rounded text-red bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldAutosave=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:!0}},[t._v("\n                    should\n                ")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("\n                    shouldn't\n                ")])]),t._v("\n            be saved automatically when something changes\n        ")]),t._v(" "),t.shouldAutosave?t._e():n("sub",{staticClass:"text-gray-500"},[t._v('\n            (you\'ll need to press "save" in the "load/save" tab)\n        ')])]),t._v(" "),n("div",{staticClass:"setting flex flex-col",class:{"w-full md:w-1/2":"firebase"===t.storageMethod}},[n("div",[n("label",[t._v("\n                Data should be stored using\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.storageMethodInComponent,expression:"storageMethodInComponent"}],staticClass:"ml-4 p-2 rounded text-red bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.storageMethodInComponent=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"local"}},[t._v("Local storage")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("Firebase")])])]),t._v(" "),"firebase"===t.storageMethodInComponent?n("sub",{staticClass:"ml-1 text-xs text-gray-500"},[t._v("\n                copy your Firebase config from "),n("a",{staticClass:"link",attrs:{href:"https://firebase.google.com/docs/web/setup?authuser=0#config-object",target:"_blank"}},[t._v("here")]),t._v(", it must be like "),n("pre",{staticClass:"inline bg-red-700 text-white p-1"},[t._v('{"apiKey":"xyz",..}')])]):t._e(),t._v(" "),t.storageMethodInComponent!==t.storageMethod?n("div",{staticClass:"flex flex-col items-start"},[n("label",[t._v("\n                    When I change from storing data using "),n("span",{staticClass:"italic"},[t._v(t._s("local"===t.storageMethod?"Local storage":"Firebase"))]),t._v(" to "),n("span",{staticClass:"italic"},[t._v(t._s("local"===t.storageMethodInComponent?"Local storage":"Firebase"))]),t._v(", data should be taken from\n                    "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shouldTakeDataFrom,expression:"shouldTakeDataFrom"}],staticClass:"p-2 rounded text-red bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shouldTakeDataFrom=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"local"}},[t._v("\n                            Local storage\n                        ")]),t._v(" "),n("option",{attrs:{value:"firebase"}},[t._v("\n                            Firebase\n                        ")])])]),t._v(" "),n("button",{staticClass:"btn btn--primary",on:{click:t.changeStorageMethod}},[t._v("\n                    Change storage method\n                ")])]):t._e()]),t._v(" "),"firebase"===t.storageMethodInComponent?[n("pre",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.firebaseConfig,expression:"firebaseConfig"}],staticClass:"p-2 w-full h-48 rounded text-gray-800 placeholder-gray-600",attrs:{required:"required"},domProps:{value:t.firebaseConfig},on:{input:function(e){e.target.composing||(t.firebaseConfig=e.target.value)}}})])]:t._e()],2),t._v(" "),n("div",{staticClass:"setting"},[n("label",[t._v("\n            When I already have a post open in the viewer, and I click on a second one, the second one should\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.canOpenMultiplePosts,expression:"canOpenMultiplePosts"}],staticClass:"p-2 rounded text-red bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.canOpenMultiplePosts=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:!0}},[t._v("\n                    be opened as well\n                ")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("\n                    replace the already-open one\n                ")])])])]),t._v(" "),n("div",{staticClass:"setting"},[n("label",{staticClass:"block"},[t._v("\n            The viewer should be oriented like this\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.graphAndPostsDirection,expression:"graphAndPostsDirection"}],staticClass:"mb-2 p-2 rounded text-red bg-white",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.graphAndPostsDirection=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"horizontal"}},[t._v("→")]),t._v(" "),n("option",{attrs:{value:"vertical"}},[t._v("↓")])])]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            The graph should take up\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.graphHeight,expression:"graphHeight",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16  rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.graphHeight},on:{input:function(e){e.target.composing||(t.graphHeight=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's height\n        ")]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            The post-bar should take up\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.postBarHeight,expression:"postBarHeight",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16  rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.postBarHeight},on:{input:function(e){e.target.composing||(t.postBarHeight=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's height\n        ")]),t._v(" "),n("label",{staticClass:"block"},[t._v("\n            Each post should take up at least\n            "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.postWidth,expression:"postWidth",modifiers:{number:!0}}],staticClass:"ml-4 mb-2 p-2 w-16 rounded text-gray-800 text-base bg-gray-400",attrs:{type:"number",inputmode:"numeric",pattern:"^[1-9][0-9]?$|^100$",size:"3",minlength:"1",maxlength:"3",min:"1",max:"100",step:"1"},domProps:{value:t.postWidth},on:{input:function(e){e.target.composing||(t.postWidth=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("\n            % of the browser window's width\n        ")]),t._v(" "),n("div",{staticClass:"p-1 h-64 w-64 flex overflow-auto border border-solid border-gray-600",class:"horizontal"===t.graphAndPostsDirection?"flex-row":"flex-col"},[n("div",{staticClass:"p-1 w-full border border-solid border-gray-600",style:{"min-height":t.graphHeight+"%"}},[t._v("\n                Graph\n            ")]),t._v(" "),n("div",{staticClass:"p-1 w-full border border-solid border-gray-600 flex items-start overflow-x-auto",class:{"mt-1":"vertical"===t.graphAndPostsDirection,"ml-1":"horizontal"===t.graphAndPostsDirection},style:{"min-height":t.postBarHeight+"%"}},[n("div",{staticClass:"mt-1 mr-1 mb-1 p-1 border border-solid border-gray-600 text-xs",style:{"min-width":t.postWidth+"%"}},[t._v("\n                    Post\n                ")]),t._v(" "),n("div",{staticClass:"m-1 p-1 border border-solid border-gray-600 text-xs",style:{"min-width":t.postWidth+"%"}},[t._v("\n                    Post\n                ")])])])])])}),[],!1,null,"1a84e024",null).exports},data:function(){return{currentTab:"viewer",tabs:[{key:"viewer",name:"Viewer"},{key:"graphs",name:"Graphs"},{key:"posts",name:"Posts"},{key:"links",name:"Links"},{key:"load-save",name:"Load/save"},{key:"settings",name:"Settings"}]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.e)(["loadingApp"]))};n("TGev");function At(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Nt,Et={name:"OfflineRoot",components:{OfflineApp:Object(m.a)(Dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.loadingApp?n("p",{staticClass:"px-4 md:px-8"},[t._v("\n        loading..\n    ")]):[n("nav",{staticClass:"flex flex-wrap",staticStyle:{"border-bottom":"5px solid var(--red)"}},t._l(t.tabs,(function(e){return n("button",{key:e.key,staticClass:"optionBtn flex-grow",class:{"optionBtn--selected":t.currentTab===e.key},on:{click:function(n){t.currentTab=e.key}}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0),t._v(" "),n("div",{staticClass:"min-h-full py-4 px-4 md:px-8 componentContainer"},[n(t.currentTab,{tag:"component"})],1)]],2)}),[],!1,null,"db9cfc50",null).exports},mounted:(Nt=c()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadStateFromStorage();case 2:case"end":return t.stop()}}),t,this)}))),function(){return Nt.apply(this,arguments)}),methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.b)(["loadStateFromStorage"]))},Bt=Object(m.a)(Et,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-full"},[e("OfflineApp",{staticClass:"w-full h-full"})],1)}),[],!1,null,null,null).exports;function Ft(t){return Number.isInteger(t)||function(t){if(RegExp(/^0+$/).test(t))return!0;var e=t.replace(/^0+/,""),n=Math.floor(Number(e));return n!==1/0&&String(n)===e&&n>=0}(t)}var $t,Ht={state:{shouldAutosave:!0,storageMethod:"local",canOpenMultiplePosts:!0,graphAndPostsDirection:"vertical",graphHeight:66,postBarHeight:66,postWidth:50},getters:{},mutations:{setState:function(t,e){t.shouldAutosave=e.shouldAutosave||!0,t.canOpenMultiplePosts=e.canOpenMultiplePosts||!0,t.storageMethod=e.storageMethod||"local",t.graphAndPostsDirection=e.graphAndPostsDirection||"vertical",t.graphHeight=e.graphHeight||66,t.postBarHeight=e.postBarHeight||66,t.postWidth=e.postWidth||50},setShouldAutosave:function(t,e){t.shouldAutosave=e},setStorageMethod:function(t,e){t.storageMethod=e},setCanOpenMultiplePosts:function(t,e){t.canOpenMultiplePosts=e},setGraphAndPostsDirection:function(t,e){t.graphAndPostsDirection=e},setGraphHeight:function(t,e){!Ft(e)||e>100||(t.graphHeight=e)},setPostBarHeight:function(t,e){!Ft(e)||e>100||(t.postBarHeight=e)},setPostWidth:function(t,e){!Ft(e)||e>100||(t.postWidth=e)}},actions:{setStorageMethod:function(t,e){var n=e.storageMethod,r=e.shouldTakeDataFrom,o=t.state.storageMethod!==n;t.commit("setStorageMethod",n),o&&t.dispatch("loadDataFrom",r,{root:!0})}},namespaced:!0},Jt={state:{firebaseConfig:{apiKey:"",authDomain:"xxx.firebaseapp.com",databaseURL:"https://xxx.firebaseio.com",projectId:"xxx",storageBucket:"xxx.appspot.com",messagingSenderId:"123",appId:"456"}},getters:{},mutations:{setState:function(t,e){t.firebaseConfig=e.firebaseConfig||{apiKey:"",authDomain:"xxx.firebaseapp.com",databaseURL:"https://xxx.firebaseio.com",projectId:"xxx",storageBucket:"xxx.appspot.com",messagingSenderId:"123",appId:"456"}},setFirebaseConfig:function(t,e){t.firebaseConfig=e}},actions:{setFirebaseConfig:($t=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n.apiKey){t.next=2;break}throw new Error("firebase config is wrong, please check it");case 2:return e.commit("setFirebaseConfig",n),t.next=5,e.dispatch("loadStateFromStorage",null,{root:!0});case 5:case"end":return t.stop()}}),t)}))),function(t,e){return $t.apply(this,arguments)})},namespaced:!0},Ut=n("J4zp"),zt=n.n(Ut),Wt=n("RIqP"),Rt=n.n(Wt);function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qt,Kt,Yt,Xt,Qt={posts:{},links:{},graphs:{1:{id:1,name:"default",nodes:[],colour:"black"}},selectedPostIds:[],selectedGraphIds:[1]},te={graphNames:function(t){return Object.values(t.graphs).map((function(t){return t.name}))},postIdsInSelectedGraphs:function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var s,a=t.selectedGraphIds[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var i=s.value;e=e.concat(t.graphs[i].nodes)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Rt()(new Set(e))},postsInSelectedGraphs:function(t,e){return e.postIdsInSelectedGraphs.map((function(e){return t.posts[e]}))},linksInSelectedGraphs:function(t){return Object.values(t.links).filter((function(e){return t.selectedGraphIds.includes(e.graph)}))},graphColour:function(t){return function(e){return t.graphs[e].colour||function(t){for(var e=0,n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);for(var r="#",o=0;o<3;o++){r+=("00"+(e>>8*o&255).toString(16)).substr(-2)}return r}("".concat(String(e),"salt and pepper are good for hashes"))}},postIds:function(t){return Object.keys(t.posts).map((function(t){return parseInt(t,10)}))},unlinkedPosts:function(t){for(var e=[],n=0,r=Object.values(t.graphs);n<r.length;n++){var o=r[n];e=e.concat(o.nodes)}var s=Rt()(new Set(e));return Object.keys(t.posts).map((function(t){return parseInt(t,10)})).filter((function(t){return!s.includes(t)})).map((function(e){return t.posts[e]}))},titleOrBody:function(t){return function(e){var n=t.posts[e],r=n.title.length>0?n.title:n.body.split("\n")[0];return r.length>30?r.substr(0,30)+"..":r}},neighbourIndex:function(t,e){var n={};return e.linksInSelectedGraphs.forEach((function(t){var e=Math.min(t.source,t.target),r=Math.max(t.source,t.target);n[e+","+r]=1})),n},isNeighbour:function(t,e){return function(t,n){var r=Math.min(t.id,n.id),o=Math.max(t.id,n.id);return void 0!==e.neighbourIndex[r+","+o]}},postIdsThatLinkToPost:function(t){return function(e){var n={},r={};return Object.values(t.links).forEach((function(t){t.source===e?n[t.id]=t.target:t.target===e&&(r[t.id]=t.source)})),{from:n,to:r}}},graphIdsThatIncludeThisPost:function(t){return function(e){for(var n=[],r=0,o=Object.values(t.graphs);r<o.length;r++){var s=o[r];s.nodes.includes(e)&&n.push(s.id)}return n}}},ee={setState:function(t,e){t.posts=e.posts,t.links=e.links,t.graphs=e.graphs,t.selectedPostIds=e.selectedPostIds,t.selectedGraphIds=e.selectedGraphIds},setSelectedPostIds:function(t,e){t.selectedPostIds=e},selectPostId:function(t,e){var n=e.id,r=e.canOpenMultiplePosts;t.selectedPostIds.includes(n)&&t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1),r?t.selectedPostIds.unshift(n):t.selectedPostIds=[n]},unselectPostId:function(t,e){t.selectedPostIds.splice(t.selectedPostIds.indexOf(e),1)},togglePostId:function(t,e){var n=e.id,r=e.canOpenMultiplePosts;t.selectedPostIds.includes(n)?t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1):r?t.selectedPostIds.unshift(n):t.selectedPostIds=[n]},setSelectedGraphIds:function(t,e){t.selectedGraphIds=e},selectGraphId:function(t,e){t.selectedGraphIds.includes(e)||t.selectedGraphIds.push(e)},toggleGraphId:function(t,e){t.selectedGraphIds.includes(e)?t.selectedGraphIds.splice(t.selectedGraphIds.indexOf(e),1):t.selectedGraphIds.push(e)},makeNewGraph:function(t,e){if(0!==e.trim().length)if(Object.values(t.graphs).map((function(t){return t.name})).includes(e))alert("You're trying to add a graph that already exists, choose a different name");else{var n=Object.keys(t.graphs),o=(0===n.length?0:Math.max.apply(Math,Rt()(n.map((function(t){return parseInt(t,10)})))))+1;r.a.set(t.graphs,o,{id:o,name:e,nodes:[]})}},changeGraphName:function(t,e){var n=e.graphId,r=e.newGraphName;t.graphs[n].name=r},removeGraph:function(t,e){var n=t.selectedGraphIds.filter((function(t){return t!==parseInt(e,10)}));t.selectedGraphIds=0===n.length?[1]:n,r.a.delete(t.graphs,e)},addPostToGraph:function(t,e){var n=e.graphId,r=e.postId;t.graphs[n].nodes.push(r)},removePostFromGraph:function(t,e){for(var n=e.graphId,o=e.postId,s={},a=0,i=Object.values(t.links);a<i.length;a++){var l=i[a],c=l.graph===parseInt(n,10),u=l.source===o||l.target===o;c&&u||(s[l.id]=l)}r.a.set(t,"links",s),r.a.set(t.graphs[n],"nodes",t.graphs[n].nodes.filter((function(t){return t!==o})))},addPost:function(t,e){return r.a.set(t.posts,e.id,e),e},updatePost:function(t,e){r.a.set(t.posts,e.id,e)},removePost:function(t,e){var n=e.id;t.selectedPostIds.includes(n)&&t.selectedPostIds.splice(t.selectedPostIds.indexOf(n),1);for(var o={},s=0,a=Object.values(t.links);s<a.length;s++){var i=a[s];i.source!==n&&i.target!==n&&(o[i.id]=i)}for(var l=0,c=Object.entries(t.graphs);l<c.length;l++){var u=zt()(c[l],2),p=u[0],d=u[1],h=Vt({},d,{nodes:d.nodes.filter((function(t){return t!==n}))});r.a.set(t.graphs,p,h)}r.a.set(t,"links",o),r.a.delete(t.posts,n)},addLink:function(t,e){var n=e.source,o=e.target,s=e.graph,a=e.type,i=void 0===a?"reply":a,l=Object.keys(t.links),c=(0===l.length?0:Math.max.apply(Math,Rt()(l.map((function(t){return parseInt(t,10)})))))+1;if(Object.values(t.links).filter((function(t){return t.graph===s&&t.source===n&&t.target===o&&t.type===i})).length>0)alert("This link already exists");else{var u=t.graphs[s].nodes;u.includes(n)||t.graphs[s].nodes.push(n),u.includes(o)||t.graphs[s].nodes.push(o),r.a.set(t.links,c,{id:c,graph:s,source:n,target:o,type:i})}},updateLink:function(t,e){var n=t.graphs[e.graph].nodes;n.includes(e.source)||t.graphs[e.graph].nodes.push(e.source),n.includes(e.target)||t.graphs[e.graph].nodes.push(e.target),r.a.set(t.links,e.id,e)},removeLink:function(t,e){var n=e.id;r.a.delete(t.links,n)}},ne={makeNewPost:(Kt=c()(i.a.mark((function t(e,n){var r,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.keys(Qt.posts),o=0===r.length?0:Math.max.apply(Math,Rt()(r.map((function(t){return parseInt(t,10)})))),s=o+1,n.id=s,e.commit("addPost",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),function(t,e){return Kt.apply(this,arguments)}),replyToPost:(qt=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postId,n.newPost;case 1:case"end":return t.stop()}}),t)}))),function(t,e){return qt.apply(this,arguments)})},re={state:Qt,getters:te,mutations:ee,actions:ne,namespaced:!0},oe=n("cDf5"),se=n.n(oe),ae={state:{showClickButtonMenu:!1,clickMode:"openPosts",newLinkSource:null,newLinkTarget:null,newLinkGraphId:1,newLinkType:"reply"},getters:{},mutations:{setShowClickButtonMenu:function(t,e){t.showClickButtonMenu=e},setClickMode:function(t,e){t.clickMode=e},setNewLinkSource:function(t,e){t.newLinkSource=e},setNewLinkTarget:function(t,e){t.newLinkTarget=e},setNewLinkGraphId:function(t,e){t.newLinkGraphId=e},setNewLinkType:function(t,e){t.newLinkType=e}},actions:{handlePostClick:(Xt=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===se()(n)){t.next=4;break}return console.log(n),alert("no post clicked"),t.abrupt("return");case 4:t.t0=e.state.clickMode,t.next="openPosts"===t.t0?7:"addLink"===t.t0?9:7;break;case 7:return e.commit("postsModule/selectPostId",{id:n.id,canOpenMultiplePosts:e.rootState.settingsModule.canOpenMultiplePosts},{root:!0}),t.abrupt("break",23);case 9:if(null!==e.state.newLinkSource){t.next=14;break}return e.commit("setNewLinkSource",n.id),t.abrupt("break",23);case 14:if(e.state.newLinkSource!==n.id){t.next=17;break}return alert("A post can't be linked to itself"),t.abrupt("return");case 17:return e.commit("setNewLinkTarget",n.id),e.commit("postsModule/addLink",{source:e.state.newLinkSource,target:e.state.newLinkTarget,graph:e.state.newLinkGraphId,type:e.state.newLinkType},{root:!0}),e.commit("setClickMode","openPosts"),e.commit("setNewLinkSource",null),e.commit("setNewLinkTarget",null),t.abrupt("break",23);case 23:case"end":return t.stop()}}),t)}))),function(t,e){return Xt.apply(this,arguments)}),handleLinkClick:(Yt=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return Yt.apply(this,arguments)})},namespaced:!0},ie=n("Wcq6"),le=(n("Zs65"),function(t){if(""===t.apiKey)throw new Error("firebase config is wrong, please check it: "+JSON.stringify(t));return ie.apps.length||ie.initializeApp(t),ie.database()});r.a.use(u.a);var ce,ue,pe,de,he,fe,ge="offlineState",ve=new u.a.Store({strict:!1,modules:{settingsModule:Ht,firebaseModule:Jt,postsModule:re,clickerModule:ae},state:{loadingApp:!0},getters:{storageObject:function(t){return{postsModule:t.postsModule,settingsModule:t.settingsModule,firebaseModule:t.firebaseModule}}},mutations:{setLoadingApp:function(t,e){t.loadingApp=e}},actions:{saveStateToLocalStorage:(fe=c()(i.a.mark((function t(e){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getters.storageObject,r=JSON.stringify(n),localStorage.setItem(ge,r);case 3:case"end":return t.stop()}}),t)}))),function(t){return fe.apply(this,arguments)}),saveStateToStorage:(he=c()(i.a.mark((function t(e){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getters.storageObject,r=JSON.stringify(n),o=e.state.settingsModule.storageMethod,t.t0=o,t.next="local"===t.t0?6:"firebase"===t.t0?8:11;break;case 6:return localStorage.setItem(ge,r),t.abrupt("break",11);case 8:return le(e.state.firebaseModule.firebaseConfig).ref(ge).set(r),t.abrupt("break",11);case 11:case"end":return t.stop()}}),t)}))),function(t){return he.apply(this,arguments)}),loadStateFromStorage:(de=c()(i.a.mark((function t(e){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=JSON.parse(localStorage.getItem(ge)))){t.next=4;break}return e.commit("setLoadingApp",!1),t.abrupt("return");case 4:r=n.settingsModule.storageMethod,t.t0=r,t.next="local"===t.t0?8:"firebase"===t.t0?11:23;break;case 8:return e.dispatch("importState",n),e.commit("setLoadingApp",!1),t.abrupt("break",23);case 11:t.prev=11,le(n.firebaseModule.firebaseConfig).ref(ge).once("value").then((function(t){var n=JSON.parse(t.val());e.dispatch("importState",n)})).catch((function(t){console.log(t),alert("There was an error loading the state from Firebase, please refresh the page/change your Firebase config in 'settings', and try again")})).finally((function(){e.commit("setLoadingApp",!1)})),t.next=22;break;case 16:return t.prev=16,t.t1=t.catch(11),e.commit("settingsModule/setStorageMethod","local",{root:!0}),e.commit("setLoadingApp",!1),alert(t.t1),t.abrupt("return");case 22:return t.abrupt("break",23);case 23:case"end":return t.stop()}}),t,null,[[11,16]])}))),function(t){return de.apply(this,arguments)}),loadDataFrom:(pe=c()(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="local"===t.t0?3:"firebase"===t.t0?9:13;break;case 3:if(console.log(localStorage.getItem(ge)),null!==(r=JSON.parse(localStorage.getItem(ge)))){t.next=7;break}return t.abrupt("return");case 7:return e.dispatch("importData",r),t.abrupt("break",14);case 9:return e.commit("setLoadingApp",!0),le(e.state.firebaseModule.firebaseConfig).ref(ge).once("value").then((function(t){var n=JSON.parse(t.val());console.log(n),e.dispatch("importData",n)})).catch((function(t){console.log(t),alert("There was an error loading the data from Firebase, please refresh the page/change your Firebase config in 'settings', and try again")})).finally((function(){e.commit("setLoadingApp",!1)})),t.abrupt("break",14);case 13:return t.abrupt("break",14);case 14:case"end":return t.stop()}}),t)}))),function(t,e){return pe.apply(this,arguments)}),importState:function(){var t=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postsModule&&e.commit("postsModule/setState",n.postsModule),n.settingsModule&&e.commit("settingsModule/setState",n.settingsModule),n.firebaseModule&&e.commit("firebaseModule/setState",n.firebaseModule);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),importData:(ue=c()(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.postsModule&&e.commit("postsModule/setState",n.postsModule);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return ue.apply(this,arguments)}),importSettings:(ce=c()(i.a.mark((function t(e,n){var r,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.storageObject,o=n.shouldTakeDataFrom,s=e.state.settingsModule.storageMethod!==r.settingsModule.storageMethod,r.settingsModule&&e.commit("settingsModule/setState",r.settingsModule),r.firebaseModule&&e.commit("firebaseModule/setState",r.firebaseModule),s&&e.dispatch("loadDataFrom",o);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return ce.apply(this,arguments)})}});ve.subscribe((function(t,e){var n=e.settingsModule.shouldAutosave&&!["postsModule/setState","settingsModule/setState","settingsModule/setStorageMethod","firebaseModule/setState","setLoadingApp"].includes(t.type)&&!t.type.startsWith("clickerModule/");console.log(t.type);var r={postsModule:e.postsModule,settingsModule:e.settingsModule,firebaseModule:e.firebaseModule},o=JSON.stringify(r);n?(console.log("autosaving, mutation is",t.type),"local"===e.settingsModule.storageMethod?localStorage.setItem(ge,o):(["settingsModule/setStorageMethod","firebaseModule/setFirebaseConfig"].includes(t.type)&&(console.log("mutationIsStorageChange, saving locally"),localStorage.setItem(ge,o)),le(e.firebaseModule.firebaseConfig).ref(ge).set(o))):["settingsModule/setStorageMethod","firebaseModule/setFirebaseConfig"].includes(t.type)&&(console.log("mutationIsStorageChange, saving locally"),localStorage.setItem(ge,o))}));var me=ve;new r.a({store:me,el:"#offlineGraphApp",components:{OfflineRoot:Bt},template:"<OfflineRoot/>"})},"8fUV":function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,"\n.clicker[data-v-0e672a91] {\n    position: absolute;\n    bottom: 5%;\n    right: 8%;\n}\n.clicker__button[data-v-0e672a91] {\n    border-radius: 9999px;\n\n    background: var(--red);\n    color: var(--white);\n    cursor: pointer;\n\n    width: 40px;\n    height: 40px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.clicker__container[data-v-0e672a91] {\n    position: absolute;\n    bottom: 100%;\n    right: 0;\n\n    display: flex;\n    flex-direction: column-reverse;\n    align-items: flex-end;\n}\n.clicker__actionButtons[data-v-0e672a91] {\n    border-radius: 10px;\n    padding: 10px;\n    margin-bottom: 10px;\n\n    background-color: var(--red);\n}\n.clicker__contextMenu[data-v-0e672a91] {\n    border-radius: 10px;\n    padding: 0 10px 10px 10px;\n    margin-bottom: 10px;\n\n    background-color: white;\n    border: 1px solid var(--red);\n    color: #333;\n}\n",""])},B7wW:function(t,e,n){var r=n("8fUV");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("12558de6",r,!0,{})},Ebcv:function(t,e,n){var r=n("k1XQ");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("35d698a0",r,!0,{})},FbAF:function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,"\n.actionsContainer[data-v-63d36f1e] {\n    padding: 1rem 1rem 0 1rem;\n\n    background-color: #eeeeee;\n    color: #333;\n}\n",""])},JR8w:function(t,e,n){"use strict";var r=n("B7wW");n.n(r).a},M23k:function(t,e,n){"use strict";var r=n("Xceb");n.n(r).a},SViF:function(t,e,n){"use strict";var r=n("1F4C");n.n(r).a},TGev:function(t,e,n){"use strict";var r=n("gIEz");n.n(r).a},TycU:function(t,e,n){"use strict";var r=n("Ebcv");n.n(r).a},Ugez:function(t,e,n){var r=n("axGT");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("483e11df",r,!0,{})},Xceb:function(t,e,n){var r=n("rGS1");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("234910c4",r,!0,{})},axGT:function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,"\n:root {\n    --text-size: 48px;\n}\n#graphSvg {\n    min-width: 33%;\n}\n.graph__link {\n    fill: none;\n    stroke-width: 20px;\n    cursor: pointer;\n}\n.node__circle {\n    fill: #353535;\n    stroke: none;\n    cursor: pointer;\n}\n.node__text {\n    cursor: pointer;\n    text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;\n    fill: #333333;\n\n    font-size: var(--text-size);\n    font-weight: bold;\n    stroke-width: 0;\n}\n",""])},gIEz:function(t,e,n){var r=n("xKYt");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("33c76878",r,!0,{})},hZnF:function(t,e,n){"use strict";var r=n("Ugez");n.n(r).a},j1RZ:function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,'\n.postBar {\n    min-width: 33%;\n    background: #eeeeee url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAR0lEQVQYlYWPuw0AQAhC2X9AY+UOTOBVNH7OgkQpHgDzSJJpHk3ySSZ0SPWXsBFqUiNuZGyEmoSNMBJ/a09i9ceOU1dca/U/VPFxnYht7pgAAAAASUVORK5CYII=");\n}\n',""])},jjuK:function(t,e,n){"use strict";var r=n("m4D4");n.n(r).a},k1XQ:function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,"\n.textareaBody[data-v-4a313601] {\n    min-height: 75px;\n    max-height: 50%;\n}\n",""])},m4D4:function(t,e,n){var r=n("wngj");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("073a4334",r,!0,{})},rGS1:function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,'\n.post[data-v-408e8c65] {\n    background: white;\n\n    overflow-y: auto;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n}\n@media (max-width: 768px) {\n.post[data-v-408e8c65] {\n        min-width: 92% !important;\n}\n}\n.post__dragHandle[data-v-408e8c65] {\n    cursor: grab;\n}\n.focusButton[data-v-408e8c65] {\n    cursor: crosshair;\n}\n.bottomLink[data-v-408e8c65] {\n    font-size: .75rem;\n}\n.bottomLink--unselected[data-v-408e8c65] {\n    color: #a0aec0;\n}\n.bottomLink--selected[data-v-408e8c65] {\n    color: #2d3748;\n}\n.bottomLink[data-v-408e8c65]:hover {\n     color: #2d3748;\n}\n.bottomLink[data-v-408e8c65]:not(:last-of-type):after {\n    content: "⋅"\n}\n',""])},s1UG:function(t,e,n){var r=n("j1RZ");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("71231a00",r,!0,{})},wngj:function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,"\n.setting[data-v-1a84e024] {\n    padding: 1rem 2rem;\n\n    background-color: white;\n    border-radius: 1rem;\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n.setting[data-v-1a84e024]:not(:last-of-type) {\n    margin-bottom: 2rem;\n}\n",""])},xKYt:function(t,e,n){var r=n("JPst");(t.exports=r(!1)).push([t.i,"\n.componentContainer[data-v-db9cfc50] {\n    background-color: #eee;\n    color: #333;\n}\n",""])}});
//# sourceMappingURL=graph-b5e893983e0cc28f87a2.js.map